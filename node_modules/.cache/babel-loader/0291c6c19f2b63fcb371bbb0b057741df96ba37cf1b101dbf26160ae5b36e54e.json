{"ast":null,"code":"'use client';\n\nimport classNames$1 from 'classnames';\nimport { usePlasmicDataSourceContext, PlasmicDataSourceContextProvider } from '@plasmicapp/data-sources-context';\nexport { PlasmicDataSourceContextProvider, useCurrentUser } from '@plasmicapp/data-sources-context';\nimport * as plasmicQuery from '@plasmicapp/query';\nimport * as React from 'react';\nimport React__default, { useLayoutEffect, useEffect } from 'react';\nimport get from 'dlv';\nexport { default as get } from 'dlv';\nimport { usePlasmicLinkMaybe, PlasmicTranslatorContext as PlasmicTranslatorContext$1, usePlasmicTranslator as usePlasmicTranslator$1, DataProvider, PlasmicLinkProvider, usePlasmicCanvasContext } from '@plasmicapp/host';\nimport * as ReactDOM from 'react-dom';\nimport ReactDOM__default from 'react-dom';\nimport { SSRProvider, useIsSSR as useIsSSR$1 } from '@react-aria/ssr';\nimport { useFocusRing, useFocusable, FocusScope } from '@react-aria/focus';\nimport { proxy, useSnapshot, ref, getVersion, subscribe } from 'valtio';\nimport clone from 'clone';\nimport { useCheckbox as useCheckbox$1 } from '@react-aria/checkbox';\nimport { VisuallyHidden } from '@react-aria/visually-hidden';\nimport { useToggleState } from '@react-stately/toggle';\nimport { useMenu as useMenu$1, useMenuSection, useMenuItem as useMenuItem$1, useMenuTrigger as useMenuTrigger$1 } from '@react-aria/menu';\nimport { useTreeState } from '@react-stately/tree';\nimport { Item, Section } from '@react-stately/collections';\nimport { useSeparator } from '@react-aria/separator';\nimport { useMenuTriggerState } from '@react-stately/menu';\nimport { usePress } from '@react-aria/interactions';\nimport { useListBox, useOption, useListBoxSection } from '@react-aria/listbox';\nimport { useSelect as useSelect$1, HiddenSelect } from '@react-aria/select';\nimport { useSelectState } from '@react-stately/select';\nimport { useSwitch as useSwitch$1 } from '@react-aria/switch';\nimport { useOverlay, useOverlayPosition, DismissButton } from '@react-aria/overlays';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\n// https://stackoverflow.com/a/2117523\nfunction uuidv4() {\n  // eslint-disable-next-line\n  // @ts-ignore\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {\n    return (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16);\n  });\n}\nfunction triggerLogin(appId, authorizeEndpoint, redirectUri) {\n  return __awaiter(this, void 0, void 0, function () {\n    function sha256(text) {\n      return __awaiter(this, void 0, void 0, function () {\n        var encoder, data, hashBuffer, hashArray, hashHex;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              encoder = new TextEncoder();\n              data = encoder.encode(text);\n              return [4 /*yield*/, crypto.subtle.digest(\"SHA-256\", data)];\n            case 1:\n              hashBuffer = _a.sent();\n              hashArray = Array.from(new Uint8Array(hashBuffer));\n              hashHex = hashArray.map(function (b) {\n                return b.toString(16).padStart(2, \"0\");\n              }).join(\"\");\n              return [2 /*return*/, hashHex];\n          }\n        });\n      });\n    }\n    var continueTo, state, code_verifier, code_challenge, params, url;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          continueTo = window.location.href;\n          state = JSON.stringify({\n            continueTo: continueTo\n          });\n          code_verifier = uuidv4();\n          localStorage.setItem(\"code_verifier\", code_verifier);\n          return [4 /*yield*/, sha256(code_verifier)];\n        case 1:\n          code_challenge = _a.sent();\n          params = new URLSearchParams();\n          params.set(\"client_id\", appId);\n          params.set(\"state\", state);\n          params.set(\"response_type\", \"code\");\n          params.set(\"code_challenge\", code_challenge);\n          params.set(\"code_challenge_method\", \"S256\");\n          params.set(\"origin_host\", window.location.host);\n          if (redirectUri) {\n            params.set(\"redirect_uri\", redirectUri);\n          }\n          url = \"\".concat(authorizeEndpoint, \"?\").concat(params.toString());\n          window.location.href = url;\n          return [2 /*return*/];\n      }\n    });\n  });\n}\nfunction PlasmicPageGuard(props) {\n  var _a;\n  var appId = props.appId,\n    authorizeEndpoint = props.authorizeEndpoint,\n    minRole = props.minRole,\n    canTriggerLogin = props.canTriggerLogin,\n    children = props.children,\n    unauthorizedComp = props.unauthorizedComp;\n  var dataSourceCtxValue = usePlasmicDataSourceContext();\n  React__default.useEffect(function () {\n    if (canTriggerLogin) {\n      if (minRole && dataSourceCtxValue && \"isUserLoading\" in dataSourceCtxValue && !dataSourceCtxValue.isUserLoading && !dataSourceCtxValue.user) {\n        triggerLogin(appId, authorizeEndpoint, dataSourceCtxValue.authRedirectUri);\n      }\n    }\n  }, [dataSourceCtxValue, appId, authorizeEndpoint, canTriggerLogin, minRole]);\n  function canUserViewPage() {\n    if (!minRole) {\n      return true;\n    }\n    if (!dataSourceCtxValue) {\n      return false;\n    }\n    if (!dataSourceCtxValue.user) {\n      return false;\n    }\n    if (!(\"roleIds\" in dataSourceCtxValue.user)) {\n      return false;\n    }\n    if (!Array.isArray(dataSourceCtxValue.user.roleIds)) {\n      return false;\n    }\n    return dataSourceCtxValue.user.roleIds.includes(minRole);\n  }\n  // If we are in prepass, PlasmicPageGuard should not render anything\n  // it's expected that pages are only equipped with PlasmicPageGuard\n  // when it's known that it will disable prepass/prefetching\n  if ((_a = plasmicQuery.isPlasmicPrepass) === null || _a === void 0 ? void 0 : _a.call(plasmicQuery)) {\n    return null;\n  }\n  /*\n  PlasmicPageGuard has three cases:\n  1. No value of dataSourceCtxValue, user is loading or a trigger login should be performed.\n     In this case, we don't want to render the children or the access denied message.\n     While the user is loading we look to see if don't have a user value as we can be in a\n     revalidate state.\n  2. The user doesn't have access to the page in which we show an access denied message.\n  3. The user has access to the page in which we render the children.\n  */\n  if (!dataSourceCtxValue || dataSourceCtxValue.isUserLoading && !dataSourceCtxValue.user || !dataSourceCtxValue.user && minRole && canTriggerLogin) {\n    return null;\n  }\n  if (!canUserViewPage()) {\n    if (unauthorizedComp) {\n      return React__default.createElement(React__default.Fragment, null, unauthorizedComp);\n    }\n    return React__default.createElement(\"div\", null, \"You don't have access to this page\");\n  }\n  return React__default.createElement(React__default.Fragment, null, children);\n}\nfunction withPlasmicPageGuard(WrappedComponent, options) {\n  var PageGuard = function (props) {\n    return React__default.createElement(PlasmicPageGuard, __assign({}, options), React__default.createElement(WrappedComponent, __assign({}, props)));\n  };\n  return PageGuard;\n}\nfunction notNil(x) {\n  return x != null;\n}\nfunction pick(obj) {\n  var e_1, _a;\n  var keys = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    keys[_i - 1] = arguments[_i];\n  }\n  if (Object.keys(obj).length === 0) {\n    return obj;\n  }\n  var res = {};\n  try {\n    for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n      var key = keys_1_1.value;\n      if (key in obj) {\n        res[key] = obj[key];\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return res;\n}\nfunction pickBy(obj, func) {\n  var e_2, _a;\n  var res = {};\n  try {\n    for (var _b = __values(Object.entries(obj)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var _d = __read(_c.value, 2),\n        key = _d[0],\n        val = _d[1];\n      if (func(key, val)) {\n        res[key] = obj[key];\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n  return res;\n}\nfunction omit(obj) {\n  var e_3, _a;\n  var keys = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    keys[_i - 1] = arguments[_i];\n  }\n  if (Object.keys(obj).length === 0) {\n    return obj;\n  }\n  var res = {};\n  try {\n    for (var _b = __values(Object.keys(obj)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      if (!keys.includes(key)) {\n        res[key] = obj[key];\n      }\n    }\n  } catch (e_3_1) {\n    e_3 = {\n      error: e_3_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_3) throw e_3.error;\n    }\n  }\n  return res;\n}\nfunction isSubset(a1, a2) {\n  return a1.every(function (x) {\n    return a2.includes(x);\n  });\n}\nfunction chainSingleArgFuncs() {\n  var funcs = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    funcs[_i] = arguments[_i];\n  }\n  if (funcs.length === 0) {\n    return undefined;\n  }\n  return function (arg) {\n    var e_4, _a;\n    var res = arg;\n    try {\n      for (var funcs_1 = __values(funcs), funcs_1_1 = funcs_1.next(); !funcs_1_1.done; funcs_1_1 = funcs_1.next()) {\n        var func = funcs_1_1.value;\n        res = func(res);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (funcs_1_1 && !funcs_1_1.done && (_a = funcs_1.return)) _a.call(funcs_1);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n    return res;\n  };\n}\nfunction ensure(x) {\n  if (x === null || x === undefined) {\n    debugger;\n    throw new Error(\"Value must not be undefined or null\");\n  } else {\n    return x;\n  }\n}\nfunction isString(x) {\n  return typeof x === \"string\";\n}\nfunction groupBy(collection, keyFunc) {\n  var e_5, _a;\n  var result = {};\n  try {\n    for (var collection_1 = __values(collection), collection_1_1 = collection_1.next(); !collection_1_1.done; collection_1_1 = collection_1.next()) {\n      var obj = collection_1_1.value;\n      var key = keyFunc(obj);\n      if (key in result) {\n        result[key].push(obj);\n      } else {\n        result[key] = [obj];\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (collection_1_1 && !collection_1_1.done && (_a = collection_1.return)) _a.call(collection_1);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n  return result;\n}\nfunction mapValues(obj, mapper) {\n  var result = {};\n  for (var key in obj) {\n    result[key] = mapper(obj[key]);\n  }\n  return result;\n}\nvar isBrowser = typeof window !== \"undefined\";\nvar NONE = Symbol(\"NONE\");\nvar useIsomorphicLayoutEffect$1 = isBrowser ? React__default.useLayoutEffect : React__default.useEffect;\nfunction createElementWithChildren(elementType, props, children) {\n  if (Array.isArray(children)) {\n    return React__default.createElement.apply(React__default, __spreadArray([elementType, props], __read(children), false));\n  } else if (children || \"children\" in props) {\n    // Only call React.createElement with `children` if there are actual children,\n    // or if there was an explicit (albeit undefined) children passed via\n    // props.  Otherwise, if you pass `undefined` as the children argument\n    // to React.createElement, the created element will have prop {children: undefined}.\n    // If the `root` is an PlasmicGeneratedComponent, and these props with {children: undefined}\n    // are used, then it will be taken as a `children` override, and will thus blank out\n    // everything under the root node.\n    return React__default.createElement(elementType, props, children);\n  } else {\n    return React__default.createElement(elementType, props);\n  }\n}\nfunction ensureNotArray(children) {\n  if (Array.isArray(children)) {\n    if (children.length === 1) {\n      return children[0];\n    } else {\n      return React__default.createElement.apply(React__default, __spreadArray([React__default.Fragment, {}], __read(children), false));\n    }\n  } else {\n    return children;\n  }\n}\n/**\n * Flattens ReactNode into an array of ReactChild, but does NOT replace\n * missing keys with array index, as React.Children.toArray() does.\n */\nfunction toChildArray(children) {\n  if (isReactChild(children)) {\n    return [children];\n  } else if (Array.isArray(children)) {\n    return children.flatMap(toChildArray);\n  } else {\n    return [];\n  }\n}\nfunction isReactText(child) {\n  return typeof child === \"string\" || typeof child === \"number\";\n}\nfunction isReactChild(child) {\n  return React__default.isValidElement(child) || isReactText(child);\n}\nfunction isReactNode(x) {\n  return typeof x === \"string\" || typeof x === \"number\" || React__default.isValidElement(x);\n}\nfunction mergeProps(props) {\n  var e_1, _a, e_2, _b;\n  var restProps = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    restProps[_i - 1] = arguments[_i];\n  }\n  if (restProps.every(function (rest) {\n    return Object.keys(rest).length === 0;\n  })) {\n    return props;\n  }\n  var result = __assign({}, props);\n  try {\n    for (var restProps_1 = __values(restProps), restProps_1_1 = restProps_1.next(); !restProps_1_1.done; restProps_1_1 = restProps_1.next()) {\n      var rest = restProps_1_1.value;\n      try {\n        for (var _c = (e_2 = void 0, __values(Object.keys(rest))), _d = _c.next(); !_d.done; _d = _c.next()) {\n          var key = _d.value;\n          result[key] = mergePropVals(key, result[key], rest[key]);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (restProps_1_1 && !restProps_1_1.done && (_a = restProps_1.return)) _a.call(restProps_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return result;\n}\nfunction updateRef(ref, value) {\n  if (!ref) {\n    return;\n  }\n  if (typeof ref === \"function\") {\n    ref(value);\n  } else {\n    if (!Object.isFrozen(ref)) {\n      ref.current = value;\n    }\n  }\n}\nfunction mergeRefs() {\n  var refs = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    refs[_i] = arguments[_i];\n  }\n  return function (value) {\n    var e_3, _a;\n    try {\n      for (var refs_1 = __values(refs), refs_1_1 = refs_1.next(); !refs_1_1.done; refs_1_1 = refs_1.next()) {\n        var ref = refs_1_1.value;\n        updateRef(ref, value);\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (refs_1_1 && !refs_1_1.done && (_a = refs_1.return)) _a.call(refs_1);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n  };\n}\nfunction mergePropVals(name, val1, val2) {\n  if (val1 === NONE || val2 === NONE) {\n    // The NONE sentinel always skips all merging and returns null\n    return null;\n  } else if (val1 == null) {\n    // If either of them is nil, prefer the other\n    return val2;\n  } else if (val2 == null) {\n    return val1;\n  } else if (name === \"className\") {\n    // Special case for className -- always combine both class names\n    return classNames$1(val1, val2);\n  } else if (name === \"style\") {\n    // Special case for style -- always shallow-merge style dicts\n    return __assign(__assign({}, val1), val2);\n  } else if (name === \"ref\") {\n    // Special case for ref\n    return mergeRefs(val1, val2);\n  } else if (typeof val1 !== typeof val2) {\n    // If the type of the two values are different, then no way to merge them.\n    // Prefer val2.\n    return val2;\n  } else if (name.startsWith(\"on\") && typeof val1 === \"function\") {\n    // Special case for event handlers -- always call both handlers\n    return function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      var res;\n      if (typeof val1 === \"function\") {\n        res = val1.apply(void 0, __spreadArray([], __read(args), false));\n      }\n      if (typeof val2 === \"function\") {\n        res = val2.apply(void 0, __spreadArray([], __read(args), false));\n      }\n      return res;\n    };\n  } else {\n    // For all else, prefer val2\n    return val2;\n  }\n}\nfunction getElementTypeName(element) {\n  var _a, _b, _c, _d;\n  if (typeof element.type === \"string\") {\n    return element.type;\n  } else {\n    var comp = element.type;\n    return (_d = (_b = (_a = comp.displayName) !== null && _a !== void 0 ? _a : comp.name) !== null && _b !== void 0 ? _b : (_c = comp.render) === null || _c === void 0 ? void 0 : _c.name) !== null && _d !== void 0 ? _d : \"Component\";\n  }\n}\nfunction renderStack(as, props, hasGap, ref) {\n  var children = props.children,\n    rest = __rest(props, [\"children\"]);\n  var wrappedChildren = wrapFlexContainerChildren(children, hasGap !== null && hasGap !== void 0 ? hasGap : false);\n  return createElementWithChildren(as, __assign({\n    ref: ref\n  }, rest), wrappedChildren);\n}\nfunction FlexStack_(props, outerRef) {\n  var as = props.as,\n    hasGap = props.hasGap,\n    rest = __rest(props, [\"as\", \"hasGap\"]);\n  return renderStack(as !== null && as !== void 0 ? as : \"div\", rest, hasGap, outerRef);\n}\nvar FlexStack = React.forwardRef(FlexStack_);\nvar makeStackImpl = function (as) {\n  return React.forwardRef(function (props, ref) {\n    var hasGap = props.hasGap,\n      rest = __rest(props, [\"hasGap\"]);\n    return renderStack(as, rest, hasGap, ref);\n  });\n};\nvar Stack = Object.assign(FlexStack, {\n  div: makeStackImpl(\"div\"),\n  a: makeStackImpl(\"a\"),\n  button: makeStackImpl(\"button\"),\n  h1: makeStackImpl(\"h1\"),\n  h2: makeStackImpl(\"h2\"),\n  h3: makeStackImpl(\"h3\"),\n  h4: makeStackImpl(\"h4\"),\n  h5: makeStackImpl(\"h5\"),\n  h6: makeStackImpl(\"h6\"),\n  label: makeStackImpl(\"label\"),\n  form: makeStackImpl(\"form\"),\n  section: makeStackImpl(\"section\"),\n  head: makeStackImpl(\"head\"),\n  main: makeStackImpl(\"main\"),\n  nav: makeStackImpl(\"nav\")\n});\nfunction hasVariant(variants, groupName, variant) {\n  if (variants == null) {\n    return false;\n  }\n  var groupVariants = variants[groupName];\n  if (groupVariants == null) {\n    return false;\n  } else if (groupVariants === true) {\n    return variant === groupName;\n  } else if (groupVariants === false) {\n    return false;\n  } else if (Array.isArray(groupVariants)) {\n    return groupVariants.includes(variant);\n  } else if (typeof groupVariants === \"string\") {\n    return groupVariants === variant;\n  } else {\n    return groupVariants[variant] !== undefined && groupVariants[variant] !== false;\n  }\n}\nfunction wrapFlexContainerChildren(children, hasGap) {\n  // We need to always wrap the children, even if there are no gaps, because\n  // otherwise if we toggle between with and without gap, React reconciliation\n  // will blow away the children tree and all state if we switch from having\n  // a wrapper and not.\n  var className = hasGap ? \"__wab_flex-container ρfc\" : \"__wab_passthrough\";\n  if (!children) {\n    return null;\n  } else if (Array.isArray(children)) {\n    return React.createElement.apply(React, __spreadArray([\"div\", {\n      className: className\n    }], __read(children), false));\n  } else {\n    return React.createElement(\"div\", {\n      className: className\n    }, children);\n  }\n}\nfunction createPlasmicElement(override, defaultRoot, defaultProps, wrapChildrenInFlex) {\n  if (!override || typeof override === \"object\" && Object.keys(override).length === 0) {\n    return createElementWithChildren(defaultRoot, defaultProps, defaultProps.children);\n  }\n  var override2 = deriveOverride(override);\n  var props = mergeOverrideProps(defaultProps, override2.props);\n  if (override2.type === \"render\") {\n    return override2.render(props, defaultRoot);\n  }\n  var root = defaultRoot;\n  if (override2.type === \"as\" && override2.as) {\n    if (defaultRoot === Stack) {\n      // If there was an \"as\" override specified, but the default type is\n      // a Stack, then we don't want to switch to using \"as\" as the root,\n      // because then we'd lose the flex wrapper that Stack provides.\n      // Instead, we specify the \"as\" as the \"as\" prop to Stack.\n      props.as = override2.as;\n    } else {\n      root = override2.as;\n    }\n  }\n  var children = props.children;\n  if (override2.wrapChildren) {\n    children = override2.wrapChildren(ensureNotArray(children));\n  }\n  if (wrapChildrenInFlex) {\n    // For legacy, we still support data-plasmic-wrap-flex-children\n    children = wrapFlexContainerChildren(children, true);\n  }\n  var result = createElementWithChildren(root, props, children);\n  if (override2.wrap) {\n    result = override2.wrap(result);\n  }\n  return result;\n}\n// We use data-plasmic-XXX attributes for custom properties since Typescript doesn't\n// support type check on jsx pragma. See https://github.com/microsoft/TypeScript/issues/21699\n// for more info.\nvar seenElements = new Map();\nfunction createPlasmicElementProxy(defaultElement, props) {\n  // We use seenElements to keep track of elements that has been rendered by\n  // createPlasmicElementProxy().  When a JSX tree is evaluated, the JSX factory\n  // is invoked from the leaf to the root as the last call.  So we can store\n  // all the elements we've created until we encounter the leaf, at which point\n  // we will clear this map.  We are guaranteed that this map will only contain\n  // elements from one Plasmic* component at a time, because we're just creating\n  // elements and not \"rendering\" at this point; even if this JSX tree references\n  // other Plasmic* elements, we'll just create an element referencing that component,\n  // rather than following into the content of that component.\n  //\n  // TODO: is this ConcurrentMode friendly?\n  var _a;\n  var children = [];\n  for (var _i = 2; _i < arguments.length; _i++) {\n    children[_i - 2] = arguments[_i];\n  }\n  if (props == null) {\n    props = {};\n  }\n  var name = props[\"data-plasmic-name\"];\n  var isRoot = props[\"data-plasmic-root\"];\n  var forNodeName = props[\"data-plasmic-for-node\"];\n  delete props[\"data-plasmic-name\"];\n  delete props[\"data-plasmic-root\"];\n  delete props[\"data-plasmic-for-node\"];\n  var element = createPlasmicElementFromJsx.apply(void 0, __spreadArray([defaultElement, props], __read(children), false));\n  if (name) {\n    seenElements.set(name, element);\n  }\n  if (isRoot) {\n    // If this is the root, and we requested a specific node by specifying data-plasmic-for-node,\n    // then return that node instead\n    var forNode = forNodeName ? (_a = seenElements.get(forNodeName)) !== null && _a !== void 0 ? _a : null : element;\n    // Clear out the seenElements map, as we're done rendering this Plasmic* component.\n    seenElements.clear();\n    return forNode;\n  }\n  return element;\n}\nfunction createPlasmicElementFromJsx(defaultElement, props) {\n  var _a;\n  var children = [];\n  for (var _i = 2; _i < arguments.length; _i++) {\n    children[_i - 2] = arguments[_i];\n  }\n  var override = props[\"data-plasmic-override\"];\n  var wrapFlexChild = props[\"data-plasmic-wrap-flex-child\"];\n  var triggerProps = (_a = props[\"data-plasmic-trigger-props\"]) !== null && _a !== void 0 ? _a : [];\n  delete props[\"data-plasmic-override\"];\n  delete props[\"data-plasmic-wrap-flex-child\"];\n  delete props[\"data-plasmic-trigger-props\"];\n  return createPlasmicElement(override, defaultElement, mergeProps.apply(void 0, __spreadArray([props, children.length === 0 ? {} : {\n    children: children.length === 1 ? children[0] : children\n  }], __read(triggerProps), false)), wrapFlexChild);\n}\nfunction makeFragment() {\n  var children = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    children[_i] = arguments[_i];\n  }\n  return React.createElement.apply(React, __spreadArray([React.Fragment, {}], __read(children), false));\n}\nvar UNSET = Symbol(\"UNSET\");\nfunction mergeOverrideProps(defaults, overrides) {\n  var e_1, _a;\n  if (!overrides) {\n    return defaults;\n  }\n  var result = __assign({}, defaults);\n  try {\n    for (var _b = __values(Object.keys(overrides)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var defaultVal = defaults[key];\n      var overrideVal = overrides[key];\n      if (overrideVal === UNSET) {\n        delete result[key];\n      } else {\n        // We use the NONE sentinel if the overrideVal is nil, and is not one of the\n        // props that we merge by default -- which are className, style, and\n        // event handlers.  This means for all other \"normal\" props -- like children,\n        // title, etc -- a nil value will unset the default.\n        if (overrideVal == null && key !== \"className\" && key !== \"style\" && !(key.startsWith(\"on\") && typeof defaultVal === \"function\")) {\n          overrideVal = NONE;\n        }\n        result[key] = mergePropVals(key, defaultVal, overrideVal);\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return result;\n}\nfunction wrapWithClassName(element, className) {\n  var key = React.isValidElement(element) ? element.key || undefined : undefined;\n  return React.createElement(\"div\", {\n    key: key,\n    className: className,\n    style: {\n      display: \"grid\"\n    }\n  }, element);\n}\nfunction deriveOverride(x) {\n  if (!x) {\n    // undefined Binding is an empty Binding\n    return {\n      type: \"default\",\n      props: {}\n    };\n  } else if (isReactNode(x)) {\n    // If ReactNode, then assume this is the children\n    return {\n      type: \"default\",\n      props: {\n        children: x\n      }\n    };\n  } else if (typeof x === \"object\") {\n    // If any of the overrideKeys is a key of this object, then assume\n    // this is a full Override\n    if (\"as\" in x) {\n      return __assign(__assign({}, x), {\n        props: x.props || {},\n        type: \"as\"\n      });\n    } else if (\"render\" in x) {\n      return __assign(__assign({}, x), {\n        type: \"render\"\n      });\n    } else if (\"props\" in x) {\n      return __assign(__assign({}, x), {\n        props: x.props || {},\n        type: \"default\"\n      });\n    } else if (isSubset(Object.keys(x), [\"wrap\", \"wrapChildren\"])) {\n      // Only twiddling functions present, so assume no props overrides\n      // (otherwise we'd assume these were props).\n      return __assign(__assign({}, x), {\n        props: {},\n        type: \"default\"\n      });\n    }\n    // Else, assume this is just a props object.\n    return {\n      type: \"default\",\n      props: x\n    };\n  } else if (typeof x === \"function\") {\n    return {\n      type: \"render\",\n      render: x\n    };\n  }\n  throw new Error(\"Unexpected override: \".concat(x));\n}\nfunction mergeVariants(v1, v2) {\n  if (!v1 || !v2) {\n    return v1 || v2 || {};\n  }\n  return __assign(__assign({}, v1), v2);\n}\nfunction mergeVariantsWithStates(variants, $state, linkedStates) {\n  return __assign(__assign({}, variants), Object.fromEntries(linkedStates.map(function (_a) {\n    var variantGroup = _a.variantGroup,\n      statePath = _a.statePath;\n    return [variantGroup, get($state, statePath)];\n  })));\n}\nfunction mergeArgs(a1, a2) {\n  if (!a1 || !a2) {\n    return a1 || a2 || {};\n  }\n  return __assign(__assign({}, a1), a2);\n}\nfunction mergeFlexOverrides(o1, o2) {\n  var e_2, _a;\n  if (!o2) {\n    return o1;\n  }\n  var keys = Array.from(new Set(__spreadArray(__spreadArray([], __read(Object.keys(o1)), false), __read(Object.keys(o2)), false)));\n  var merged = {};\n  try {\n    for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n      var key = keys_1_1.value;\n      merged[key] = mergeFlexOverride(o1[key], o2[key]);\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n  return merged;\n}\nfunction mergeFlexOverride(fo1, fo2) {\n  var _a, _b;\n  if (!fo1) {\n    return fo2;\n  }\n  if (!fo2) {\n    return fo1;\n  }\n  var o1 = deriveOverride(fo1);\n  var o2 = deriveOverride(fo2);\n  var wrap = chainSingleArgFuncs.apply(void 0, __spreadArray([], __read([o1.wrap, o2.wrap].filter(notNil)), false));\n  var wrapChildren = chainSingleArgFuncs.apply(void 0, __spreadArray([], __read([o1.wrapChildren, o2.wrapChildren].filter(notNil)), false));\n  // \"render\" type always takes precedence, but we still merge the props\n  var props = mergeOverrideProps((_a = o1.props) !== null && _a !== void 0 ? _a : {}, o2.props);\n  if (o2.type === \"render\") {\n    return {\n      render: o2.render,\n      props: props,\n      wrap: wrap,\n      wrapChildren: wrapChildren\n    };\n  }\n  if (o1.type === \"render\") {\n    return {\n      render: o1.render,\n      props: props,\n      wrap: wrap,\n      wrapChildren: wrapChildren\n    };\n  }\n  // \"as\" will take precedence\n  var as = (_b = o2.type === \"as\" ? o2.as : undefined) !== null && _b !== void 0 ? _b : o1.type === \"as\" ? o1.as : undefined;\n  return __assign({\n    props: props,\n    wrap: wrap,\n    wrapChildren: wrapChildren\n  }, as ? {\n    as: as\n  } : {});\n}\nfunction deriveRenderOpts(props, config) {\n  var _a;\n  var name = config.name,\n    descendantNames = config.descendantNames,\n    internalVariantPropNames = config.internalVariantPropNames,\n    internalArgPropNames = config.internalArgPropNames;\n  var reservedPropNames = [\"variants\", \"args\", \"overrides\"];\n  var variants = mergeVariants(omit.apply(void 0, __spreadArray([pick.apply(void 0, __spreadArray([props], __read(internalVariantPropNames), false))], __read(reservedPropNames), false)), props.variants);\n  var args = mergeArgs(omit.apply(void 0, __spreadArray([pick.apply(void 0, __spreadArray([props], __read(internalArgPropNames), false))], __read(reservedPropNames), false)), props.args);\n  var overrides = mergeFlexOverrides(omit.apply(void 0, __spreadArray(__spreadArray(__spreadArray([pick.apply(void 0, __spreadArray([props], __read(descendantNames), false))], __read(internalArgPropNames), false), __read(internalVariantPropNames), false), __read(reservedPropNames), false)), props.overrides);\n  var leftoverProps = omit.apply(void 0, __spreadArray(__spreadArray(__spreadArray([props, \"variants\", \"args\", \"overrides\"], __read(descendantNames), false), __read(internalVariantPropNames), false), __read(internalArgPropNames), false));\n  if (Object.keys(leftoverProps).length > 0) {\n    overrides = mergeFlexOverrides(overrides, (_a = {}, _a[name] = {\n      props: leftoverProps\n    }, _a));\n  }\n  return {\n    variants: variants,\n    args: args,\n    overrides: overrides\n  };\n}\nvar isDefaultValue = function (val) {\n  return val === \"PLEASE_RENDER_INSIDE_PROVIDER\";\n};\nvar seenDefaultVariants = {};\nfunction ensureGlobalVariants(globalVariantValues) {\n  Object.entries(globalVariantValues).filter(function (_a) {\n    var _b = __read(_a, 2);\n    _b[0];\n    var value = _b[1];\n    return isDefaultValue(value);\n  }).forEach(function (_a) {\n    var _b = __read(_a, 2),\n      key = _b[0];\n    _b[1];\n    globalVariantValues[key] = undefined;\n    if (!seenDefaultVariants[key] && process.env.NODE_ENV === \"development\") {\n      seenDefaultVariants[key] = true;\n      var providerName = \"\".concat(key[0].toUpperCase()).concat(key.substring(1), \"Context.Provider\");\n      console.warn(\"Plasmic context value for global variant \\\"\".concat(key, \"\\\" was not provided; please use \").concat(providerName, \" at the root of your React app. Learn More: https://www.plasmic.app/learn/other-assets/#global-variants\"));\n    }\n  });\n  return globalVariantValues;\n}\nvar PlasmicHeadContext = React.createContext(undefined);\nfunction PlasmicHead(props) {\n  var Head = React.useContext(PlasmicHeadContext);\n  var headMetadata =\n  // Check if `HeadMetadataContext` is exported for backward compatibility\n  \"HeadMetadataContext\" in plasmicQuery ? React.useContext(plasmicQuery.HeadMetadataContext) : undefined;\n  if (headMetadata) {\n    // If we have the Head metadata object specified, mutate it so to ensure it\n    // stores the data that should go in the <head>.\n    if (props.image) {\n      headMetadata.image = props.image;\n    }\n    if (props.title) {\n      headMetadata.title = props.title;\n    }\n    if (props.description) {\n      headMetadata.description = props.description;\n    }\n    if (props.canonical) {\n      headMetadata.canonical = props.canonical;\n    }\n  }\n  if (!Head) {\n    console.warn(\"Plasmic: Head meta tags are being ignored. To make them work, pass a Head component into PlasmicRootProvider.\");\n    // TODO: Link to doc about Head.\n    return null;\n  }\n  // Helmet does not support React.Fragments, so we need to use `[<meta />,\n  // <meta />]` instead of `<><meta /><meta /></>`.\n  return React.createElement(Head, null, props.image ? [React.createElement(\"meta\", {\n    key: \"twitter:card\",\n    name: \"twitter:card\",\n    content: \"summary_large_image\"\n  }), React.createElement(\"meta\", {\n    key: \"og:image\",\n    property: \"og:image\",\n    content: props.image\n  }), React.createElement(\"meta\", {\n    key: \"twitter:image\",\n    name: \"twitter:image\",\n    content: props.image\n  })] : React.createElement(\"meta\", {\n    key: \"twitter:card\",\n    name: \"twitter:card\",\n    content: \"summary\"\n  }), props.title && [React.createElement(\"title\", {\n    key: \"title\"\n  }, props.title), React.createElement(\"meta\", {\n    key: \"og:title\",\n    property: \"og:title\",\n    content: props.title\n  }), React.createElement(\"meta\", {\n    key: \"twitter:title\",\n    property: \"twitter:title\",\n    content: props.title\n  })], props.description && [React.createElement(\"meta\", {\n    key: \"description\",\n    name: \"description\",\n    content: props.description\n  }), React.createElement(\"meta\", {\n    key: \"og:description\",\n    property: \"og:description\",\n    content: props.description\n  }), React.createElement(\"meta\", {\n    key: \"twitter:description\",\n    name: \"twitter:description\",\n    content: props.description\n  })], props.canonical && React.createElement(\"link\", {\n    key: \"canonical\",\n    rel: \"canonical\",\n    href: props.canonical\n  }));\n}\nvar plasmicHeadMeta = {\n  name: \"hostless-plasmic-head\",\n  displayName: \"Page Metadata Override\",\n  description: \"Set page metadata (HTML <head />) to dynamic values.\",\n  importName: \"PlasmicHead\",\n  importPath: \"@plasmicapp/react-web\",\n  isRepeatable: false,\n  styleSections: false,\n  props: {\n    title: {\n      type: \"string\",\n      displayName: \"Title\"\n    },\n    description: {\n      type: \"string\",\n      displayName: \"Description\"\n    },\n    image: {\n      type: \"imageUrl\",\n      displayName: \"Image\"\n    },\n    canonical: {\n      type: \"string\",\n      displayName: \"Canonical URL\"\n    }\n  }\n};\nfunction PlasmicIcon(props) {\n  var PlasmicIconType = props.PlasmicIconType,\n    rest = __rest(props, [\"PlasmicIconType\"]);\n  return React.createElement(PlasmicIconType, __assign({}, rest));\n}\n\n/**\n * Responsive `<img/>` replacement, based on `next/image`\n */\nvar IMG_OPTIMIZER_HOST = \"https://img.plasmic.app\";\n// Default image sizes to snap to\n// TODO: make this configurable?\nvar IMG_SIZES = [16, 32, 48, 64, 96, 128, 256, 384];\nvar DEVICE_SIZES = [640, 750, 828, 1080, 1200, 1920, 2048, 3840];\nvar ALL_SIZES = __spreadArray(__spreadArray([], __read(IMG_SIZES), false), __read(DEVICE_SIZES), false);\nvar PlasmicImg = React__default.forwardRef(function PlasmicImg(props, outerRef) {\n  var src = props.src,\n    className = props.className,\n    displayWidth = props.displayWidth,\n    displayHeight = props.displayHeight,\n    displayMinWidth = props.displayMinWidth,\n    displayMinHeight = props.displayMinHeight,\n    displayMaxWidth = props.displayMaxWidth,\n    displayMaxHeight = props.displayMaxHeight,\n    quality = props.quality,\n    loader = props.loader,\n    imgRef = props.imgRef,\n    style = props.style,\n    loading = props.loading,\n    rest = __rest(props, [\"src\", \"className\", \"displayWidth\", \"displayHeight\", \"displayMinWidth\", \"displayMinHeight\", \"displayMaxWidth\", \"displayMaxHeight\", \"quality\", \"loader\", \"imgRef\", \"style\", \"loading\"]);\n  var imgProps = Object.assign({}, rest, {\n    // Default loading to \"lazy\" if not specified (which is different from the\n    // html img, which defaults to eager!)\n    loading: loading !== null && loading !== void 0 ? loading : \"lazy\"\n  });\n  var _a = !src ? {\n      fullWidth: undefined,\n      fullHeight: undefined,\n      aspectRatio: undefined\n    } : typeof src === \"string\" ? getImageSizeData(getPixelLength(props.width), getPixelLength(props.height)) : src,\n    fullWidth = _a.fullWidth,\n    fullHeight = _a.fullHeight,\n    aspectRatio = _a.aspectRatio;\n  var srcStr = src ? typeof src === \"string\" ? src : typeof src.src === \"string\" ? src.src : src.src.src : \"\";\n  // Assume external image if either dimension is null and use usual <img>\n  if (fullHeight == null || fullWidth == null) {\n    return React__default.createElement(\"img\", __assign({\n      src: srcStr,\n      className: className,\n      style: style\n    }, imgProps, {\n      loading: loading,\n      ref: mergeRefs(imgRef, outerRef)\n    }));\n  }\n  if (isSvg(srcStr) && (displayHeight == null || displayHeight === \"auto\") && (displayWidth == null || displayWidth === \"auto\")) {\n    displayWidth = \"100%\";\n  }\n  var computedDisplayWidth = displayWidth;\n  if (fullWidth && fullHeight && (!displayWidth || displayWidth === \"auto\") && !!getPixelLength(displayHeight)) {\n    // If there's a pixel length specified for displayHeight but not displayWidth,\n    // then we can derive the pixel length for displayWidth.  Having an explicit\n    // displayWidth makes this a fixed-size image, which makes it possible for us to\n    // generate better markup!\n    if (!isSvg(srcStr)) {\n      // We shouldn't do it for SVGs though, because `fullWidth` and\n      // `fullHeight` might have rounded values so the final\n      // `displayWidth` could differ by 1px or so.\n      computedDisplayWidth = getPixelLength(displayHeight) * fullWidth / fullHeight;\n    }\n  }\n  var spacerWidth = fullWidth;\n  var spacerHeight = fullHeight;\n  if (aspectRatio && isFinite(aspectRatio) && isSvg(srcStr)) {\n    // For SVGs, fullWidth and fullHeight can be rounded values, which would\n    // cause some discrepancy between the actual aspect ratio and the aspect\n    // ratio from those values. So, for those cases, we set large width / height\n    // values to get a more precise ratio from the spacer.\n    spacerWidth = DEFAULT_SVG_WIDTH;\n    spacerHeight = Math.round(spacerWidth / aspectRatio);\n  }\n  var _b = getWidths(computedDisplayWidth, fullWidth, {\n      minWidth: displayMinWidth\n    }),\n    sizes = _b.sizes,\n    widthDescs = _b.widthDescs;\n  var imageLoader = getImageLoader(loader);\n  var spacerSvg = \"<svg width=\\\"\".concat(spacerWidth, \"\\\" height=\\\"\").concat(spacerHeight, \"\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" version=\\\"1.1\\\"/>\");\n  var spacerSvgBase64 =\n  // if btoa exists, use btoa, as it works in browser and in\n  // cloudflare edge workers.  For node, use Buffer.from().\n  typeof globalThis.btoa === \"function\" ? globalThis.btoa(spacerSvg) : Buffer.from(spacerSvg).toString(\"base64\");\n  var wrapperStyle = __assign({}, style || {});\n  var spacerStyle = __assign({}, pick(style || {}, \"objectFit\", \"objectPosition\"));\n  if (displayWidth != null && displayWidth !== \"auto\") {\n    // If width is set, set it on the wrapper along with min/max width\n    // and just use `width: 100%` on the spacer\n    spacerStyle.width = \"100%\";\n    // Rely on the styles set by `classname` on the wrapper:\n    // wrapperStyle.width = displayWidth;\n    // wrapperStyle.minWidth = displayMinWidth;\n    // wrapperStyle.maxWidth = displayMaxWidth;\n  } else {\n    // Otherwise, we want auto sizing from the spacer, so set width there.\n    //\n    // But if we have min/max width, it should be set in the wrapper and it\n    // can be percentage values (and we add corresponding min/max width to\n    // 100% in the spacer). In general it ends up with the correct effect,\n    // but some edge cases might make `min-width: 100%` shrink the image more\n    // than it should.\n    spacerStyle.width = displayWidth;\n    wrapperStyle.width = \"auto\";\n    if (displayMinWidth) {\n      spacerStyle.minWidth = \"100%\";\n      // Rely on min-width set by `classname` on the wrapper:\n      // wrapperStyle.minWidth = displayMinWidth;\n    }\n    if (displayMaxWidth != null && displayMaxWidth !== \"none\") {\n      spacerStyle.maxWidth = \"100%\";\n      // Rely on max-width set by `classname` on the wrapper:\n      // wrapperStyle.maxWidth = displayMaxWidth;\n    }\n  }\n  if (displayHeight != null && displayHeight !== \"auto\") {\n    spacerStyle.height = \"100%\";\n    // wrapperStyle.height = displayHeight;\n    // wrapperStyle.minHeight = displayMinHeight;\n    // wrapperStyle.maxHeight = displayMaxHeight;\n  } else {\n    spacerStyle.height = displayHeight;\n    wrapperStyle.height = \"auto\";\n    if (displayMinHeight) {\n      spacerStyle.minHeight = \"100%\";\n      // wrapperStyle.minHeight = displayMinHeight;\n    }\n    if (displayMaxHeight != null && displayMaxHeight !== \"none\") {\n      spacerStyle.maxHeight = \"100%\";\n      // wrapperStyle.maxHeight = displayMaxHeight;\n    }\n  }\n  return React__default.createElement(\"div\", {\n    className: classNames$1(className, \"__wab_img-wrapper\"),\n    ref: outerRef,\n    style: wrapperStyle\n  }, React__default.createElement(\"img\", {\n    alt: \"\",\n    \"aria-hidden\": true,\n    className: \"__wab_img-spacer-svg\",\n    src: \"data:image/svg+xml;base64,\".concat(spacerSvgBase64),\n    style: spacerStyle\n  }), makePicture({\n    imageLoader: imageLoader,\n    widthDescs: widthDescs,\n    sizes: sizes,\n    src: srcStr,\n    quality: quality,\n    ref: imgRef,\n    style: style ? pick(style, \"objectFit\", \"objectPosition\") : undefined,\n    imgProps: imgProps,\n    className: \"__wab_img\"\n  }));\n});\nfunction makePicture(opts) {\n  // If imageLoader is undefined, then this renders to just a normal\n  // <img />.  Else it will render to a <picture> with a <source> for\n  // webp, and srcSet/sizes set according to width requirements.\n  var imageLoader = opts.imageLoader,\n    widthDescs = opts.widthDescs,\n    src = opts.src,\n    quality = opts.quality,\n    style = opts.style,\n    className = opts.className,\n    sizes = opts.sizes,\n    imgProps = opts.imgProps,\n    ref = opts.ref;\n  return React__default.createElement(\"picture\", {\n    className: \"__wab_picture\"\n  }, imageLoader && imageLoader.supportsUrl(src) && React__default.createElement(\"source\", {\n    type: \"image/webp\",\n    srcSet: widthDescs.map(function (wd) {\n      return \"\".concat(imageLoader.transformUrl({\n        src: src,\n        quality: quality,\n        width: wd.width,\n        format: \"webp\"\n      }), \" \").concat(wd.desc);\n    }).join(\", \")\n  }), React__default.createElement(\"img\", __assign({}, imgProps, {\n    ref: ref,\n    className: className,\n    decoding: \"async\",\n    src: imageLoader && imageLoader.supportsUrl(src) ? imageLoader.transformUrl({\n      src: src,\n      quality: quality,\n      width: widthDescs[widthDescs.length - 1].width\n    }) : src,\n    srcSet: imageLoader && imageLoader.supportsUrl(src) ? widthDescs.map(function (wd) {\n      return \"\".concat(imageLoader.transformUrl({\n        src: src,\n        quality: quality,\n        width: wd.width\n      }), \" \").concat(wd.desc);\n    }).join(\", \") : undefined,\n    sizes: imageLoader && imageLoader.supportsUrl(src) ? sizes : undefined,\n    style: __assign(__assign({}, style ? pick(style, \"objectFit\", \"objectPosition\") : {}), {\n      width: 0,\n      height: 0\n    })\n  })));\n}\nvar DEFAULT_SVG_WIDTH = 10000;\nfunction isSvg(src) {\n  return src.endsWith(\".svg\") || src.startsWith(\"data:image/svg\");\n}\nfunction getClosestPresetSize(width, fullWidth) {\n  var _a;\n  var nextBiggerIndex = (_a = ALL_SIZES.findIndex(function (w) {\n    return w >= width;\n  })) !== null && _a !== void 0 ? _a : ALL_SIZES.length - 1;\n  var nextBigger = ALL_SIZES[nextBiggerIndex];\n  if (nextBigger >= fullWidth) {\n    // If the requested width is larger than the fullWidth,\n    // we just use the original width instead. It's impossible\n    // to make an image bigger than fullWidth!\n    return undefined;\n  } else if (nextBiggerIndex + 1 < ALL_SIZES.length && fullWidth <= ALL_SIZES[nextBiggerIndex + 1]) {\n    // If the fullWidth is just between nextBigger and the one after that,\n    // then also might as well just use the original size (so, width is 30,\n    // nextBigger is 32, then we just use the original as long as fullWidth is\n    // less than 48)\n    return undefined;\n  }\n  return nextBigger;\n}\n/**\n * Computes the appropriate srcSet and sizes to use\n */\nfunction getWidths(width, fullWidth, extra) {\n  var minWidth = extra === null || extra === void 0 ? void 0 : extra.minWidth;\n  var pixelWidth = getPixelLength(width);\n  var pixelMinWidth = getPixelLength(minWidth);\n  if (pixelWidth != null && (!minWidth || pixelMinWidth != null)) {\n    // If there's an exact width, then we just need to display it at 1x and 2x density\n    return {\n      widthDescs: [{\n        width: getClosestPresetSize(Math.max(pixelWidth, pixelMinWidth !== null && pixelMinWidth !== void 0 ? pixelMinWidth : 0), fullWidth),\n        desc: \"1x\"\n      }, {\n        width: getClosestPresetSize(Math.max(pixelWidth, pixelMinWidth !== null && pixelMinWidth !== void 0 ? pixelMinWidth : 0) * 2, fullWidth),\n        desc: \"2x\"\n      }],\n      sizes: undefined\n    };\n  }\n  // Otherwise we don't know what sizes we'll end up, so we just cap it at\n  // device width.  TODO: do better!\n  var usefulSizes = DEVICE_SIZES.filter(function (size) {\n    return !fullWidth || size < fullWidth;\n  });\n  if (!!fullWidth && usefulSizes.length === 0) {\n    // image fullWidth is smaller than all device sizes.  So all we can do\n    // is offer 1x\n    return {\n      widthDescs: [{\n        width: getClosestPresetSize(fullWidth, fullWidth),\n        desc: \"1x\"\n      }],\n      sizes: undefined\n    };\n  }\n  return {\n    widthDescs: usefulSizes.map(function (size) {\n      return {\n        width: getClosestPresetSize(size, fullWidth),\n        // If this is the last (buggest) useful width, but it is\n        // still within the bounds set by DEVICE_SIZES, then just\n        // use the original, unresized image.  This means if we match\n        // the largest size, we use unresized and best quality image.\n        // We only do this, though, if fullWidth is \"reasonable\" --\n        // smaller than the largest size we would consider.\n        // i === usefulSizes.length - 1 &&\n        // fullWidth < DEVICE_SIZES[DEVICE_SIZES.length - 1]\n        //   ? undefined\n        //   : size,\n        desc: \"\".concat(size, \"w\")\n      };\n    }),\n    sizes: \"100vw\"\n  };\n}\nfunction getPixelLength(length) {\n  if (length == null || length == \"\") {\n    return undefined;\n  }\n  if (typeof length === \"number\") {\n    return length;\n  }\n  var parsed = parseNumeric(length);\n  if (parsed && (!parsed.units || parsed.units === \"px\")) {\n    return parsed.num;\n  }\n  return undefined;\n}\nfunction parseNumeric(val) {\n  // Parse strings like \"30\", \"30px\", \"30%\", \"30px /* blah blah */\"\n  var res = val.match(/^\\s*(-?(?:\\d+\\.\\d*|\\d*\\.\\d+|\\d+))\\s*([a-z]*|%)\\s*(?:\\/\\*.*)?$/i);\n  if (res == null) {\n    return undefined;\n  }\n  var num = res[1];\n  var units = res[2];\n  return {\n    num: +num,\n    units: units\n  };\n}\nfunction getImageSizeData(width, height) {\n  var aspectRatio = width && height ? width / height : undefined;\n  return {\n    fullWidth: width,\n    fullHeight: height,\n    aspectRatio: aspectRatio && isFinite(aspectRatio) ? aspectRatio : undefined\n  };\n}\nfunction getImageLoader(loader) {\n  if (loader == null) {\n    return undefined;\n  } else if (loader === \"plasmic\") {\n    return PLASMIC_IMAGE_LOADER;\n  } else {\n    return loader;\n  }\n}\nfunction isInternalKey(src) {\n  return /^([a-f0-9]{32})\\..{1,16}$/i.test(src);\n}\nvar PLASMIC_IMAGE_LOADER = {\n  supportsUrl: function (src) {\n    return (src.startsWith(\"http\") || isInternalKey(src)) && !isSvg(src);\n  },\n  transformUrl: function (opts) {\n    var _a;\n    var params = [\"src=\".concat(encodeURIComponent(opts.src)), opts.width ? \"w=\".concat(opts.width) : undefined, \"q=\".concat((_a = opts.quality) !== null && _a !== void 0 ? _a : 75), opts.format ? \"f=\".concat(opts.format) : undefined].filter(function (x) {\n      return !!x;\n    });\n    return \"\".concat(IMG_OPTIMIZER_HOST, \"/img-optimizer/v1/img?\").concat(params.join(\"&\"));\n  }\n};\nvar PlasmicLink = React__default.forwardRef(function PlasmicLink(props, ref) {\n  var _a;\n  // The usePlasmicLinkMaybe function may be undefined, if host is not up-to-date\n  var Link = (_a = usePlasmicLinkMaybe === null || usePlasmicLinkMaybe === void 0 ? void 0 : usePlasmicLinkMaybe()) !== null && _a !== void 0 ? _a : PlasmicLinkInternal;\n  if (Link === PlasmicLink || Link === PlasmicLinkInternal) {\n    // Just in case, break the cycle\n    return React__default.createElement(PlasmicLinkInternal, __assign({}, props, {\n      ref: ref\n    }));\n  } else {\n    // Don't pass component/platform props to non-PlasmicLinkInternal\n    return React__default.createElement(Link, __assign({}, omit(props, \"component\", \"platform\"), {\n      ref: ref\n    }));\n  }\n});\nvar PlasmicLinkInternal = React__default.forwardRef(function PlasmicLinkInternal(props, ref) {\n  var _a;\n  // props.href is required for nextjs; if no props.href,\n  // then we just render the default anchor element\n  if (props.platform === \"nextjs\" && props.href) {\n    var nextjsProps = [\"href\", \"replace\", \"scroll\", \"shallow\", \"passHref\", \"prefetch\", \"locale\"];\n    // If this is a fragment identifier link, then we set\n    // scroll={false} so that smooth scrolling works\n    var isFragment = (_a = props.href) === null || _a === void 0 ? void 0 : _a.startsWith(\"#\");\n    return React__default.createElement(props.component, __assign(__assign({\n      scroll: !isFragment\n    }, pick.apply(void 0, __spreadArray([props], __read(nextjsProps), false))), {\n      legacyBehavior: true\n    }), React__default.createElement(\"a\", __assign({}, omit.apply(void 0, __spreadArray([props, \"component\", \"platform\"], __read(nextjsProps), false)), {\n      ref: ref\n    })));\n  }\n  if (props.platform === \"gatsby\" && isInternalHref(props.href)) {\n    return React__default.createElement(props.component, __assign(__assign({}, omit(props, \"component\", \"platform\", \"href\")), {\n      to: props.href,\n      ref: ref\n    }));\n  }\n  return React__default.createElement(\"a\", __assign({}, omit(props, \"component\", \"platform\"), {\n    ref: ref\n  }));\n});\nfunction isInternalHref(href) {\n  return /^\\/(?!\\/)/.test(href);\n}\n\n// Make the refactor to host backwards compatible for loader\nvar PlasmicTranslatorContext = PlasmicTranslatorContext$1 !== null && PlasmicTranslatorContext$1 !== void 0 ? PlasmicTranslatorContext$1 : React__default.createContext(undefined);\nvar usePlasmicTranslator = usePlasmicTranslator$1 !== null && usePlasmicTranslator$1 !== void 0 ? usePlasmicTranslator$1 : function () {\n  var _t = React__default.useContext(PlasmicTranslatorContext);\n  var translator = _t ? typeof _t === \"function\" ? _t : _t.translator : undefined;\n  return translator;\n};\nfunction genTranslatableString(elt, opts) {\n  var components = {};\n  var componentsCount = 0;\n  var getText = function (node) {\n    var _a;\n    if (!node) {\n      return \"\";\n    }\n    if (typeof node === \"number\" || typeof node === \"boolean\" || typeof node === \"string\") {\n      return node.toString();\n    }\n    if (typeof node !== \"object\") {\n      return \"\";\n    }\n    if (Array.isArray(node) || isIterable(node)) {\n      return Array.from(node).map(function (child) {\n        return getText(child);\n      }).filter(function (child) {\n        return !!child;\n      }).join(\"\");\n    }\n    var nodeChildren = hasKey(node, \"props\") && hasKey(node.props, \"children\") && node.props.children || hasKey(node, \"children\") && node.children || [];\n    var contents = \"\".concat(React__default.Children.toArray(nodeChildren).map(function (child) {\n      return getText(child);\n    }).filter(function (child) {\n      return !!child;\n    }).join(\"\"));\n    if (React__default.isValidElement(node) && node.type === React__default.Fragment) {\n      return contents;\n    }\n    var prefix = (_a = opts === null || opts === void 0 ? void 0 : opts.tagPrefix) !== null && _a !== void 0 ? _a : \"\";\n    var componentId = \"\".concat(prefix).concat(componentsCount + 1);\n    componentsCount++;\n    components[componentId] = React__default.isValidElement(node) ? React__default.cloneElement(node, {\n      key: componentId,\n      children: undefined\n    }) : node;\n    return \"<\".concat(componentId, \">\").concat(contents, \"</\").concat(componentId, \">\");\n  };\n  var str = getText(elt);\n  return {\n    str: str,\n    components: components,\n    componentsCount: componentsCount\n  };\n}\nfunction Trans(_a) {\n  var transKey = _a.transKey,\n    children = _a.children;\n  var _t = React__default.useContext(PlasmicTranslatorContext);\n  var translator = _t ? typeof _t === \"function\" ? _t : _t.translator : undefined;\n  if (!translator) {\n    warnNoTranslationFunctionAtMostOnce();\n    return children;\n  }\n  var _b = genTranslatableString(children, {\n      tagPrefix: typeof _t === \"object\" ? _t.tagPrefix : undefined\n    }),\n    str = _b.str,\n    components = _b.components,\n    componentsCount = _b.componentsCount;\n  return translator(transKey !== null && transKey !== void 0 ? transKey : str, componentsCount > 0 ? {\n    components: components\n  } : undefined);\n}\nvar hasWarned = false;\nfunction warnNoTranslationFunctionAtMostOnce() {\n  if (!hasWarned) {\n    console.warn(\"Using Plasmic Translation but no translation function has been provided\");\n    hasWarned = true;\n  }\n}\nfunction hasKey(v, key) {\n  return typeof v === \"object\" && v !== null && key in v;\n}\nfunction isIterable(val) {\n  return val != null && typeof val[Symbol.iterator] === \"function\";\n}\nfunction PlasmicSlot(props) {\n  return renderPlasmicSlot(props);\n}\nfunction renderPlasmicSlot(opts) {\n  var as = opts.as,\n    defaultContents = opts.defaultContents,\n    value = opts.value,\n    rest = __rest(opts, [\"as\", \"defaultContents\", \"value\"]);\n  var content = value === undefined ? defaultContents : value;\n  if (typeof content !== \"number\" && (!content || Array.isArray(content) && content.length === 0)) {\n    return null;\n  }\n  // If the content is a raw string, then we need to wrap the raw string\n  // into an element, in case the slot is inside a flex-gap\n  // container (you cannot apply margin to just a text node).\n  var maybeString = maybeAsString(content);\n  if (maybeString) {\n    content = React.createElement(\"span\", {\n      className: \"__wab_slot-string-wrapper \\u03C1sw\"\n    }, maybeString);\n  }\n  var nonEmptyProps = Object.keys(rest).filter(function (p) {\n    return !!rest[p];\n  });\n  if (nonEmptyProps.length === 0) {\n    // No attrs to apply to the slot (which means the slot is unstyled), then\n    // just render the content directly; no need for style wrapper.\n    return content;\n  }\n  return React.createElement(as || \"span\", mergeProps({\n    className: \"__wab_slot ρs\"\n  }, rest), content);\n}\nfunction maybeAsString(node) {\n  // Unwrap fragments\n  if (React.isValidElement(node)) {\n    // Fragment doesn't render DOM elements\n    if (node.type === React.Fragment) {\n      return maybeAsString(node.props.children);\n    } else if (node.type === Trans) {\n      // Trans also doesn't render DOM elements. But we don't want to just render\n      // its content string, because we want to keep the <Trans/> for the localization.\n      // So we render the same node, to be wrapped into __wab_slot-string-wrapper.\n      return node;\n    }\n  }\n  if (typeof node === \"string\") {\n    return node;\n  }\n  if (typeof node === \"number\") {\n    return \"\".concat(node);\n  }\n  if (Array.isArray(node) && node.length === 1 && typeof node[0] === \"string\") {\n    return node[0];\n  }\n  return undefined;\n}\nvar listeners = [];\nvar queries = {};\nfunction matchScreenVariants() {\n  if (!isBrowser) {\n    return [];\n  }\n  return Object.entries(queries).filter(function (_a) {\n    var _b = __read(_a, 2),\n      query = _b[1];\n    return window.matchMedia(query).matches;\n  }).map(function (_a) {\n    var _b = __read(_a, 1),\n      name = _b[0];\n    return name;\n  });\n}\n// undefined if screen variants have never been calculated\nvar curScreenVariants = undefined;\nfunction recalculateScreenVariants() {\n  var screenVariant = matchScreenVariants();\n  if (!curScreenVariants || screenVariant.join(\"\") !== curScreenVariants.join(\"\")) {\n    curScreenVariants = screenVariant;\n    ReactDOM__default.unstable_batchedUpdates(function () {\n      return listeners.forEach(function (listener) {\n        return listener();\n      });\n    });\n  }\n}\nfunction ensureInitCurScreenVariants() {\n  // Initializes curScreenVariants if it hadn't been before. Note that this must\n  // be called from within an effect.\n  if (curScreenVariants === undefined) {\n    curScreenVariants = matchScreenVariants();\n  }\n}\nif (isBrowser) {\n  window.addEventListener(\"resize\", recalculateScreenVariants);\n}\nfunction createUseScreenVariants(isMulti, screenQueries) {\n  Object.assign(queries, screenQueries);\n  curScreenVariants = undefined;\n  return function () {\n    // It is important that upon first render, we return [] or undefined, because\n    // that is what SSR will use, and the client must match.  In an effect (which\n    // only happens on the client), we then actually ask for the real screen variant\n    // and, if different from [] or undefined, forces a re-render.\n    var _a = __read(React.useState(), 2),\n      updateState = _a[1];\n    var lastScreenVariantsRef = React.useRef(curScreenVariants || []);\n    // We do useLayoutEffect instead of useEffect to immediately\n    // register our forceUpdate. This ensures that if there was\n    // a window resize event between render and effects, that the\n    // listener will be registered in time\n    useIsomorphicLayoutEffect$1(function () {\n      var updateIfChanged = function () {\n        if (curScreenVariants && lastScreenVariantsRef.current.join(\"\") !== curScreenVariants.join(\"\")) {\n          lastScreenVariantsRef.current = curScreenVariants;\n          // Force update\n          updateState({});\n        }\n      };\n      // Listeners are invoked whenever the window is resized\n      listeners.push(updateIfChanged);\n      // Initialize the curScreenVariants for the first time.  We don't need\n      // to invoke the listeners here because all components will already\n      // have this effect running and will re-render if the real screen\n      // variant is non-empty.\n      ensureInitCurScreenVariants();\n      // Now, if the curScreenVariants differs from what we returned last,\n      // then force a re-render.\n      updateIfChanged();\n      return function () {\n        // Remove our listener on unmount\n        listeners.splice(listeners.indexOf(updateIfChanged), 1);\n      };\n    }, []);\n    if (isMulti) {\n      return curScreenVariants || [];\n    } else if (curScreenVariants) {\n      return curScreenVariants[curScreenVariants.length - 1];\n    } else {\n      return undefined;\n    }\n  };\n}\nvar PlasmicRootContext = React.createContext(undefined);\nfunction PlasmicRootProvider(props) {\n  var _a, _b;\n  var platform = props.platform,\n    children = props.children,\n    userAuthToken = props.userAuthToken,\n    isUserLoading = props.isUserLoading,\n    authRedirectUri = props.authRedirectUri,\n    user = props.user,\n    disableLoadingBoundary = props.disableLoadingBoundary,\n    suspenseFallback = props.suspenseFallback;\n  var context = React.useMemo(function () {\n    return {\n      platform: platform\n    };\n  }, [platform]);\n  var dataSourceContextValue = React.useMemo(function () {\n    return {\n      userAuthToken: userAuthToken,\n      user: user,\n      isUserLoading: isUserLoading,\n      authRedirectUri: authRedirectUri\n    };\n  }, [userAuthToken, isUserLoading, user, authRedirectUri]);\n  var reactMajorVersion = +React.version.split(\".\")[0];\n  return React.createElement(MaybeWrap, {\n    cond: !disableLoadingBoundary && reactMajorVersion >= 18,\n    wrapper: function (children_) {\n      return React.createElement(DataProvider, {\n        name: \"plasmicInternalEnableLoadingBoundary\",\n        hidden: true,\n        data: true\n      }, React.createElement(React.Suspense, {\n        fallback: suspenseFallback !== null && suspenseFallback !== void 0 ? suspenseFallback : \"Loading...\"\n      }, children_));\n    }\n  }, React.createElement(PlasmicRootContext.Provider, {\n    value: context\n  }, React.createElement(MaybeWrap, {\n    cond: reactMajorVersion < 18,\n    wrapper: function (children_) {\n      return React.createElement(SSRProvider, null, children_);\n    }\n  }, React.createElement(PlasmicDataSourceContextProvider, {\n    value: dataSourceContextValue\n  }, React.createElement(PlasmicTranslatorContext.Provider, {\n    value: (_a = props.i18n) !== null && _a !== void 0 ? _a : props.translator\n  }, React.createElement(PlasmicHeadContext.Provider, {\n    value: props.Head\n  }, React.createElement(SafePlasmicLinkProvider, {\n    Link: (_b = props.Link) !== null && _b !== void 0 ? _b : PlasmicLinkInternal\n  }, children)))))));\n}\n/**\n * A PlasmicLinkProvider that anticipates PlasmicLinkProvider may not exist yet from\n * @plasmicapp/host if the user is using an older version\n */\nfunction SafePlasmicLinkProvider(props) {\n  if (PlasmicLinkProvider) {\n    return React.createElement(PlasmicLinkProvider, __assign({}, props));\n  } else {\n    return React.createElement(React.Fragment, null, props.children);\n  }\n}\nvar useIsSSR = useIsSSR$1;\nfunction useHasPlasmicRoot() {\n  return !!React.useContext(PlasmicRootContext);\n}\nvar hasWarnedSSR = false;\n/**\n * Warns the user if PlasmicRootProvider is not used\n */\nfunction useEnsureSSRProvider() {\n  var hasRoot = useHasPlasmicRoot();\n  if (hasRoot || hasWarnedSSR || process.env.NODE_ENV !== \"development\") {\n    return;\n  }\n  hasWarnedSSR = true;\n  console.warn(\"Plasmic: To ensure your components work correctly with server-side rendering, please use PlasmicRootProvider at the root of your application.  See https://docs.plasmic.app/learn/ssr\");\n}\nfunction MaybeWrap(props) {\n  return props.cond ? props.wrapper(props.children) : props.children;\n}\nfunction useFocused(opts) {\n  var _a = useFocusRing({\n      within: false,\n      isTextInput: opts.isTextInput\n    }),\n    isFocused = _a.isFocused,\n    focusProps = _a.focusProps;\n  return [isFocused, focusProps];\n}\nfunction useFocusVisible(opts) {\n  var _a = useFocusRing({\n      within: false,\n      isTextInput: opts.isTextInput\n    }),\n    isFocusVisible = _a.isFocusVisible,\n    focusProps = _a.focusProps;\n  return [isFocusVisible, focusProps];\n}\nfunction useFocusedWithin(opts) {\n  var _a = useFocusRing({\n      within: true,\n      isTextInput: opts.isTextInput\n    }),\n    isFocused = _a.isFocused,\n    focusProps = _a.focusProps;\n  return [isFocused, focusProps];\n}\nfunction useFocusVisibleWithin(opts) {\n  var _a = useFocusRing({\n      within: true,\n      isTextInput: opts.isTextInput\n    }),\n    isFocusVisible = _a.isFocusVisible,\n    focusProps = _a.focusProps;\n  return [isFocusVisible, focusProps];\n}\nfunction useHover() {\n  var _a = __read(React.useState(false), 2),\n    isHover = _a[0],\n    setHover = _a[1];\n  return [isHover, {\n    onMouseEnter: function () {\n      return setHover(true);\n    },\n    onMouseLeave: function () {\n      return setHover(false);\n    }\n  }];\n}\nfunction usePressed() {\n  var _a = __read(React.useState(false), 2),\n    isPressed = _a[0],\n    setPressed = _a[1];\n  return [isPressed, {\n    onMouseDown: function () {\n      return setPressed(true);\n    },\n    onMouseUp: function () {\n      return setPressed(false);\n    }\n  }];\n}\nvar TRIGGER_TO_HOOK = {\n  useHover: useHover,\n  useFocused: useFocused,\n  useFocusVisible: useFocusVisible,\n  useFocusedWithin: useFocusedWithin,\n  useFocusVisibleWithin: useFocusVisibleWithin,\n  usePressed: usePressed\n};\n/**\n * Installs argment trigger. All the useTrigger calls must use hardcoded `trigger` arg,\n * as it's not valid to install variable React hooks!\n */\nfunction useTrigger(trigger, opts) {\n  return TRIGGER_TO_HOOK[trigger](opts);\n}\nvar ARRAY_SYMBOL = Symbol(\"[]\");\nvar PLASMIC_STATE_PROXY_SYMBOL = Symbol(\"plasmic.state.proxy\");\nvar UNINITIALIZED = Symbol(\"plasmic.unitialized\");\n\n/** @class */\n(function (_super) {\n  __extends(CustomError, _super);\n  function CustomError(msg) {\n    var _a;\n    var _this = _super.call(this, msg) || this;\n    _this.name = _this.constructor.name;\n    _a = _this, _this.message = _a.message, _this.stack = _a.stack;\n    return _this;\n  }\n  return CustomError;\n})(Error);\nvar CyclicStatesReferencesError = /** @class */function (_super) {\n  __extends(CyclicStatesReferencesError, _super);\n  function CyclicStatesReferencesError(stateAccessCycle) {\n    return _super.call(this, \"Cyclic reference found in state initialization: \" + stateAccessCycle.join(\" -> \")) || this;\n  }\n  return CyclicStatesReferencesError;\n}(Error);\nvar InvalidOperation = /** @class */function (_super) {\n  __extends(InvalidOperation, _super);\n  function InvalidOperation(msg) {\n    return _super.call(this, msg) || this;\n  }\n  return InvalidOperation;\n}(Error);\nvar UnknownError = /** @class */function (_super) {\n  __extends(UnknownError, _super);\n  function UnknownError(msg) {\n    return _super.call(this, msg) || this;\n  }\n  return UnknownError;\n}(Error);\nvar StateSpecNode = /** @class */function () {\n  function StateSpecNode(specs) {\n    this._specs = specs;\n    this._edges = new Map();\n  }\n  StateSpecNode.prototype.setSpecs = function (specs) {\n    this._specs = specs;\n  };\n  StateSpecNode.prototype.edges = function () {\n    return this._edges;\n  };\n  StateSpecNode.prototype.hasEdge = function (key) {\n    return this._edges.has(key);\n  };\n  StateSpecNode.prototype.addEdge = function (key, node) {\n    this._edges.set(key, node);\n  };\n  StateSpecNode.prototype.clearEdges = function () {\n    this._edges = new Map();\n  };\n  StateSpecNode.prototype.children = function () {\n    return this._edges.values();\n  };\n  StateSpecNode.prototype.makeTransition = function (key) {\n    key = isNum(key) ? ARRAY_SYMBOL : key;\n    return this._edges.get(key);\n  };\n  StateSpecNode.prototype.isLeaf = function () {\n    return this._edges.size === 0 && this.getAllSpecs().length > 0;\n  };\n  StateSpecNode.prototype.hasArrayTransition = function () {\n    return this._edges.has(ARRAY_SYMBOL);\n  };\n  StateSpecNode.prototype.getSpec = function () {\n    return this._specs[0];\n  };\n  StateSpecNode.prototype.getAllSpecs = function () {\n    return this._specs;\n  };\n  return StateSpecNode;\n}();\nvar transformPathStringToObj = function (str) {\n  var splitStatePathPart = function (state) {\n    return state.endsWith(\"[]\") ? __spreadArray(__spreadArray([], __read(splitStatePathPart(state.slice(0, -2))), false), [ARRAY_SYMBOL], false) : [state];\n  };\n  return str.split(\".\").flatMap(splitStatePathPart);\n};\nfunction buildTree(specs) {\n  var internalSpec = specs.map(function (spec) {\n    return __assign(__assign({}, spec), {\n      pathObj: transformPathStringToObj(spec.path),\n      isRepeated: spec.path.split(\".\").some(function (part) {\n        return part.endsWith(\"[]\");\n      })\n    });\n  });\n  var rec = function (currentPath) {\n    var node = new StateSpecNode(internalSpec.filter(function (spec) {\n      return shallowEqual(currentPath, spec.pathObj.slice(0, currentPath.length));\n    }));\n    node.getAllSpecs().forEach(function (spec) {\n      if (spec.pathObj.length > currentPath.length) {\n        var nextKey = spec.pathObj[currentPath.length];\n        if (!node.hasEdge(nextKey)) {\n          node.addEdge(nextKey, rec(__spreadArray(__spreadArray([], __read(currentPath), false), [nextKey], false)));\n        }\n      }\n    });\n    return node;\n  };\n  return rec([]);\n}\nfunction updateTree(root, specs) {\n  var internalSpec = specs.map(function (spec) {\n    return __assign(__assign({}, spec), {\n      pathObj: transformPathStringToObj(spec.path),\n      isRepeated: spec.path.split(\".\").some(function (part) {\n        return part.endsWith(\"[]\");\n      })\n    });\n  });\n  var rec = function (oldNode, currentPath) {\n    var nodeSpecs = internalSpec.filter(function (spec) {\n      return shallowEqual(currentPath, spec.pathObj.slice(0, currentPath.length));\n    });\n    var node = oldNode !== null && oldNode !== void 0 ? oldNode : new StateSpecNode(nodeSpecs);\n    node.setSpecs(nodeSpecs);\n    var oldEdges = oldNode === null || oldNode === void 0 ? void 0 : oldNode.edges();\n    node.clearEdges();\n    node.getAllSpecs().forEach(function (spec) {\n      if (spec.pathObj.length > currentPath.length) {\n        var nextKey = spec.pathObj[currentPath.length];\n        if (!node.hasEdge(nextKey)) {\n          node.addEdge(nextKey, rec(oldEdges === null || oldEdges === void 0 ? void 0 : oldEdges.get(nextKey), __spreadArray(__spreadArray([], __read(currentPath), false), [nextKey], false)));\n        }\n      }\n    });\n    return node;\n  };\n  return rec(root, []);\n}\nfunction getSpecTreeLeaves(root) {\n  var leaves = [];\n  var rec = function (node) {\n    var e_1, _a;\n    try {\n      for (var _b = __values(node.children()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var child = _c.value;\n        rec(child);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    if (node.isLeaf() && node.getAllSpecs().length > 0) {\n      leaves.push(node);\n    }\n  };\n  rec(root);\n  return leaves;\n}\nfunction findStateCell(root, pathStr, repetitionIndex) {\n  var e_2, _a;\n  var realPath = [];\n  var pathObj = transformPathStringToObj(pathStr);\n  var currRepIndex = 0;\n  try {\n    for (var pathObj_1 = __values(pathObj), pathObj_1_1 = pathObj_1.next(); !pathObj_1_1.done; pathObj_1_1 = pathObj_1.next()) {\n      var part = pathObj_1_1.value;\n      if (typeof part === \"symbol\") {\n        if (!root.hasArrayTransition() || !repetitionIndex || currRepIndex > repetitionIndex.length) {\n          throw new Error(\"transition not found: pathStr \".concat(pathStr, \" part \").concat(typeof part === \"symbol\" ? \"[]\" : part));\n        }\n        realPath.push(repetitionIndex[currRepIndex++]);\n        root = root.makeTransition(ARRAY_SYMBOL);\n      } else {\n        if (!root.hasEdge(part)) {\n          throw new Error(\"transition not found: pathStr \".concat(pathStr, \" part \").concat(typeof part === \"symbol\" ? \"[]\" : part));\n        }\n        realPath.push(part);\n        root = root.makeTransition(part);\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (pathObj_1_1 && !pathObj_1_1.done && (_a = pathObj_1.return)) _a.call(pathObj_1);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n  return {\n    node: root,\n    realPath: realPath\n  };\n}\nvar defer = setTimeout;\nfunction isNum$1(value) {\n  return typeof value === \"symbol\" ? false : !isNaN(+value);\n}\nfunction canProxy(value) {\n  return typeof value === \"object\" && value != null;\n}\nvar proxyObjToStateCell = new WeakMap();\nvar valtioSubscriptions = new WeakMap();\nfunction ensureStateCell(target, property, path, node) {\n  var _a;\n  if (!proxyObjToStateCell.has(target)) {\n    proxyObjToStateCell.set(target, {});\n  }\n  var stateCell = proxyObjToStateCell.get(target);\n  if (!(property in stateCell)) {\n    stateCell[property] = {\n      listeners: [],\n      initialValue: UNINITIALIZED,\n      path: path,\n      node: node,\n      initFunc: node.getSpec().initFunc,\n      initFuncHash: (_a = node.getSpec().initFuncHash) !== null && _a !== void 0 ? _a : \"\"\n    };\n  }\n  return stateCell[property];\n}\nfunction getStateCell(target, property) {\n  var _a;\n  return (_a = proxyObjToStateCell.get(target)) === null || _a === void 0 ? void 0 : _a[property];\n}\nfunction tryGetStateCellFrom$StateRoot($state, path) {\n  if (path.length === 0) {\n    throw new UnknownError(\"expected a path with length greater than 0\");\n  }\n  var target = get($state, path.slice(0, -1));\n  get(target, path.slice(-1)); // create state cell;\n  return getStateCell(target, path.slice(-1)[0]);\n}\nfunction getStateCellFrom$StateRoot($state, path) {\n  return ensure(tryGetStateCellFrom$StateRoot($state, path));\n}\nfunction unsubscribeToValtio($$state, statePath) {\n  var _a;\n  var oldValue = get($$state.stateValues, statePath);\n  if (getVersion(oldValue)) {\n    (_a = valtioSubscriptions.get(oldValue)) === null || _a === void 0 ? void 0 : _a.forEach(function (f) {\n      return f();\n    });\n    valtioSubscriptions.delete(oldValue);\n  }\n}\nfunction subscribeToValtio($$state, statePath, node) {\n  var spec = node.getSpec();\n  var maybeValtioProxy = spec.valueProp ? $$state.env.$props[spec.valueProp] : get($$state.stateValues, statePath);\n  if (getVersion(maybeValtioProxy) && (spec.onChangeProp || spec.onMutate && node.isLeaf())) {\n    var unsub = subscribe(maybeValtioProxy, function () {\n      var _a, _b;\n      if (spec.onMutate && node.isLeaf()) {\n        spec.onMutate(maybeValtioProxy, spec.refName ? $$state.env.$refs[spec.refName] : undefined);\n      }\n      (_b = (_a = $$state.env.$props)[spec.onChangeProp]) === null || _b === void 0 ? void 0 : _b.call(_a, spec.valueProp ? $$state.env.$props[spec.valueProp] : get($$state.stateValues, statePath));\n    });\n    if (!valtioSubscriptions.has(maybeValtioProxy)) {\n      valtioSubscriptions.set(maybeValtioProxy, []);\n    }\n    ensure(valtioSubscriptions.get(maybeValtioProxy)).push(unsub);\n  }\n}\nfunction initializeStateValue($$state, initialStateCell, proxyRoot) {\n  var _a;\n  var initialStateName = initialStateCell.node.getSpec().path;\n  var stateAccess = new Set();\n  $$state.stateInitializationEnv.visited.add(initialStateName);\n  $$state.stateInitializationEnv.stack.push(initialStateName);\n  var $state = create$StateProxy($$state, function (internalStateCell) {\n    return {\n      get: function () {\n        var spec = internalStateCell.node.getSpec();\n        if ($$state.stateInitializationEnv.visited.has(spec.path)) {\n          // cyclic reference found\n          var stateAccessCycle = [spec.path];\n          while ($$state.stateInitializationEnv.stack.length > 0) {\n            var curr = $$state.stateInitializationEnv.stack.pop();\n            if (!curr) {\n              break;\n            }\n            stateAccessCycle.push(curr);\n            if (curr === spec.path) {\n              throw new CyclicStatesReferencesError(stateAccessCycle);\n            }\n          }\n          throw new UnknownError(\"Internal error: cycle not found\");\n        }\n        var stateCell = getStateCellFrom$StateRoot(proxyRoot, internalStateCell.path);\n        stateAccess.add({\n          stateCell: stateCell\n        });\n        if (spec.valueProp) {\n          return $$state.env.$props[spec.valueProp];\n        } else if (spec.initFunc && stateCell.initialValue === UNINITIALIZED) {\n          return initializeStateValue($$state, stateCell, proxyRoot);\n        }\n        return get(proxyRoot, stateCell.path);\n      },\n      set: function () {\n        throw new InvalidOperation(\"Cannot update state values during initialization\");\n      }\n    };\n  });\n  stateAccess.forEach(function (_a) {\n    var stateCell = _a.stateCell;\n    stateCell.listeners.push(function () {\n      var _a;\n      var newValue = invokeInitFuncBackwardsCompatible(initialStateCell.node.getSpec().initFunc, __assign({\n        $state: $state\n      }, (_a = initialStateCell.overrideEnv) !== null && _a !== void 0 ? _a : $$state.env));\n      set(proxyRoot, initialStateCell.path, newValue);\n    });\n  });\n  var initialValue = invokeInitFuncBackwardsCompatible(initialStateCell.initFunc, __assign({\n    $state: $state\n  }, (_a = initialStateCell.overrideEnv) !== null && _a !== void 0 ? _a : $$state.env));\n  var initialSpec = initialStateCell.node.getSpec();\n  // Try to clone initialValue. It can fail if it's a PlasmicUndefinedDataProxy\n  // and we still want to clear some states and return the initialValue.\n  try {\n    var clonedValue = clone(initialValue);\n    initialStateCell.initialValue = clonedValue;\n    var value = initialSpec.isImmutable ? mkUntrackedValue(initialValue) : clonedValue;\n    set(proxyRoot, initialStateCell.path, value);\n  } catch (_b) {\n    // Setting the state to undefined to make sure it gets re-initialized\n    // in case it changes values.\n    initialStateCell.initialValue = undefined;\n    set(proxyRoot, initialStateCell.path, undefined);\n  }\n  $$state.stateInitializationEnv.visited.delete(initialStateName);\n  $$state.stateInitializationEnv.stack.pop();\n  return initialValue;\n}\nfunction create$StateProxy($$state, leafHandlers) {\n  var proxyRoot;\n  var rec = function (currPath, currNode) {\n    var getNextPath = function (property) {\n      return __spreadArray(__spreadArray([], __read(currPath), false), [isNum$1(property) ? +property : property], false);\n    };\n    var spec = currNode.getSpec();\n    var handlers = {\n      deleteProperty: function (target, property) {\n        var _a, _b;\n        if (!currNode.isLeaf() && !currNode.hasArrayTransition() && !isNum$1(property)) {\n          throw new InvalidOperation(\"Can't delete a property in the middle of the state spec\");\n        }\n        delete get($$state.stateValues, currPath)[property];\n        if (spec.onChangeProp) {\n          //we are always in a leaf, since we only have two cases:\n          // 1 - delete properties outside the state tree\n          // 2 - delete indices in repeated implicit states, but these can't be exposed, so they don't have onChangeProp\n          (_b = (_a = $$state.env.$props)[spec.onChangeProp]) === null || _b === void 0 ? void 0 : _b.call(_a, get(proxyRoot, currPath.slice(spec.pathObj.length)));\n        }\n        return Reflect.deleteProperty(target, property);\n      },\n      get: function (target, property, receiver) {\n        var _a, _b;\n        if (property === PLASMIC_STATE_PROXY_SYMBOL) {\n          return {\n            node: currNode,\n            path: currPath\n          };\n        }\n        var nextPath = getNextPath(property);\n        var nextNode = currNode.makeTransition(property);\n        if (nextNode === null || nextNode === void 0 ? void 0 : nextNode.isLeaf()) {\n          return (_b = (_a = leafHandlers(ensureStateCell(receiver, property, nextPath, nextNode))).get) === null || _b === void 0 ? void 0 : _b.call(_a, target, property, receiver);\n        } else if (nextNode && !(property in target)) {\n          target[property] = rec(nextPath, nextNode);\n        }\n        return Reflect.get(target, property, receiver);\n      },\n      set: function (target, property, value, receiver) {\n        var _a, _b, _c, _d;\n        var nextPath = getNextPath(property);\n        var nextNode = currNode.makeTransition(property);\n        var nextSpec = nextNode === null || nextNode === void 0 ? void 0 : nextNode.getSpec();\n        if ((property === \"registerInitFunc\" || property === \"eagerInitializeStates\") && currPath.length === 0) {\n          return Reflect.set(target, property, value, receiver);\n        }\n        if (!nextNode && currNode.hasArrayTransition()) {\n          set($$state.stateValues, nextPath, value);\n          //array can set his own properties such as length, map, ...\n          return Reflect.set(target, property, value, receiver);\n        }\n        if (nextNode === null || nextNode === void 0 ? void 0 : nextNode.isLeaf()) {\n          (_b = (_a = leafHandlers(ensureStateCell(receiver, property, nextPath, nextNode))).set) === null || _b === void 0 ? void 0 : _b.call(_a, target, property, value, receiver);\n          Reflect.set(target, property, value, receiver);\n          if (nextSpec === null || nextSpec === void 0 ? void 0 : nextSpec.onChangeProp) {\n            var pathKey = JSON.stringify(nextPath);\n            var isInitOnChange =\n            // If we are dealing with a valueProp it means that this state cell value is provided by the parent\n            // and we don't need to consider initialization calls for it.\n            !nextSpec.valueProp && !$$state.initializedLeafPaths.has(pathKey);\n            // We need to call the onChangeProp during initialization process so that the parent\n            // state can be updated with the correct value. We will provide an additional parameter\n            // to the onChangeProp function to indicate that the call is made during initialization.\n            (_d = (_c = $$state.env.$props)[nextSpec.onChangeProp]) === null || _d === void 0 ? void 0 : _d.call(_c, value, {\n              _plasmic_state_init_: isInitOnChange\n            });\n            if (isInitOnChange) {\n              $$state.initializedLeafPaths.add(pathKey);\n            }\n          }\n        }\n        if (!nextNode) {\n          // can't set an unknown field in $state\n          return false;\n        }\n        if (canProxy(value) && !nextNode.isLeaf()) {\n          target[property] = rec(nextPath, nextNode);\n          Reflect.ownKeys(value).forEach(function (key) {\n            target[property][key] = value[key];\n          });\n        } else if (!nextNode.isLeaf()) {\n          throw new InvalidOperation(\"inserting a primitive value into a non-leaf\");\n        }\n        var newValue = nextNode.isLeaf() && (nextSpec === null || nextSpec === void 0 ? void 0 : nextSpec.isImmutable) ? mkUntrackedValue(value) : value;\n        unsubscribeToValtio($$state, nextPath);\n        set($$state.stateValues, nextPath, newValue);\n        subscribeToValtio($$state, nextPath, nextNode);\n        return true;\n      }\n    };\n    var baseObject = currNode.hasArrayTransition() ? [] : {};\n    var proxyObj = new Proxy(baseObject, handlers);\n    if (currPath.length === 0) {\n      proxyRoot = proxyObj;\n    }\n    return proxyObj;\n  };\n  return rec([], $$state.rootSpecTree);\n}\nvar mkUntrackedValue = function (o) {\n  return o != null && typeof o === \"object\" ? ref(o) : o;\n};\nvar envFieldsAreNonNill = function (env) {\n  var _a, _b, _c;\n  return {\n    $props: env.$props,\n    $ctx: (_a = env.$ctx) !== null && _a !== void 0 ? _a : {},\n    $queries: (_b = env.$queries) !== null && _b !== void 0 ? _b : {},\n    $refs: (_c = env.$refs) !== null && _c !== void 0 ? _c : {}\n  };\n};\n/**\n * We need to support two versions with different parameters to be backward compatible\n *    {\n *       specs: $StateSpec<any>[],\n *       props: Record<string, any>,\n *       $ctx?: Record<string, any>,\n *       opts?: { inCanvas: boolean; }\n *    }\n *    {\n *       specs: $StateSpec<any>[],\n *       env: { $props; $queries; $ctx },\n *       opts?: { inCanvas: boolean }\n *    }\n */\nfunction extractDollarStateParametersBackwardCompatible() {\n  var rest = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    rest[_i] = arguments[_i];\n  }\n  if (\"$props\" in rest[0]) {\n    // latest version\n    return {\n      env: rest[0],\n      opts: rest[1]\n    };\n  } else {\n    return {\n      env: {\n        $props: rest[0],\n        $ctx: rest[1],\n        $queries: {}\n      },\n      opts: rest[2]\n    };\n  }\n}\nfunction invokeInitFuncBackwardsCompatible(initFunc, env) {\n  if (initFunc.length > 1) {\n    return initFunc(env.$props, env.$state, env.$ctx);\n  } else {\n    return initFunc(env);\n  }\n}\nfunction useDollarState(specs) {\n  var rest = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    rest[_i - 1] = arguments[_i];\n  }\n  var _a = extractDollarStateParametersBackwardCompatible.apply(void 0, __spreadArray([], __read(rest), false)),\n    env = _a.env,\n    opts = _a.opts;\n  var _b = __read(React__default.useState(), 2),\n    setState = _b[1];\n  var mountedRef = React__default.useRef(false);\n  var isMounted = React__default.useCallback(function () {\n    return mountedRef.current;\n  }, []);\n  React__default.useEffect(function () {\n    mountedRef.current = true;\n    return function () {\n      mountedRef.current = false;\n    };\n  }, []);\n  var pendingUpdate = React__default.useRef(false);\n  var forceUpdate = React__default.useCallback(function () {\n    return defer(function () {\n      if (isMounted()) {\n        setState([]);\n        pendingUpdate.current = false;\n      }\n    });\n  }, []);\n  var $$state = React__default.useRef(function () {\n    var rootSpecTree = buildTree(specs);\n    return {\n      rootSpecTree: rootSpecTree,\n      specTreeLeaves: getSpecTreeLeaves(rootSpecTree),\n      stateValues: proxy({}),\n      env: envFieldsAreNonNill(env),\n      specs: [],\n      registrationsQueue: [],\n      stateInitializationEnv: {\n        stack: [],\n        visited: new Set()\n      },\n      initializedLeafPaths: new Set()\n    };\n  }()).current;\n  $$state.env = envFieldsAreNonNill(env);\n  $$state.specs = specs;\n  var create$State = React__default.useCallback(function () {\n    var $state = Object.assign(create$StateProxy($$state, function (stateCell) {\n      var spec = stateCell.node.getSpec();\n      if (stateCell.initialValue === UNINITIALIZED && spec.initFunc) {\n        initializeStateValue($$state, stateCell, $state);\n      } else if (stateCell.initialValue === UNINITIALIZED && !spec.valueProp) {\n        stateCell.initialValue = spec.initVal;\n        set($state, stateCell.path, spec.initVal);\n      }\n      return {\n        get: function () {\n          var currSpec = stateCell.node.getSpec();\n          if (currSpec.valueProp) {\n            var valueProp = $$state.env.$props[currSpec.valueProp];\n            subscribeToValtio($$state, stateCell.path, stateCell.node);\n            return valueProp;\n          } else {\n            return get($$state.stateValues, stateCell.path);\n          }\n        }\n      };\n    }), __assign({\n      registerInitFunc: function (pathStr, f, repetitionIndex, overrideEnv) {\n        var _a = findStateCell($$state.rootSpecTree, pathStr, repetitionIndex),\n          node = _a.node,\n          realPath = _a.realPath;\n        var stateCell = getStateCellFrom$StateRoot($state, realPath);\n        var innerEnv = overrideEnv ? envFieldsAreNonNill(overrideEnv) : $$state.env;\n        if (!deepEqual(stateCell.initialValue, f(__assign({\n          $state: $state\n        }, innerEnv)))) {\n          $$state.registrationsQueue.push({\n            node: node,\n            path: realPath,\n            f: f,\n            overrideEnv: overrideEnv ? envFieldsAreNonNill(overrideEnv) : undefined\n          });\n          if (!pendingUpdate.current) {\n            pendingUpdate.current = true;\n            forceUpdate();\n          }\n        }\n      }\n    }, (opts === null || opts === void 0 ? void 0 : opts.inCanvas) ? {\n      eagerInitializeStates: function (stateSpecs) {\n        // we need to eager initialize all states in canvas to populate the data picker\n        $$state.specTreeLeaves.forEach(function (node) {\n          var _a, _b;\n          var spec = node.getSpec();\n          if (spec.isRepeated) {\n            return;\n          }\n          var stateCell = getStateCellFrom$StateRoot($state, spec.pathObj);\n          var newSpec = stateSpecs.find(function (sp) {\n            return sp.path === spec.path;\n          });\n          if (!newSpec || stateCell.initFuncHash === ((_a = newSpec === null || newSpec === void 0 ? void 0 : newSpec.initFuncHash) !== null && _a !== void 0 ? _a : \"\") && stateCell.initialValue !== UNINITIALIZED) {\n            return;\n          }\n          stateCell.initFunc = newSpec.initFunc;\n          stateCell.initFuncHash = (_b = newSpec.initFuncHash) !== null && _b !== void 0 ? _b : \"\";\n          var init = spec.valueProp ? $$state.env.$props[spec.valueProp] : spec.initFunc ? initializeStateValue($$state, stateCell, $state) : spec.initVal;\n          set($state, spec.pathObj, init);\n        });\n      }\n    } : {}));\n    return $state;\n  }, [opts === null || opts === void 0 ? void 0 : opts.inCanvas]);\n  var ref = React__default.useRef(undefined);\n  if (!ref.current) {\n    ref.current = create$State();\n  }\n  var $state = ref.current;\n  if (opts === null || opts === void 0 ? void 0 : opts.inCanvas) {\n    $$state.rootSpecTree = updateTree($$state.rootSpecTree, specs);\n    var newLeaves = getSpecTreeLeaves($$state.rootSpecTree);\n    if (!arrayEq(newLeaves, $$state.specTreeLeaves)) {\n      var old$state_1 = $state;\n      $state = ref.current = create$State();\n      $$state.specTreeLeaves = newLeaves;\n      getStateCells(old$state_1, $$state.rootSpecTree).forEach(function (_a) {\n        var path = _a.path;\n        var oldStateCell = tryGetStateCellFrom$StateRoot(old$state_1, path);\n        if (oldStateCell) {\n          set($state, path, get(old$state_1, path));\n          var newStateCell = getStateCellFrom$StateRoot($state, path);\n          newStateCell.initialValue = oldStateCell.initialValue;\n        }\n      });\n    }\n  }\n  var reInitializeState = function (stateCell) {\n    var _a, _b;\n    var newInit = initializeStateValue($$state, stateCell, $state);\n    var spec = stateCell.node.getSpec();\n    if (spec.onChangeProp) {\n      (_b = (_a = $$state.env.$props)[spec.onChangeProp]) === null || _b === void 0 ? void 0 : _b.call(_a, newInit);\n    }\n  };\n  useIsomorphicLayoutEffect(function () {\n    // For each spec with an initFunc, evaluate it and see if\n    // the init value has changed. If so, reset its state.\n    var resetSpecs = [];\n    getStateCells($state, $$state.rootSpecTree).forEach(function (stateCell) {\n      var _a;\n      if (stateCell.initFunc) {\n        try {\n          var newInit = invokeInitFuncBackwardsCompatible(stateCell.initFunc, __assign({\n            $state: $state\n          }, (_a = stateCell.overrideEnv) !== null && _a !== void 0 ? _a : envFieldsAreNonNill(env)));\n          if (!deepEqual(newInit, stateCell.initialValue)) {\n            resetSpecs.push({\n              stateCell: stateCell\n            });\n          }\n        } catch (_b) {\n          // Exception may be thrown from initFunc -- for example, if it tries to access $queries\n          // that are still loading. We swallow those here, since we're only interested in\n          // checking if the init value has changed, not in handling these errors.\n        }\n      }\n    });\n    resetSpecs.forEach(function (_a) {\n      var stateCell = _a.stateCell;\n      reInitializeState(stateCell);\n    });\n  }, [env.$props, $state, $$state, reInitializeState]);\n  useIsomorphicLayoutEffect(function () {\n    while ($$state.registrationsQueue.length) {\n      var _a = $$state.registrationsQueue.shift(),\n        path = _a.path,\n        f = _a.f,\n        overrideEnv = _a.overrideEnv;\n      var stateCell = getStateCellFrom$StateRoot($state, path);\n      stateCell.initFunc = f;\n      stateCell.overrideEnv = overrideEnv;\n      reInitializeState(stateCell);\n    }\n  });\n  // immediately initialize exposed non-private states\n  useIsomorphicLayoutEffect(function () {\n    $$state.specTreeLeaves.forEach(function (node) {\n      var spec = node.getSpec();\n      if (!spec.isRepeated && spec.type !== \"private\") {\n        // We only need to attempt to access the state cell to trigger initialization,\n        // Check create$StateProxy for more details on how this works.\n        getStateCellFrom$StateRoot($state, spec.pathObj);\n      }\n    });\n  }, []);\n  // Re-render if any value changed in one of these objects\n  useSnapshot($$state.stateValues, {\n    sync: true\n  });\n  return $state;\n}\nfunction initializeCodeComponentStates($state, states, repetitionIndex, componentHelpers, child$Props) {\n  var e_1, _a;\n  var _b, _c;\n  var stateHelpers = (_b = componentHelpers === null || componentHelpers === void 0 ? void 0 : componentHelpers.states) !== null && _b !== void 0 ? _b : {};\n  var _loop_1 = function (name_1, plasmicStateName) {\n    if (name_1 in stateHelpers && \"initFunc\" in stateHelpers[name_1]) {\n      (_c = $state.registerInitFunc) === null || _c === void 0 ? void 0 : _c.call($state, plasmicStateName, function (_a) {\n        var _b, _c;\n        var $props = _a.$props;\n        return (_c = (_b = stateHelpers[name_1]).initFunc) === null || _c === void 0 ? void 0 : _c.call(_b, $props);\n      }, repetitionIndex !== null && repetitionIndex !== void 0 ? repetitionIndex : [], {\n        $props: child$Props\n      });\n    }\n  };\n  try {\n    for (var states_1 = __values(states), states_1_1 = states_1.next(); !states_1_1.done; states_1_1 = states_1.next()) {\n      var _d = states_1_1.value,\n        name_1 = _d.name,\n        plasmicStateName = _d.plasmicStateName;\n      _loop_1(name_1, plasmicStateName);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (states_1_1 && !states_1_1.done && (_a = states_1.return)) _a.call(states_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n}\nfunction generateOnMutateForSpec(stateName, componentHelpers) {\n  var _a, _b;\n  return (_b = (_a = componentHelpers === null || componentHelpers === void 0 ? void 0 : componentHelpers.states) === null || _a === void 0 ? void 0 : _a[stateName]) === null || _b === void 0 ? void 0 : _b.onMutate;\n}\nfunction initializePlasmicStates($state, states, repetitionIndex) {\n  var e_2, _a;\n  var _b;\n  try {\n    for (var states_2 = __values(states), states_2_1 = states_2.next(); !states_2_1.done; states_2_1 = states_2.next()) {\n      var _c = states_2_1.value,\n        name_2 = _c.name,\n        initFunc = _c.initFunc;\n      (_b = $state.registerInitFunc) === null || _b === void 0 ? void 0 : _b.call($state, name_2, initFunc, repetitionIndex !== null && repetitionIndex !== void 0 ? repetitionIndex : []);\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (states_2_1 && !states_2_1.done && (_a = states_2.return)) _a.call(states_2);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n}\nfunction generateStateOnChangeProp($state, path) {\n  return function (val) {\n    return set($state, path, val);\n  };\n}\nfunction generateStateOnChangePropForCodeComponents($state, stateName, plasmicStatePath, componentHelpers) {\n  var _a, _b;\n  var onChangeArgsToValue = (_b = (_a = componentHelpers === null || componentHelpers === void 0 ? void 0 : componentHelpers.states) === null || _a === void 0 ? void 0 : _a[stateName]) === null || _b === void 0 ? void 0 : _b.onChangeArgsToValue;\n  if (!onChangeArgsToValue || typeof onChangeArgsToValue !== \"function\") {\n    return generateStateOnChangeProp($state, plasmicStatePath);\n  }\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return generateStateOnChangeProp($state, plasmicStatePath)(onChangeArgsToValue.apply(null, args));\n  };\n}\nfunction generateStateValueProp($state, path) {\n  return get($state, path);\n}\nvar useIsomorphicLayoutEffect = typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\nfunction isPlasmicStateProxy(obj) {\n  return obj != null && typeof obj === \"object\" && !!obj[PLASMIC_STATE_PROXY_SYMBOL];\n}\nfunction is$StateProxy(obj) {\n  return obj != null && typeof obj === \"object\" && (!!obj[PLASMIC_STATE_PROXY_SYMBOL] || getVersion(obj));\n}\nfunction getStateCells($state, root) {\n  var e_3, _a;\n  var _b;\n  if ($state == null || typeof $state !== \"object\") {\n    return [];\n  }\n  if (root.hasArrayTransition()) {\n    return Object.keys($state).flatMap(function (key) {\n      return getStateCells($state[key], ensure(root.makeTransition(ARRAY_SYMBOL)));\n    });\n  } else {\n    var stateCell = (_b = proxyObjToStateCell.get($state)) !== null && _b !== void 0 ? _b : {};\n    var stateCells = [];\n    try {\n      for (var _c = __values(root.edges().entries()), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var _e = __read(_d.value, 2),\n          key = _e[0],\n          child = _e[1];\n        if (typeof key === \"string\" && key in $state) {\n          stateCells.push.apply(stateCells, __spreadArray([], __read(getStateCells($state[key], child)), false));\n          if (key in stateCell) {\n            stateCells.push(stateCell[key]);\n          }\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n    return stateCells;\n  }\n}\nfunction getStateCellsInPlasmicProxy(obj) {\n  if (!isPlasmicStateProxy(obj)) {\n    return [];\n  }\n  var _a = obj[PLASMIC_STATE_PROXY_SYMBOL],\n    rootNode = _a.node,\n    rootPath = _a.path,\n    isOutside = _a.isOutside;\n  if (isOutside) {\n    return [];\n  }\n  return getStateCells(obj, rootNode).map(function (stateCell) {\n    return {\n      path: stateCell.node.getSpec().path,\n      realPath: stateCell.path.slice(rootPath.length)\n    };\n  });\n}\nfunction getStateSpecInPlasmicProxy(obj, path) {\n  obj = get(obj, path.slice(0, path.length - 1));\n  if (!isPlasmicStateProxy(obj)) {\n    return undefined;\n  }\n  var node = obj[PLASMIC_STATE_PROXY_SYMBOL].node;\n  var nextNode = node.makeTransition(path[path.length - 1]);\n  if (node.isLeaf() || !nextNode) {\n    return undefined;\n  }\n  return {\n    spec: nextNode.getSpec(),\n    isImplicitStateArray: nextNode.hasArrayTransition()\n  };\n}\nfunction getCurrentInitialValue(obj, path) {\n  var _a;\n  if (!isPlasmicStateProxy(obj)) {\n    return undefined;\n  }\n  return (_a = tryGetStateCellFrom$StateRoot(obj, path)) === null || _a === void 0 ? void 0 : _a.initialValue;\n}\nfunction resetToInitialValue(obj, path) {\n  var stateCell = tryGetStateCellFrom$StateRoot(obj, path);\n  if (stateCell) {\n    set(obj, path, stateCell.initialValue);\n  }\n}\nfunction shallowEqual(a1, a2) {\n  if (a1.length !== a2.length) {\n    return false;\n  }\n  for (var i = 0; i < a1.length; i++) {\n    if (a1[i] !== a2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n/**\n * Shallow comparison of arrays.\n */\nfunction arrayEq(xs, ys) {\n  return xs.length === ys.length && xs.every(function (_, index) {\n    return xs[index] === ys[index];\n  });\n}\nfunction isNum(value) {\n  return typeof value === \"symbol\" ? false : !isNaN(+value);\n}\n/**\n * Forked from https://github.com/lukeed/dset\n * Changes: fixed setting a deep value to a proxy object\n */\nfunction set(obj, keys, val) {\n  keys = keys.split ? keys.split(\".\") : keys;\n  var i = 0,\n    l = keys.length,\n    t = obj,\n    x,\n    k;\n  while (i < l) {\n    k = keys[i++];\n    if (k === \"__proto__\" || k === \"constructor\" || k === \"prototype\") break;\n    var newValue = i === l ? val : typeof (x = t[k]) === typeof keys ? x : keys[i] * 0 !== 0 || !!~(\"\" + keys[i]).indexOf(\".\") ? {} : [];\n    assignValue(t, k, newValue);\n    t = t[k];\n  }\n}\n/**\n * Forked from lodash\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == \"__proto__\") {\n    Object.defineProperty(object, key, {\n      configurable: true,\n      enumerable: true,\n      value: value,\n      writable: true\n    });\n  } else {\n    object[key] = value;\n  }\n}\nfunction eq(value, other) {\n  return value === other || value !== value && other !== other;\n}\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(Object.prototype.hasOwnProperty.call(object, key) && eq(objValue, value)) || value === undefined && !(key in object)) {\n    baseAssignValue(object, key, value);\n  }\n}\nvar isInstanceOfMap = function (a) {\n  return a != null && typeof a === \"object\" && \"size\" in a && typeof a.entries === \"function\" && typeof a.get === \"function\" && typeof a.set === \"function\" && typeof a.has === \"function\";\n};\nvar isInstanceOfSet = function (a) {\n  return a != null && typeof a === \"object\" && \"size\" in a && typeof a.entries === \"function\" && typeof a.add === \"function\" && typeof a.has === \"function\" && typeof a.delete === \"function\";\n};\nvar isRegExp = function (a) {\n  return Object.prototype.toString.call(a) === \"[object RegExp]\";\n};\n/**\n * Forked from https://github.com/epoberezkin/fast-deep-equal/blob/master/src/index.jst\n * Changes: removed the comparison between constructors and instanceof objects\n * because they are dependent on the window object\n */\nfunction deepEqual(a, b) {\n  var e_4, _a, e_5, _b, e_6, _c;\n  if (a === b) return true;\n  if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n    // if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;) if (!deepEqual(a[i], b[i])) return false;\n      return true;\n    }\n    // if ((a instanceof Map) && (b instanceof Map)) {\n    if (isInstanceOfMap(a) && isInstanceOfMap(b)) {\n      if (a.size !== b.size) return false;\n      try {\n        for (var _d = __values(a.entries()), _e = _d.next(); !_e.done; _e = _d.next()) {\n          i = _e.value;\n          if (!b.has(i[0])) return false;\n        }\n      } catch (e_4_1) {\n        e_4 = {\n          error: e_4_1\n        };\n      } finally {\n        try {\n          if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n        } finally {\n          if (e_4) throw e_4.error;\n        }\n      }\n      try {\n        for (var _f = __values(a.entries()), _g = _f.next(); !_g.done; _g = _f.next()) {\n          i = _g.value;\n          if (!deepEqual(i[1], b.get(i[0]))) return false;\n        }\n      } catch (e_5_1) {\n        e_5 = {\n          error: e_5_1\n        };\n      } finally {\n        try {\n          if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n        } finally {\n          if (e_5) throw e_5.error;\n        }\n      }\n      return true;\n    }\n    // if ((a instanceof Set) && (b instanceof Set)) {\n    if (isInstanceOfSet(a) && isInstanceOfSet(b)) {\n      if (a.size !== b.size) return false;\n      try {\n        for (var _h = __values(a.entries()), _j = _h.next(); !_j.done; _j = _h.next()) {\n          i = _j.value;\n          if (!b.has(i[0])) return false;\n        }\n      } catch (e_6_1) {\n        e_6 = {\n          error: e_6_1\n        };\n      } finally {\n        try {\n          if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n        } finally {\n          if (e_6) throw e_6.error;\n        }\n      }\n      return true;\n    }\n    // if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (isRegExp(a) && isRegExp(b)) return a.source === b.source && a.flags === b.flags;\n    // if (a.valueOf !== Object.prototype.valueOf)\n    //   return a.valueOf() === b.valueOf();\n    // if (a.toString !== Object.prototype.toString)\n    //   return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n    for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (key === \"_owner\" && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        continue;\n      }\n      if (!deepEqual(a[key], b[key])) return false;\n    }\n    return true;\n  }\n  // true if both NaN, false otherwise\n  return a !== a && b !== b;\n}\n\n// Utilities used by generated code\n// Using any while classnames package is not updated to have the correct types exported\nvar classNames = classNames$1;\nvar PLUME_STRICT_MODE = true;\nfunction setPlumeStrictMode(mode) {\n  PLUME_STRICT_MODE = mode;\n}\nfunction mergeVariantToggles() {\n  var toggles = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    toggles[_i] = arguments[_i];\n  }\n  var definedToggles = toggles.filter(function (x) {\n    return !!x.def;\n  });\n  var grouped = groupBy(definedToggles, function (_a) {\n    var def = _a.def;\n    return def.group;\n  });\n  return mapValues(grouped, function (subToggles) {\n    return Object.fromEntries(subToggles.map(function (_a) {\n      var def = _a.def,\n        active = _a.active;\n      return [def.variant, !!active];\n    }));\n  });\n}\nfunction noOutline() {\n  return {\n    outline: \"none\"\n  };\n}\nfunction getPlumeType(child) {\n  var _a;\n  if (!React.isValidElement(child)) {\n    return undefined;\n  }\n  var childType = child.type;\n  return childType.__plumeType || ((_a = childType.getPlumeType) === null || _a === void 0 ? void 0 : _a.call(childType, child.props));\n}\nfunction useButton(plasmicClass, props, config, ref) {\n  var _a, _b, _c, _d;\n  if (ref === void 0) {\n    ref = null;\n  }\n  var link = props.link,\n    isDisabled = props.isDisabled,\n    startIcon = props.startIcon,\n    endIcon = props.endIcon,\n    showStartIcon = props.showStartIcon,\n    showEndIcon = props.showEndIcon,\n    children = props.children,\n    target = props.target,\n    _e = props.submitsForm,\n    submitsForm = _e === void 0 ? false : _e,\n    rest = __rest(props, [\"link\", \"isDisabled\", \"startIcon\", \"endIcon\", \"showStartIcon\", \"showEndIcon\", \"children\", \"target\", \"submitsForm\"]);\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.showStartIconVariant,\n    active: showStartIcon\n  }, {\n    def: config.showEndIconVariant,\n    active: showEndIcon\n  }, {\n    def: config.isDisabledVariant,\n    active: isDisabled\n  }));\n  var args = __assign(__assign(__assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), config.startIconSlot && (_a = {}, _a[config.startIconSlot] = startIcon, _a)), config.endIconSlot && (_b = {}, _b[config.endIconSlot] = endIcon, _b)), (_c = {}, _c[config.contentSlot] = children, _c));\n  var buttonType = undefined;\n  if (!link) {\n    if (!plasmicClass.internalVariantProps.includes(\"type\") && !plasmicClass.internalArgProps.includes(\"type\") && \"type\" in rest) {\n      // There's no Plasmic-defined variant or arg called \"type\",\n      // but the user passed in a \"type\" arg, so must be an override\n      // or direct instantiation. We use that value\n      buttonType = rest.type;\n    } else {\n      // Otherwise, we set buttonType depending in submitsForm\n      buttonType = submitsForm ? \"submit\" : \"button\";\n    }\n  }\n  var overrides = (_d = {}, _d[config.root] = {\n    as: link ? \"a\" : \"button\",\n    props: __assign(__assign(__assign({}, omit.apply(void 0, __spreadArray(__spreadArray([rest], __read(plasmicClass.internalArgProps), false), __read(plasmicClass.internalVariantProps), false))), {\n      type: buttonType,\n      ref: ref,\n      disabled: isDisabled,\n      target: target === true ? \"_blank\" : target === false ? undefined : target\n    }), !!link && {\n      href: link\n    })\n  }, _d);\n  return {\n    plasmicProps: {\n      variants: variants,\n      args: args,\n      overrides: overrides\n    }\n  };\n}\nfunction getStyleProps(props) {\n  return pick(props, \"className\", \"style\");\n}\nfunction getDefaultPlasmicProps(plasmicClass, props) {\n  return {\n    plasmicProps: {\n      variants: pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false)),\n      args: pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false)),\n      overrides: {}\n    }\n  };\n}\nvar RE_DATA_PROP = /^(data-.*)$/;\nfunction getDataProps(props) {\n  return pickBy(props, function (k) {\n    return RE_DATA_PROP.test(k);\n  });\n}\nfunction asAriaCheckboxProps(props) {\n  var ariaProps = __assign(__assign({}, props), {\n    isSelected: props.isChecked,\n    defaultSelected: props.defaultChecked\n  });\n  delete ariaProps[\"isChecked\"];\n  delete ariaProps[\"defaultChecked\"];\n  return ariaProps;\n}\nfunction useCheckbox(plasmicClass, props, config, ref) {\n  var _a, _b;\n  if (ref === void 0) {\n    ref = null;\n  }\n  var children = props.children,\n    isDisabled = props.isDisabled,\n    isIndeterminate = props.isIndeterminate;\n  useEnsureSSRProvider();\n  var inputRef = React.useRef(null);\n  var rootRef = React.useRef(null);\n  var ariaProps = asAriaCheckboxProps(props);\n  var state = useToggleState(ariaProps);\n  var inputProps = useCheckbox$1(ariaProps, state, inputRef).inputProps;\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.isDisabledVariant,\n    active: isDisabled\n  }, {\n    def: config.isCheckedVariant,\n    active: state.isSelected\n  }, {\n    def: config.isIndeterminateVariant,\n    active: isIndeterminate\n  }, {\n    def: config.noLabelVariant,\n    active: !children\n  }));\n  var overrides = (_a = {}, _a[config.root] = {\n    as: \"label\",\n    props: mergeProps(getStyleProps(props), {\n      ref: rootRef\n    }),\n    wrapChildren: function (children) {\n      return React.createElement(React.Fragment, null, React.createElement(VisuallyHidden, null, React.createElement(\"input\", __assign({}, inputProps, {\n        ref: inputRef\n      }))), children);\n    }\n  }, _a);\n  var args = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), config.labelSlot ? (_b = {}, _b[config.labelSlot] = children, _b) : {});\n  var plumeState = React.useMemo(function () {\n    return {\n      setChecked: function (checked) {\n        return state.setSelected(checked);\n      }\n    };\n  }, [state]);\n  React.useImperativeHandle(ref, function () {\n    return {\n      getRoot: function () {\n        return rootRef.current;\n      },\n      focus: function () {\n        var _a;\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: function () {\n        var _a;\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      },\n      setChecked: function (checked) {\n        return plumeState.setChecked(checked);\n      }\n    };\n  }, [rootRef, inputRef, plumeState]);\n  return {\n    plasmicProps: {\n      variants: variants,\n      overrides: overrides,\n      args: args\n    },\n    state: plumeState\n  };\n}\n\n/**\n * In general, we try not to expose react-aria's Collections API to Plume users.\n * The Collections API is how react-aria users pass data about collections of\n * things using the built-in Item and Section components, which are abstract,\n * metadata-only components that don't render anything but only serve to specify\n * data.  For example, here's how you would use react-spectrum's Picker:\n *\n *   <Picker>\n *     <Section title=\"Asia\">\n *       <Item key=\"taiwan\">Taiwan</Item>\n *       <Item key=\"japan\">Japan</Item>\n *       <Item key=\"china\">China</Item>\n *     </Section>\n *     <Section title=\"Europe\">\n *       <Item key=\"germany\">Germany</Item>\n *       <Item key=\"france\">France</Item>\n *     </Section>\n *   </Picker>\n *\n * You would re-use this same Item/Section components to pass similar things to\n * Menu, Tabs, etc.\n *\n * For Plasmic, this API is too abstract.  The user has explicitly designed components\n * like Select.Option and Select.OptionGroup, and it is weird that they don't actually\n * use these components. It is more natural to do:\n *\n *   <Select>\n *     <Select.OptionGroup title=\"Asia\">\n *       <Select.Option key=\"taiwan\">Taiwan</Select>\n *     </Select.OptionGroup>\n *   </Select>\n *\n * For Plume, we let users directly use the components they designed, both to collect\n * information and to perform actual rendering.  For example, for Plume,\n * you'd use Select.Option instead of Item, and Select.OptionGroup instead of Section.\n * This means that the Select.Option props will collect the same information Item\n * does.\n *\n * A component like Select.Option then serves two purposes:\n *\n * 1. Allow users to specify the collection of data, like in the above example\n *    Here, we're mainly interested in the props in those ReactElements so\n *    we can pass the Item/Section data onto react-aria's APIs.  We are not\n *    actually rendering these elements.\n * 2. Once react-aria's Collections API has gone through them and built\n *    Collection \"nodes\", we then create cloned versions of these elements\n *    with the corresponding node passed in as a secret prop.  These ReactElements\n *    are then actually used to _render_ the corresponding Option / OptionGroup.\n *\n * This file contains helper functions to help with implementing the above.\n *\n * Note also that most of the collections-based react-aria components expose\n * a parallel API that accepts a list of \"items\" and a render prop, instead\n * of list of Item/Section elements.  This is for efficiency, but we are opting\n * to only support the composite-component pattern for now for simplicity.\n */\nfunction deriveItemsFromProps(props, opts) {\n  if (opts.itemsProp && opts.itemsProp in props) {\n    if (!opts.ItemComponent || !opts.SectionComponent) {\n      throw new Error(\"You may need to re-generate your Plasmic* files\");\n    }\n    var items = props[opts.itemsProp];\n    return deriveItemsFromItemsProp(items, {\n      ItemComponent: opts.ItemComponent,\n      SectionComponent: opts.SectionComponent\n    });\n  } else {\n    return deriveItemsFromChildren(props.children, opts);\n  }\n}\nfunction deriveItemsFromItemsProp(items, opts) {\n  var _a;\n  var ItemComponent = opts.ItemComponent,\n    SectionComponent = opts.SectionComponent;\n  var disabledKeys = [];\n  var transform = function (item) {\n    var _a;\n    if (typeof item === \"string\") {\n      return React__default.createElement(ItemComponent, {\n        key: item,\n        value: item\n      }, item);\n    } else if (\"children\" in item) {\n      return React__default.createElement(SectionComponent, {\n        key: item.title,\n        title: item.title\n      }, item.children.map(function (x) {\n        return transform(x);\n      }));\n    } else {\n      if (item.isDisabled) {\n        disabledKeys.push(item.value);\n      }\n      return React__default.createElement(ItemComponent, {\n        key: item.value,\n        value: item.value,\n        textValue: item.textValue,\n        isDisabled: item.isDisabled\n      }, (_a = item.label) !== null && _a !== void 0 ? _a : item.value);\n    }\n  };\n  return {\n    items: (_a = items === null || items === void 0 ? void 0 : items.map(function (x) {\n      return transform(x);\n    })) !== null && _a !== void 0 ? _a : [],\n    disabledKeys: disabledKeys\n  };\n}\n/**\n * Given children of a component like Select or Menu, derive the items\n * that we will pass into the Collections API.  These will be\n * ReactElement<ItemLikeProps|SectionLikeProps>[].\n *\n * Will also assign keys to items by their index in the collection,\n * and collect the keys of disabled items.\n */\nfunction deriveItemsFromChildren(children, opts) {\n  if (!children) {\n    return {\n      items: [],\n      disabledKeys: []\n    };\n  }\n  var itemPlumeType = opts.itemPlumeType,\n    sectionPlumeType = opts.sectionPlumeType,\n    invalidChildError = opts.invalidChildError;\n  // For Plume items without an explicit key, we assign a key as the index\n  // of the collection.\n  var itemCount = 0;\n  var sectionCount = 0;\n  var ensureValue = function (element) {\n    if (!propInChild(element, \"value\")) {\n      if (opts.requireItemValue && PLUME_STRICT_MODE) {\n        throw new Error(\"Must specify a \\\"value\\\" prop for \".concat(getElementTypeName(element)));\n      } else {\n        return cloneChild(element, {\n          value: \"\".concat(itemCount++)\n        });\n      }\n    } else {\n      // Still increment count even if key is present, so that the\n      // auto-assigned key really reflects the index\n      itemCount++;\n      return element;\n    }\n  };\n  var disabledKeys = [];\n  var flattenedChildren = function (children) {\n    return toChildArray(children).flatMap(function (child) {\n      var _a;\n      if (React__default.isValidElement(child)) {\n        if (child.type === React__default.Fragment) {\n          return flattenedChildren(child.props.children);\n        }\n        var type = getPlumeType(child);\n        if (type === itemPlumeType) {\n          child = ensureValue(child);\n          var childKey = getItemLikeKey(child);\n          if (getChildProp(child, \"isDisabled\") && !!childKey) {\n            disabledKeys.push(childKey);\n          }\n          return [child];\n        }\n        if (type === sectionPlumeType) {\n          return [cloneChild(child, {\n            // key of section doesn't actually matter, just needs\n            // to be unique\n            key: (_a = child.key) !== null && _a !== void 0 ? _a : \"section-\".concat(sectionCount++),\n            children: flattenedChildren(getChildProp(child, \"children\"))\n          })];\n        }\n      }\n      if (PLUME_STRICT_MODE) {\n        throw new Error(invalidChildError !== null && invalidChildError !== void 0 ? invalidChildError : \"Unexpected child\");\n      } else {\n        return [];\n      }\n    });\n  };\n  return {\n    items: flattenedChildren(children),\n    disabledKeys: disabledKeys\n  };\n}\nfunction useDerivedItems(props, opts) {\n  var children = props.children;\n  var itemPlumeType = opts.itemPlumeType,\n    sectionPlumeType = opts.sectionPlumeType,\n    invalidChildError = opts.invalidChildError,\n    requireItemValue = opts.requireItemValue,\n    ItemComponent = opts.ItemComponent,\n    SectionComponent = opts.SectionComponent,\n    itemsProp = opts.itemsProp;\n  var items = itemsProp ? props[itemsProp] : undefined;\n  return React__default.useMemo(function () {\n    return deriveItemsFromProps(props, {\n      itemPlumeType: itemPlumeType,\n      sectionPlumeType: sectionPlumeType,\n      invalidChildError: invalidChildError,\n      requireItemValue: requireItemValue,\n      itemsProp: itemsProp,\n      ItemComponent: ItemComponent,\n      SectionComponent: SectionComponent\n    });\n  }, [children, items, itemPlumeType, sectionPlumeType, invalidChildError, requireItemValue, ItemComponent, SectionComponent]);\n}\nfunction useDerivedItemsFromChildren(children, opts) {\n  var itemPlumeType = opts.itemPlumeType,\n    sectionPlumeType = opts.sectionPlumeType,\n    invalidChildError = opts.invalidChildError,\n    requireItemValue = opts.requireItemValue;\n  return React__default.useMemo(function () {\n    return deriveItemsFromChildren(children, {\n      itemPlumeType: itemPlumeType,\n      sectionPlumeType: sectionPlumeType,\n      invalidChildError: invalidChildError,\n      requireItemValue: requireItemValue\n    });\n  }, [children, itemPlumeType, sectionPlumeType, invalidChildError, requireItemValue]);\n}\n/**\n * Given a Collection node, create the React element that we should use\n * to render it.\n */\nfunction renderCollectionNode(node) {\n  // node.rendered should already have our item-like or section-like Plume\n  // component elements, so we just need to clone them with a secret\n  // _node prop that we use to render.\n  return cloneChild(node.rendered, {\n    _node: node,\n    key: node.key\n  });\n}\n/**\n * Renders a item-like or section-like Plume component element into an\n * Item or a Section element.\n */\nfunction renderAsCollectionChild(child, opts) {\n  var _a;\n  var plumeType = getPlumeType(child);\n  if (plumeType === opts.itemPlumeType) {\n    var option = child;\n    // We look at the children passed to the item-like element, and derive key\n    // or textValue from it if it is a string\n    var content = getChildProp(option, \"children\");\n    // The children render prop needs to return an <Item/>\n    return React__default.createElement(Item\n    // We use ItemLike.value if the user explicitly specified a value,\n    // and we fallback to key.  If the user specified neither, then\n    // the Collections API will generate a unique key for this item.\n    , {\n      // We use ItemLike.value if the user explicitly specified a value,\n      // and we fallback to key.  If the user specified neither, then\n      // the Collections API will generate a unique key for this item.\n      key: getItemLikeKey(option),\n      // textValue is either explicitly specified by the user, or we\n      // try to derive it if `content` is a string.\n      textValue: (_a = getChildProp(option, \"textValue\")) !== null && _a !== void 0 ? _a : isString(content) ? content : propInChild(option, \"value\") ? getChildProp(option, \"value\") : option.key,\n      \"aria-label\": getChildProp(option, \"aria-label\")\n    }, option);\n  } else {\n    var group = child;\n    return React__default.createElement(Section\n    // Note that we are using the whole section-like element as the title\n    // here, and not group.props.title; we want the entire section-like\n    // Plume element to end up as Node.rendered.\n    , {\n      // Note that we are using the whole section-like element as the title\n      // here, and not group.props.title; we want the entire section-like\n      // Plume element to end up as Node.rendered.\n      title: group,\n      \"aria-label\": getChildProp(group, \"aria-label\"),\n      // We are flattening and deriving the descendant Options as items here.\n      // group.props.children should've already been cleaned up by\n      // deriveItemsFromChildren()\n      items: getChildProp(group, \"children\")\n    }, function (c) {\n      return renderAsCollectionChild(c, opts);\n    });\n  }\n}\nfunction getItemLikeKey(element) {\n  var _a;\n  return (_a = getChildProp(element, \"value\")) !== null && _a !== void 0 ? _a : element.key;\n}\n// PlasmicLoader-aware function to get prop from child.\nfunction getChildProp(child, prop) {\n  return \"componentProps\" in child.props ? child.props.componentProps[prop] : child.props[prop];\n}\n// PlasmicLoader-aware function to check `if (prop in element.props)`.\nfunction propInChild(child, prop) {\n  return \"componentProps\" in child.props ? prop in child.props.componentProps : prop in child.props;\n}\n// PlasmicLoader-aware function to clone React element.\nfunction cloneChild(child, props) {\n  if (child.type.getPlumeType) {\n    // If React element has getPlumeType(), assume that it is PlasmicLoader,\n    // so add nodeProps to componentProps instead of element props.\n    return React__default.cloneElement(child, __assign({\n      componentProps: __assign(__assign({}, child.props.componentProps), props)\n    }, props.key ? {\n      key: props.key\n    } : {}));\n  }\n  return React__default.cloneElement(child, props);\n}\nvar TriggeredOverlayContext = React.createContext(undefined);\nvar MenuContext = React.createContext(undefined);\nvar COLLECTION_OPTS$1 = {\n  itemPlumeType: \"menu-item\",\n  sectionPlumeType: \"menu-group\"\n};\n/**\n * Converts props from BaseMenuProps to react-aria's useMenu() props.\n */\nfunction asAriaMenuProps(props) {\n  var children = props.children,\n    rest = __rest(props, [\"children\"]);\n  var _a = useDerivedItemsFromChildren(children, __assign(__assign({}, COLLECTION_OPTS$1), {\n      invalidChildError: \"Can only use Menu.Item and Menu.Group as children to Menu\",\n      requireItemValue: false\n    })),\n    items = _a.items,\n    disabledKeys = _a.disabledKeys;\n  var collectionChildRenderer = React.useCallback(function (child) {\n    return renderAsCollectionChild(child, COLLECTION_OPTS$1);\n  }, []);\n  return {\n    ariaProps: __assign(__assign({}, rest), {\n      children: collectionChildRenderer,\n      items: items,\n      disabledKeys: disabledKeys\n    })\n  };\n}\nfunction useMenu(plasmicClass, props, config, ref) {\n  var _a, _b;\n  if (ref === void 0) {\n    ref = null;\n  }\n  useEnsureSSRProvider();\n  var ariaProps = asAriaMenuProps(props).ariaProps;\n  var triggerContext = React.useContext(TriggeredOverlayContext);\n  var rootRef = React.useRef(null);\n  var state = useTreeState(ariaProps);\n  var menuListRef = React.useRef(null);\n  var menuProps = useMenu$1(__assign(__assign({}, ariaProps), {\n    autoFocus: triggerContext === null || triggerContext === void 0 ? void 0 : triggerContext.autoFocus\n  }), state, menuListRef).menuProps;\n  var contextValue = React.useMemo(function () {\n    return {\n      state: state,\n      menuProps: props\n    };\n  }, [state, props]);\n  var variants = __assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false)));\n  var overrides = (_a = {}, _a[config.root] = {\n    props: mergeProps(getStyleProps(props), {\n      ref: rootRef\n    })\n  }, _a[config.itemsContainer] = {\n    as: \"ul\",\n    props: mergeProps(menuProps, {\n      ref: menuListRef,\n      style: __assign({}, noOutline())\n    })\n  }, _a);\n  var args = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), (_b = {}, _b[config.itemsSlot] = React.createElement(MenuContext.Provider, {\n    value: contextValue\n  }, Array.from(state.collection).map(function (node) {\n    return renderCollectionNode(node);\n  })), _b));\n  var plumeState = React.useMemo(function () {\n    return {\n      getFocusedValue: function () {\n        return state.selectionManager.focusedKey;\n      },\n      setFocusedValue: function (value) {\n        return state.selectionManager.setFocusedKey(value);\n      }\n    };\n  }, [state]);\n  React.useImperativeHandle(ref, function () {\n    return {\n      getRoot: function () {\n        return rootRef.current;\n      },\n      getFocusedValue: function () {\n        return plumeState.getFocusedValue();\n      },\n      setFocusedValue: function (key) {\n        return plumeState.setFocusedValue(key);\n      }\n    };\n  }, [rootRef, plumeState]);\n  return {\n    plasmicProps: {\n      variants: variants,\n      args: args,\n      overrides: overrides\n    },\n    state: plumeState\n  };\n}\nfunction useMenuGroup(plasmicClass, props, config) {\n  var _a, _b;\n  var context = React.useContext(MenuContext);\n  var node = props._node;\n  if (!context || !node) {\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\"You can only use a Menu.Group within a Menu component.\");\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n  var _c = useMenuSection({\n      heading: props.title,\n      \"aria-label\": props[\"aria-label\"]\n    }),\n    headingProps = _c.headingProps,\n    groupProps = _c.groupProps;\n  var separatorProps = useSeparator({\n    elementType: \"li\"\n  }).separatorProps;\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.noTitleVariant,\n    active: !props.title\n  }, {\n    def: config.isFirstVariant,\n    active: context.state.collection.getFirstKey() === node.key\n  }));\n  var args = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), (_a = {}, _a[config.titleSlot] = props.title, _a[config.itemsSlot] = Array.from(node.childNodes).map(function (childNode) {\n    return renderCollectionNode(childNode);\n  }), _a));\n  var overrides = (_b = {}, _b[config.root] = {\n    props: getStyleProps(props)\n  }, _b[config.separator] = {\n    props: __assign({}, separatorProps),\n    as: \"li\"\n  }, _b[config.titleContainer] = __assign({\n    props: __assign({\n      role: \"presentation\"\n    }, headingProps)\n  }, !props.title && {\n    render: function () {\n      return null;\n    }\n  }), _b[config.itemsContainer] = {\n    props: __assign({}, groupProps),\n    as: \"ul\"\n  }, _b);\n  return {\n    plasmicProps: {\n      variants: variants,\n      args: args,\n      overrides: overrides\n    }\n  };\n}\nfunction useMenuItem(plasmicClass, props, config) {\n  var _a, _b;\n  var menuContext = React.useContext(MenuContext);\n  var triggerContext = React.useContext(TriggeredOverlayContext);\n  if (!menuContext) {\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\"You can only use a Menu.Item within a Menu component.\");\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n  var children = props.children,\n    onAction = props.onAction;\n  var state = menuContext.state,\n    menuProps = menuContext.menuProps;\n  // We pass in the Node secretly as an undocumented prop from <Select />\n  var node = props._node;\n  var isDisabled = state.disabledKeys.has(node.key);\n  var isHighlighted = state.selectionManager.isFocused && state.selectionManager.focusedKey === node.key;\n  var ref = React.useRef(null);\n  var _c = useMenuItem$1(mergeProps({\n      // We need to merge both the onAction on MenuItem and the onAction\n      // on Menu\n      onAction: onAction\n    }, {\n      onAction: menuProps.onAction,\n      onClose: triggerContext === null || triggerContext === void 0 ? void 0 : triggerContext.state.close\n    }, {\n      isDisabled: isDisabled,\n      \"aria-label\": node && node[\"aria-label\"],\n      key: node.key,\n      isVirtualized: false,\n      closeOnSelect: true\n    }), state, ref),\n    menuItemProps = _c.menuItemProps,\n    labelProps = _c.labelProps;\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.isDisabledVariant,\n    active: isDisabled\n  }, {\n    def: config.isHighlightedVariant,\n    active: isHighlighted\n  }));\n  var args = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), (_a = {}, _a[config.labelSlot] = children, _a));\n  var overrides = (_b = {}, _b[config.root] = {\n    as: \"li\",\n    props: mergeProps(menuItemProps, {\n      ref: ref,\n      style: noOutline()\n    })\n  }, _b[config.labelContainer] = {\n    props: __assign({}, labelProps)\n  }, _b);\n  return {\n    plasmicProps: {\n      variants: variants,\n      args: args,\n      overrides: overrides\n    }\n  };\n}\n\n/**\n * A menu trigger hook that combines react-aria's useMenuTrigger, useAriaMenuTrigger,\n * useOverlayPosition, useOverlay, and usePress\n */\nfunction useMenuTrigger(opts, state) {\n  var triggerRef = opts.triggerRef,\n    isDisabled = opts.isDisabled,\n    placement = opts.placement,\n    menuMatchTriggerWidth = opts.menuMatchTriggerWidth,\n    menuWidth = opts.menuWidth,\n    menu = opts.menu;\n  var _a = useMenuTrigger$1({\n      type: \"menu\",\n      isDisabled: isDisabled\n    }, state, triggerRef),\n    triggerPressProps = _a.menuTriggerProps,\n    menuProps = _a.menuProps;\n  var triggerProps = usePress(__assign(__assign({}, triggerPressProps), {\n    isDisabled: isDisabled\n  })).pressProps;\n  var makeMenu = function () {\n    var realMenu = typeof menu === \"function\" ? menu() : menu;\n    if (!realMenu) {\n      return null;\n    }\n    if (getPlumeType(realMenu) !== \"menu\") {\n      if (PLUME_STRICT_MODE) {\n        throw new Error(\"Must use an instance of the Menu component.\");\n      }\n      return null;\n    }\n    return React.cloneElement(realMenu, mergeProps(realMenu.props, menuProps));\n  };\n  var triggerContext = React.useMemo(function () {\n    var _a;\n    return {\n      triggerRef: triggerRef,\n      state: state,\n      autoFocus: (_a = state.focusStrategy) !== null && _a !== void 0 ? _a : true,\n      placement: placement,\n      overlayMatchTriggerWidth: menuMatchTriggerWidth,\n      overlayMinTriggerWidth: true,\n      overlayWidth: menuWidth\n    };\n  }, [triggerRef, state, placement, menuMatchTriggerWidth, menuWidth]);\n  return {\n    triggerProps: triggerProps,\n    makeMenu: makeMenu,\n    triggerContext: triggerContext\n  };\n}\nfunction DropdownMenu(props) {\n  var isOpen = props.isOpen,\n    defaultOpen = props.defaultOpen,\n    onOpenChange = props.onOpenChange,\n    children = props.children,\n    placement = props.placement,\n    menu = props.menu;\n  var triggerRef = React.useRef(null);\n  var state = useMenuTriggerState({\n    isOpen: isOpen,\n    defaultOpen: defaultOpen,\n    onOpenChange: onOpenChange\n  });\n  var _a = useMenuTrigger({\n      triggerRef: triggerRef,\n      placement: placement,\n      menu: menu\n    }, state),\n    triggerProps = _a.triggerProps,\n    makeMenu = _a.makeMenu,\n    triggerContext = _a.triggerContext;\n  return React.createElement(TriggeredOverlayContext.Provider, {\n    value: triggerContext\n  }, React.cloneElement(children, mergeProps(children.props, triggerProps, {\n    ref: triggerRef\n  })), state.isOpen && makeMenu());\n}\nfunction useMenuButton(plasmicClass, props, config, outerRef) {\n  var _a, _b;\n  if (outerRef === void 0) {\n    outerRef = null;\n  }\n  var placement = props.placement,\n    isOpen = props.isOpen,\n    defaultOpen = props.defaultOpen,\n    onOpenChange = props.onOpenChange,\n    isDisabled = props.isDisabled,\n    menu = props.menu,\n    autoFocus = props.autoFocus,\n    menuMatchTriggerWidth = props.menuMatchTriggerWidth,\n    menuWidth = props.menuWidth;\n  useEnsureSSRProvider();\n  var rootRef = React.useRef(null);\n  var triggerRef = React.useRef(null);\n  var state = useMenuTriggerState({\n    isOpen: isOpen,\n    defaultOpen: defaultOpen,\n    onOpenChange: onOpenChange\n  });\n  var _c = useMenuTrigger({\n      isDisabled: isDisabled,\n      triggerRef: triggerRef,\n      placement: placement,\n      menuMatchTriggerWidth: menuMatchTriggerWidth,\n      menuWidth: menuWidth,\n      menu: menu\n    }, state),\n    triggerProps = _c.triggerProps,\n    makeMenu = _c.makeMenu,\n    triggerContext = _c.triggerContext;\n  var triggerFocusProps = useFocusable(props, triggerRef).focusableProps;\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.isOpenVariant,\n    active: state.isOpen\n  }, {\n    def: config.isDisabledVariant,\n    active: isDisabled\n  }));\n  var args = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), (_a = {}, _a[config.menuSlot] = state.isOpen ? makeMenu() : undefined, _a));\n  var overrides = (_b = {}, _b[config.root] = {\n    wrapChildren: function (children) {\n      return React.createElement(TriggeredOverlayContext.Provider, {\n        value: triggerContext\n      }, children);\n    },\n    props: {\n      ref: rootRef\n    }\n  }, _b[config.trigger] = {\n    props: mergeProps(triggerProps, triggerFocusProps, getStyleProps(props), pick(props, \"title\"), {\n      ref: triggerRef,\n      autoFocus: autoFocus,\n      disabled: !!isDisabled,\n      // Make sure this button is not interpreted as submit\n      type: \"button\"\n    })\n  }, _b);\n  var plumeState = React.useMemo(function () {\n    return {\n      open: function () {\n        return state.open();\n      },\n      close: function () {\n        return state.close();\n      },\n      isOpen: function () {\n        return state.isOpen;\n      }\n    };\n  }, [state]);\n  React.useImperativeHandle(outerRef, function () {\n    return {\n      getRoot: function () {\n        return rootRef.current;\n      },\n      getTrigger: function () {\n        return triggerRef.current;\n      },\n      focus: function () {\n        return triggerRef.current && triggerRef.current.focus();\n      },\n      blur: function () {\n        return triggerRef.current && triggerRef.current.blur();\n      },\n      open: plumeState.open,\n      close: plumeState.close,\n      isOpen: plumeState.isOpen\n    };\n  }, [rootRef, triggerRef, plumeState]);\n  return {\n    plasmicProps: {\n      variants: variants,\n      args: args,\n      overrides: overrides\n    },\n    state: plumeState\n  };\n}\nvar SelectContext = React.createContext(undefined);\nvar COLLECTION_OPTS = {\n  itemPlumeType: \"select-option\",\n  sectionPlumeType: \"select-option-group\"\n};\n/**\n * Converts props in our BaseSelectProps into props that react-aria's\n * useSelect() understands.\n *\n * Because we're not exposing the Collections API (see ./index.tsx),\n * we are converting our own API into props for useSelect.\n *\n * Specifically, in Plume's API,\n * - `children` flattens to a list of ReactElements of type Select.Option\n *   or Select.OptionGroup\n *\n * and we map it this way to the Collections API:\n * - `items` is a list of those flattened ReactElements from `children`!\n * - `children`, as a render prop, is supposed to take one of the `items`\n *   and return a `Section` or `Item` element. We take an Option/OptionGroup\n *   element, and use its props to render the appropriate `Section` or\n *   `Item`. The \"trick\" here is that we then stuff the Option element as\n *   `Item.children`, and the OptionGroup element as `Section.title`.\n *\n * When the Collections API does its work deriving `Node`s, the corresponding\n * Option/OptionGroup ReactElements will end up as `Node.rendered`.\n *\n * Then, when we are actually rendering the content of the dropdown, we\n * iterate through each collected `Node`, and renders\n * React.cloneElement(Node.rendered, {_node: node}).  This \"secretly\" passes\n * the derived collection `Node` as a prop to Option and OptionGroup, and they\n * can make use of the derived `Node.key` etc in their rendering functions.\n *\n * One thing to note here is that we never \"rendered\" the Option/OptionGroup\n * React elements that the user constructed; instead, we just looked at the\n * props used on those elements, and passed those onto the Collections API.\n * What gets rendered to the screen is the cloned version of these elements\n * with the secret derived `_node` prop.  That means Option and OptionGroup\n * render functions can assume that _node is passed in.\n */\nfunction useAriaSelectProps(props, config) {\n  var value = props.value,\n    defaultValue = props.defaultValue;\n  props.children;\n  var onChange = props.onChange;\n  props.placement;\n  props.menuMatchTriggerWidth;\n  props.menuWidth;\n  var rest = __rest(props, [\"value\", \"defaultValue\", \"children\", \"onChange\", \"placement\", \"menuMatchTriggerWidth\", \"menuWidth\"]);\n  var _a = useDerivedItems(props, __assign(__assign({}, COLLECTION_OPTS), {\n      invalidChildError: \"Can only use Select.Option and Select.OptionGroup as children to Select\",\n      requireItemValue: true,\n      ItemComponent: config.OptionComponent,\n      SectionComponent: config.OptionGroupComponent,\n      itemsProp: \"options\"\n    })),\n    items = _a.items,\n    disabledKeys = _a.disabledKeys;\n  var collectionChildRenderer = React.useCallback(function (child) {\n    return renderAsCollectionChild(child, COLLECTION_OPTS);\n  }, []);\n  var onSelectionChange = React.useMemo(function () {\n    if (onChange) {\n      return function (val) {\n        return onChange(val == null || val === \"null\" ? null : val);\n      };\n    } else {\n      return undefined;\n    }\n  }, [onChange]);\n  return {\n    ariaProps: __assign(__assign(__assign({}, rest), {\n      children: collectionChildRenderer,\n      onSelectionChange: onSelectionChange,\n      items: items,\n      disabledKeys: disabledKeys,\n      defaultSelectedKey: defaultValue\n    }), \"value\" in props && {\n      selectedKey: value !== null && value !== void 0 ? value : null\n    })\n  };\n}\nfunction useSelect(plasmicClass, props, config, ref) {\n  var _a, _b;\n  var _c;\n  if (ref === void 0) {\n    ref = null;\n  }\n  useEnsureSSRProvider();\n  var ariaProps = useAriaSelectProps(props, config).ariaProps;\n  var placement = props.placement;\n  var state = useSelectState(ariaProps);\n  var triggerRef = React.useRef(null);\n  var rootRef = React.useRef(null);\n  var isDisabled = props.isDisabled,\n    name = props.name,\n    menuWidth = props.menuWidth,\n    menuMatchTriggerWidth = props.menuMatchTriggerWidth,\n    autoFocus = props.autoFocus,\n    placeholder = props.placeholder,\n    selectedContent = props.selectedContent;\n  var canvasCtx = usePlasmicCanvasContext();\n  var _d = useSelect$1(ariaProps, state, triggerRef),\n    triggerPressProps = _d.triggerProps,\n    menuProps = _d.menuProps;\n  var triggerProps = usePress(__assign(__assign({}, triggerPressProps), {\n    isDisabled: isDisabled\n  })).pressProps;\n  var triggerContent = ((_c = state.selectedItem) === null || _c === void 0 ? void 0 : _c.value) ? selectedContent !== null && selectedContent !== void 0 ? selectedContent : getChildProp(state.selectedItem.value, \"children\") : null;\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.isOpenVariant,\n    active: state.isOpen\n  }, {\n    def: config.placeholderVariant,\n    active: !state.selectedItem\n  }, {\n    def: config.isDisabledVariant,\n    active: isDisabled\n  }));\n  var triggerContext = React.useMemo(function () {\n    return {\n      triggerRef: triggerRef,\n      state: state,\n      placement: placement,\n      overlayMatchTriggerWidth: menuMatchTriggerWidth,\n      overlayMinTriggerWidth: true,\n      overlayWidth: menuWidth\n    };\n  }, [triggerRef, state, placement, menuMatchTriggerWidth, menuWidth]);\n  var overrides = (_a = {}, _a[config.root] = {\n    props: mergeProps(getStyleProps(props), {\n      ref: rootRef\n    }),\n    wrapChildren: function (children) {\n      return React.createElement(React.Fragment, null, (!canvasCtx || canvasCtx.interactive) && React.createElement(HiddenSelect, {\n        state: state,\n        triggerRef: triggerRef,\n        name: name,\n        isDisabled: isDisabled\n      }), children);\n    }\n  }, _a[config.trigger] = {\n    props: mergeProps(canvasCtx && !canvasCtx.interactive ? {} : triggerProps, {\n      ref: triggerRef,\n      autoFocus: autoFocus,\n      disabled: !!isDisabled,\n      // Don't trigger form submission!\n      type: \"button\"\n    })\n  }, _a[config.overlay] = {\n    wrap: function (content) {\n      return React.createElement(TriggeredOverlayContext.Provider, {\n        value: triggerContext\n      }, content);\n    }\n  }, _a[config.optionsContainer] = {\n    wrap: function (content) {\n      return React.createElement(ListBoxWrapper, {\n        state: state,\n        menuProps: menuProps\n      }, content);\n    }\n  }, _a);\n  var args = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), (_b = {}, _b[config.triggerContentSlot] = triggerContent, _b[config.placeholderSlot] = placeholder, _b[config.optionsSlot] = React.createElement(SelectContext.Provider, {\n    value: state\n  }, Array.from(state.collection).map(function (node) {\n    return renderCollectionNode(node);\n  })), _b));\n  var plumeState = React.useMemo(function () {\n    return {\n      open: function () {\n        return state.open();\n      },\n      close: function () {\n        return state.close();\n      },\n      isOpen: function () {\n        return state.isOpen;\n      },\n      getSelectedValue: function () {\n        return state.selectedKey ? \"\".concat(state.selectedKey) : null;\n      },\n      setSelectedValue: function (key) {\n        return state.setSelectedKey(key);\n      }\n    };\n  }, [state]);\n  React.useImperativeHandle(ref, function () {\n    return {\n      getRoot: function () {\n        return rootRef.current;\n      },\n      getTrigger: function () {\n        return triggerRef.current;\n      },\n      focus: function () {\n        var _a;\n        return (_a = triggerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: function () {\n        var _a;\n        return (_a = triggerRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      },\n      open: function () {\n        return plumeState.open();\n      },\n      close: function () {\n        return plumeState.close();\n      },\n      isOpen: function () {\n        return plumeState.isOpen();\n      },\n      getSelectedValue: function () {\n        return plumeState.getSelectedValue();\n      },\n      setSelectedValue: function (key) {\n        return plumeState.setSelectedValue(key);\n      }\n    };\n  }, [rootRef, triggerRef, plumeState]);\n  return {\n    plasmicProps: {\n      variants: variants,\n      args: args,\n      overrides: overrides\n    },\n    state: plumeState\n  };\n}\nfunction ListBoxWrapper(props) {\n  var state = props.state,\n    menuProps = props.menuProps,\n    children = props.children;\n  var ref = React.useRef(null);\n  var canvasCtx = usePlasmicCanvasContext();\n  var listBoxProps = useListBox(__assign(__assign({}, menuProps), {\n    isVirtualized: false,\n    autoFocus: state.focusStrategy || true,\n    disallowEmptySelection: true\n  }), state, ref).listBoxProps;\n  return React.cloneElement(children, mergeProps(children.props, canvasCtx && !canvasCtx.interactive ? {} : listBoxProps, {\n    style: noOutline(),\n    ref: ref\n  }));\n}\nfunction useSelectOption(plasmicClass, props, config, outerRef) {\n  var _a, _b;\n  if (outerRef === void 0) {\n    outerRef = null;\n  }\n  var state = React.useContext(SelectContext);\n  if (!state) {\n    // If no context, then we are being incorrectly used.  Complain or just don't\n    // bother installing any hooks.  It's okay to violate rules of hooks here\n    // because this instance won't suddenly be used correctly in another render.\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\"You can only use a Select.Option within a Select component.\");\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n  var children = props.children;\n  var canvasCtx = usePlasmicCanvasContext();\n  var rootRef = React.useRef(null);\n  var onRef = mergeRefs(rootRef, outerRef);\n  // We pass in the Node secretly as an undocumented prop from <Select />\n  var node = props._node;\n  var isSelected = state.selectionManager.isSelected(node.key);\n  var isDisabled = state.disabledKeys.has(node.key);\n  var isHighlighted = state.selectionManager.isFocused && state.selectionManager.focusedKey === node.key;\n  var _c = useOption({\n      isSelected: isSelected,\n      isDisabled: isDisabled,\n      \"aria-label\": node && node[\"aria-label\"],\n      key: node.key,\n      shouldSelectOnPressUp: true,\n      shouldFocusOnHover: true,\n      isVirtualized: false,\n      shouldUseVirtualFocus: canvasCtx && !canvasCtx.interactive\n    }, state, rootRef),\n    optionProps = _c.optionProps,\n    labelProps = _c.labelProps;\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.isSelectedVariant,\n    active: isSelected\n  }, {\n    def: config.isDisabledVariant,\n    active: isDisabled\n  }, {\n    def: config.isHighlightedVariant,\n    active: isHighlighted\n  }));\n  var args = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), (_a = {}, _a[config.labelSlot] = children, _a));\n  var overrides = (_b = {}, _b[config.root] = {\n    props: mergeProps(canvasCtx && !canvasCtx.interactive ? {} : optionProps, getStyleProps(props), {\n      ref: onRef,\n      style: noOutline()\n    })\n  }, _b[config.labelContainer] = {\n    props: labelProps\n  }, _b);\n  return {\n    plasmicProps: {\n      variants: variants,\n      args: args,\n      overrides: overrides\n    }\n  };\n}\nfunction useSelectOptionGroup(plasmicClass, props, config) {\n  var _a, _b;\n  var state = React.useContext(SelectContext);\n  // `node` should exist if the OptionGroup was instantiated properly\n  // within a Select\n  var node = props._node;\n  if (!state || !node) {\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\"You can only use a Select.OptionGroup within a Select component.\");\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n  var _c = useListBoxSection({\n      heading: props.title,\n      \"aria-label\": props[\"aria-label\"]\n    }),\n    headingProps = _c.headingProps,\n    groupProps = _c.groupProps;\n  var separatorProps = useSeparator({\n    elementType: \"li\"\n  }).separatorProps;\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.noTitleVariant,\n    active: !props.title\n  }, {\n    def: config.isFirstVariant,\n    active: state.collection.getFirstKey() === node.key\n  }));\n  var args = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), (_a = {}, _a[config.titleSlot] = props.title, _a[config.optionsSlot] = Array.from(node.childNodes).map(function (childNode) {\n    return renderCollectionNode(childNode);\n  }), _a));\n  var overrides = (_b = {}, _b[config.root] = {\n    props: getStyleProps(props)\n  }, _b[config.separator] = {\n    props: __assign({}, separatorProps)\n  }, _b[config.titleContainer] = __assign({\n    props: __assign({\n      role: \"presentation\"\n    }, headingProps)\n  }, !props.title && {\n    render: function () {\n      return null;\n    }\n  }), _b[config.optionsContainer] = {\n    props: __assign({}, groupProps)\n  }, _b);\n  return {\n    plasmicProps: {\n      variants: variants,\n      args: args,\n      overrides: overrides\n    }\n  };\n}\nfunction asAriaSwitchProps(props) {\n  var ariaProps = __assign(__assign({}, props), {\n    isSelected: props.isChecked,\n    defaultSelected: props.defaultChecked\n  });\n  delete ariaProps[\"isChecked\"];\n  delete ariaProps[\"defaultChecked\"];\n  return ariaProps;\n}\nfunction useSwitch(plasmicClass, props, config, ref) {\n  var _a, _b;\n  if (ref === void 0) {\n    ref = null;\n  }\n  var children = props.children,\n    isDisabled = props.isDisabled;\n  useEnsureSSRProvider();\n  var inputRef = React.useRef(null);\n  var rootRef = React.useRef(null);\n  var ariaProps = asAriaSwitchProps(props);\n  var state = useToggleState(ariaProps);\n  var inputProps = useSwitch$1(ariaProps, state, inputRef).inputProps;\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.isDisabledVariant,\n    active: isDisabled\n  }, {\n    def: config.isCheckedVariant,\n    active: state.isSelected\n  }, {\n    def: config.noLabelVariant,\n    active: !children\n  }));\n  var overrides = (_a = {}, _a[config.root] = {\n    as: \"label\",\n    props: mergeProps(getStyleProps(props), {\n      ref: rootRef\n    }),\n    wrapChildren: function (children) {\n      return React.createElement(React.Fragment, null, React.createElement(VisuallyHidden, null, React.createElement(\"input\", __assign({}, inputProps, {\n        ref: inputRef\n      }))), children);\n    }\n  }, _a);\n  var args = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), config.labelSlot ? (_b = {}, _b[config.labelSlot] = children, _b) : {});\n  var plumeState = React.useMemo(function () {\n    return {\n      setChecked: function (checked) {\n        return state.setSelected(checked);\n      }\n    };\n  }, [state]);\n  React.useImperativeHandle(ref, function () {\n    return {\n      getRoot: function () {\n        return rootRef.current;\n      },\n      focus: function () {\n        var _a;\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: function () {\n        var _a;\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      },\n      setChecked: function (checked) {\n        return plumeState.setChecked(checked);\n      }\n    };\n  }, [rootRef, inputRef, plumeState]);\n  return {\n    plasmicProps: {\n      variants: variants,\n      overrides: overrides,\n      args: args\n    },\n    state: plumeState\n  };\n}\nfunction useTextInput(plasmicClass, props, config, ref) {\n  var _a, _b, _c;\n  if (ref === void 0) {\n    ref = null;\n  }\n  var isDisabled = props.isDisabled,\n    startIcon = props.startIcon,\n    endIcon = props.endIcon,\n    showStartIcon = props.showStartIcon,\n    showEndIcon = props.showEndIcon,\n    className = props.className,\n    style = props.style,\n    inputClassName = props.inputClassName,\n    inputStyle = props.inputStyle,\n    rest = __rest(props, [\"isDisabled\", \"startIcon\", \"endIcon\", \"showStartIcon\", \"showEndIcon\", \"className\", \"style\", \"inputClassName\", \"inputStyle\"]);\n  var rootRef = React.useRef(null);\n  var inputRef = React.useRef(null);\n  React.useImperativeHandle(ref, function () {\n    return {\n      focus: function () {\n        var _a;\n        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: function () {\n        var _a;\n        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      },\n      getRoot: function () {\n        return rootRef.current;\n      },\n      getInput: function () {\n        return inputRef.current;\n      },\n      getBoundingClientRect: function () {\n        var _a;\n        return (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n      }\n    };\n  }, [rootRef, inputRef]);\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.showStartIconVariant,\n    active: showStartIcon\n  }, {\n    def: config.showEndIconVariant,\n    active: showEndIcon\n  }, {\n    def: config.isDisabledVariant,\n    active: isDisabled\n  }));\n  var args = __assign(__assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), config.startIconSlot && (_a = {}, _a[config.startIconSlot] = startIcon, _a)), config.endIconSlot && (_b = {}, _b[config.endIconSlot] = endIcon, _b));\n  var overrides = (_c = {}, _c[config.root] = {\n    props: {\n      ref: rootRef,\n      className: className,\n      style: style\n    }\n  }, _c[config.input] = {\n    props: __assign(__assign({}, omit.apply(void 0, __spreadArray(__spreadArray([rest], __read(plasmicClass.internalArgProps.filter(function (prop) {\n      return prop !== \"required\" && prop !== \"onChange\";\n    })), false), __read(plasmicClass.internalVariantProps), false))), {\n      disabled: isDisabled,\n      ref: inputRef,\n      className: inputClassName,\n      style: inputStyle\n    })\n  }, _c);\n  return {\n    plasmicProps: {\n      variants: variants,\n      args: args,\n      overrides: overrides\n    }\n  };\n}\nfunction useTriggeredOverlay(plasmicClass, props, config, outerRef, isDismissable) {\n  var _a, _b;\n  if (outerRef === void 0) {\n    outerRef = null;\n  }\n  if (isDismissable === void 0) {\n    isDismissable = true;\n  }\n  var overlayRef = React.useRef(null);\n  var onOverlayRef = mergeRefs(overlayRef, outerRef, function (ref) {\n    // Workaround for https://github.com/adobe/react-spectrum/issues/1513\n    // to avoid touch events leaking under the overlay when it is closed.\n    if (ref) {\n      ref.addEventListener(\"touchend\", function (e) {\n        e.preventDefault();\n      });\n    }\n  });\n  var context = React.useContext(TriggeredOverlayContext);\n  if (!context) {\n    // If no context, then we are not being correctly used.  Either complain, or\n    // exit early.  It's okay to exit early and break the rules of React hooks\n    // because we won't suddenly have the appropriate context anyway for this instance.\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\"You can only use a triggered overlay with a TriggeredOverlayContext\");\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n  var children = props.children;\n  var triggerRef = context.triggerRef,\n    placement = context.placement,\n    overlayMatchTriggerWidth = context.overlayMatchTriggerWidth,\n    overlayMinTriggerWidth = context.overlayMinTriggerWidth,\n    overlayWidth = context.overlayWidth,\n    state = context.state;\n  // Measure the width of the trigger to inform the width of the menu (below).\n  var _c = __read(React.useState(false), 2),\n    isRendered = _c[0],\n    setRendered = _c[1];\n  var triggerWidth = triggerRef.current && (overlayMatchTriggerWidth || overlayMinTriggerWidth) ? triggerRef.current.offsetWidth : undefined;\n  useIsomorphicLayoutEffect$1(function () {\n    if (!isRendered && triggerRef.current && (overlayMatchTriggerWidth || overlayMinTriggerWidth)) {\n      setRendered(true);\n    }\n  }, [triggerRef, isRendered, overlayMatchTriggerWidth, overlayMinTriggerWidth]);\n  var overlayAriaProps = useOverlay({\n    isOpen: state.isOpen,\n    onClose: state.close,\n    isDismissable: isDismissable,\n    shouldCloseOnBlur: true\n  }, overlayRef).overlayProps;\n  var _d = useOverlayPosition({\n      targetRef: triggerRef,\n      overlayRef: overlayRef,\n      placement: placement !== null && placement !== void 0 ? placement : \"bottom left\",\n      shouldFlip: true,\n      isOpen: state.isOpen,\n      onClose: state.close,\n      containerPadding: 0\n    }),\n    overlayPositionProps = _d.overlayProps,\n    updatePosition = _d.updatePosition,\n    placementAxis = _d.placement;\n  useIsomorphicLayoutEffect$1(function () {\n    if (state.isOpen) {\n      requestAnimationFrame(function () {\n        updatePosition();\n      });\n    }\n  }, [state.isOpen, updatePosition]);\n  var overlayProps = mergeProps({\n    style: {\n      left: \"auto\",\n      right: \"auto\",\n      top: \"auto\",\n      bottom: \"auto\",\n      position: \"absolute\",\n      width: overlayWidth !== null && overlayWidth !== void 0 ? overlayWidth : overlayMatchTriggerWidth ? triggerWidth : \"auto\",\n      minWidth: overlayMinTriggerWidth ? triggerWidth : \"auto\"\n    }\n  }, overlayAriaProps, overlayPositionProps);\n  var variants = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalVariantProps), false))), mergeVariantToggles({\n    def: config.isPlacedTopVariant,\n    active: placementAxis === \"top\"\n  }, {\n    def: config.isPlacedBottomVariant,\n    active: placementAxis === \"bottom\"\n  }, {\n    def: config.isPlacedLeftVariant,\n    active: placementAxis === \"left\"\n  }, {\n    def: config.isPlacedRightVariant,\n    active: placementAxis === \"right\"\n  }));\n  var canvasCtx = usePlasmicCanvasContext();\n  var args = __assign(__assign({}, pick.apply(void 0, __spreadArray([props], __read(plasmicClass.internalArgProps), false))), (_a = {}, _a[config.contentSlot] = canvasCtx && !canvasCtx.interactive ? children : React.createElement(FocusScope, {\n    restoreFocus: true\n  }, React.createElement(DismissButton, {\n    onDismiss: state.close\n  }), children), _a));\n  var overrides = (_b = {}, _b[config.root] = {\n    props: mergeProps(overlayProps, getStyleProps(props), {\n      ref: onOverlayRef\n    }),\n    wrap: function (root) {\n      if (typeof document !== \"undefined\") {\n        return ReactDOM.createPortal(root, document.body);\n      } else {\n        // Possibly being invoked on the server during SSR; no need to\n        // bother with a portal in that case.\n        return root;\n      }\n    }\n  }, _b);\n  return {\n    plasmicProps: {\n      variants: variants,\n      args: args,\n      overrides: overrides\n    }\n  };\n}\nexport { DropdownMenu, PlasmicHead, PlasmicIcon, PlasmicImg, PlasmicLink, PlasmicPageGuard, PlasmicRootProvider, PlasmicSlot, SelectContext, Stack, Trans, TriggeredOverlayContext, classNames, createPlasmicElementProxy, createUseScreenVariants, deriveRenderOpts, ensureGlobalVariants, genTranslatableString, generateOnMutateForSpec, generateStateOnChangeProp, generateStateOnChangePropForCodeComponents, generateStateValueProp, getCurrentInitialValue, getDataProps, getStateCellsInPlasmicProxy, getStateSpecInPlasmicProxy, hasVariant, initializeCodeComponentStates, initializePlasmicStates, is$StateProxy, isPlasmicStateProxy, makeFragment, mergeVariantsWithStates, omit, pick, plasmicHeadMeta, renderPlasmicSlot, resetToInitialValue, set, setPlumeStrictMode, useButton, useCheckbox, useDollarState, useIsSSR, useMenu, useMenuButton, useMenuGroup, useMenuItem, usePlasmicTranslator, useSelect, useSelectOption, useSelectOptionGroup, useSwitch, useTextInput, useTrigger, useTriggeredOverlay, withPlasmicPageGuard, wrapWithClassName };","map":{"version":3,"names":["uuidv4","replace","c","crypto","getRandomValues","Uint8Array","toString","triggerLogin","appId","authorizeEndpoint","redirectUri","sha256","text","encoder","TextEncoder","data","encode","subtle","digest","hashBuffer","_a","sent","hashArray","Array","from","hashHex","map","b","padStart","join","continueTo","window","location","href","state","JSON","stringify","code_verifier","localStorage","setItem","code_challenge","params","URLSearchParams","set","host","url","concat","PlasmicPageGuard","props","minRole","canTriggerLogin","children","unauthorizedComp","dataSourceCtxValue","usePlasmicDataSourceContext","React__default","useEffect","isUserLoading","user","authRedirectUri","canUserViewPage","isArray","roleIds","includes","plasmicQuery","isPlasmicPrepass","call","createElement","Fragment","withPlasmicPageGuard","WrappedComponent","options","PageGuard","__assign","notNil","x","pick","obj","keys","_i","arguments","length","Object","res","keys_1","__values","keys_1_1","next","done","key","value","pickBy","func","_b","entries","_c","_d","__read","val","omit","isSubset","a1","a2","every","chainSingleArgFuncs","funcs","undefined","arg","funcs_1","funcs_1_1","ensure","Error","isString","groupBy","collection","keyFunc","result","collection_1","collection_1_1","push","mapValues","mapper","isBrowser","NONE","Symbol","useIsomorphicLayoutEffect$1","useLayoutEffect","createElementWithChildren","elementType","apply","__spreadArray","ensureNotArray","toChildArray","isReactChild","flatMap","isReactText","child","isValidElement","isReactNode","mergeProps","restProps","rest","restProps_1","restProps_1_1","e_2","mergePropVals","updateRef","ref","isFrozen","current","mergeRefs","refs","refs_1","refs_1_1","name","val1","val2","classNames$1","startsWith","args","getElementTypeName","element","type","comp","displayName","render","renderStack","as","hasGap","__rest","wrappedChildren","wrapFlexContainerChildren","FlexStack_","outerRef","FlexStack","React","forwardRef","makeStackImpl","Stack","assign","div","a","button","h1","h2","h3","h4","h5","h6","label","form","section","head","main","nav","hasVariant","variants","groupName","variant","groupVariants","className","createPlasmicElement","override","defaultRoot","defaultProps","wrapChildrenInFlex","override2","deriveOverride","mergeOverrideProps","root","wrapChildren","wrap","seenElements","Map","createPlasmicElementProxy","defaultElement","isRoot","forNodeName","createPlasmicElementFromJsx","forNode","get","clear","wrapFlexChild","triggerProps","makeFragment","UNSET","defaults","overrides","defaultVal","overrideVal","wrapWithClassName","style","display","mergeVariants","v1","v2","mergeVariantsWithStates","$state","linkedStates","fromEntries","variantGroup","statePath","mergeArgs","mergeFlexOverrides","o1","o2","Set","merged","mergeFlexOverride","fo1","fo2","filter","deriveRenderOpts","config","descendantNames","internalVariantPropNames","internalArgPropNames","reservedPropNames","leftoverProps","isDefaultValue","seenDefaultVariants","ensureGlobalVariants","globalVariantValues","forEach","process","env","NODE_ENV","providerName","toUpperCase","substring","console","warn","PlasmicHeadContext","createContext","PlasmicHead","Head","useContext","headMetadata","HeadMetadataContext","image","title","description","canonical","content","property","rel","plasmicHeadMeta","importName","importPath","isRepeatable","styleSections","PlasmicIcon","PlasmicIconType","IMG_OPTIMIZER_HOST","IMG_SIZES","DEVICE_SIZES","ALL_SIZES","PlasmicImg","src","displayWidth","displayHeight","displayMinWidth","displayMinHeight","displayMaxWidth","displayMaxHeight","quality","loader","imgRef","loading","imgProps","fullWidth","fullHeight","aspectRatio","getImageSizeData","getPixelLength","width","height","srcStr","isSvg","computedDisplayWidth","spacerWidth","spacerHeight","isFinite","DEFAULT_SVG_WIDTH","Math","round","getWidths","minWidth","sizes","widthDescs","imageLoader","getImageLoader","spacerSvg","spacerSvgBase64","globalThis","btoa","Buffer","wrapperStyle","spacerStyle","maxWidth","minHeight","maxHeight","alt","makePicture","opts","supportsUrl","srcSet","wd","transformUrl","format","desc","decoding","endsWith","getClosestPresetSize","nextBiggerIndex","findIndex","w","nextBigger","extra","pixelWidth","pixelMinWidth","max","usefulSizes","size","parsed","parseNumeric","units","num","match","PLASMIC_IMAGE_LOADER","isInternalKey","test","encodeURIComponent","PlasmicLink","Link","usePlasmicLinkMaybe","PlasmicLinkInternal","platform","nextjsProps","isFragment","component","scroll","legacyBehavior","isInternalHref","to","PlasmicTranslatorContext","PlasmicTranslatorContext$1","usePlasmicTranslator","usePlasmicTranslator$1","_t","translator","genTranslatableString","elt","components","componentsCount","getText","node","isIterable","nodeChildren","hasKey","contents","Children","toArray","prefix","tagPrefix","componentId","cloneElement","str","Trans","transKey","warnNoTranslationFunctionAtMostOnce","hasWarned","v","iterator","PlasmicSlot","renderPlasmicSlot","defaultContents","maybeString","maybeAsString","nonEmptyProps","p","listeners","queries","matchScreenVariants","query","matchMedia","matches","curScreenVariants","recalculateScreenVariants","screenVariant","ReactDOM__default","unstable_batchedUpdates","listener","ensureInitCurScreenVariants","addEventListener","createUseScreenVariants","isMulti","screenQueries","useState","updateState","lastScreenVariantsRef","useRef","updateIfChanged","splice","indexOf","PlasmicRootContext","PlasmicRootProvider","userAuthToken","disableLoadingBoundary","suspenseFallback","context","useMemo","dataSourceContextValue","reactMajorVersion","version","split","MaybeWrap","cond","wrapper","children_","DataProvider","hidden","Suspense","fallback","Provider","SSRProvider","PlasmicDataSourceContextProvider","i18n","SafePlasmicLinkProvider","PlasmicLinkProvider","useIsSSR","useIsSSR$1","useHasPlasmicRoot","hasWarnedSSR","useEnsureSSRProvider","hasRoot","useFocused","useFocusRing","within","isTextInput","isFocused","focusProps","useFocusVisible","isFocusVisible","useFocusedWithin","useFocusVisibleWithin","useHover","isHover","setHover","onMouseEnter","onMouseLeave","usePressed","isPressed","setPressed","onMouseDown","onMouseUp","TRIGGER_TO_HOOK","useTrigger","trigger","ARRAY_SYMBOL","PLASMIC_STATE_PROXY_SYMBOL","UNINITIALIZED","_super","__extends","CustomError","msg","_this","constructor","message","stack","CyclicStatesReferencesError","stateAccessCycle","InvalidOperation","UnknownError","StateSpecNode","specs","_specs","_edges","prototype","setSpecs","edges","hasEdge","has","addEdge","clearEdges","values","makeTransition","isNum","isLeaf","getAllSpecs","hasArrayTransition","getSpec","transformPathStringToObj","splitStatePathPart","slice","buildTree","internalSpec","spec","pathObj","path","isRepeated","some","part","rec","currentPath","shallowEqual","nextKey","updateTree","oldNode","nodeSpecs","oldEdges","getSpecTreeLeaves","leaves","findStateCell","pathStr","repetitionIndex","realPath","currRepIndex","pathObj_1","pathObj_1_1","defer","setTimeout","isNum$1","isNaN","canProxy","proxyObjToStateCell","WeakMap","valtioSubscriptions","ensureStateCell","target","stateCell","initialValue","initFunc","initFuncHash","getStateCell","tryGetStateCellFrom$StateRoot","getStateCellFrom$StateRoot","unsubscribeToValtio","$$state","oldValue","stateValues","getVersion","f","delete","subscribeToValtio","maybeValtioProxy","valueProp","$props","onChangeProp","onMutate","unsub","subscribe","refName","$refs","initializeStateValue","initialStateCell","proxyRoot","initialStateName","stateAccess","stateInitializationEnv","visited","add","create$StateProxy","internalStateCell","curr","pop","newValue","invokeInitFuncBackwardsCompatible","overrideEnv","initialSpec","clonedValue","clone","isImmutable","mkUntrackedValue","leafHandlers","currPath","currNode","getNextPath","handlers","deleteProperty","Reflect","receiver","nextPath","nextNode","nextSpec","pathKey","isInitOnChange","initializedLeafPaths","_plasmic_state_init_","ownKeys","baseObject","proxyObj","Proxy","rootSpecTree","o","envFieldsAreNonNill","$ctx","$queries","extractDollarStateParametersBackwardCompatible","useDollarState","setState","mountedRef","isMounted","useCallback","pendingUpdate","forceUpdate","specTreeLeaves","proxy","registrationsQueue","create$State","initVal","currSpec","registerInitFunc","innerEnv","deepEqual","inCanvas","eagerInitializeStates","stateSpecs","newSpec","find","sp","init","newLeaves","arrayEq","old$state_1","getStateCells","oldStateCell","newStateCell","reInitializeState","newInit","useIsomorphicLayoutEffect","resetSpecs","shift","useSnapshot","sync","initializeCodeComponentStates","states","componentHelpers","child$Props","stateHelpers","_loop_1","name_1","plasmicStateName","states_1","states_1_1","generateOnMutateForSpec","stateName","initializePlasmicStates","states_2","states_2_1","name_2","generateStateOnChangeProp","generateStateOnChangePropForCodeComponents","plasmicStatePath","onChangeArgsToValue","generateStateValueProp","isPlasmicStateProxy","is$StateProxy","stateCells","_e","getStateCellsInPlasmicProxy","rootNode","rootPath","isOutside","getStateSpecInPlasmicProxy","isImplicitStateArray","getCurrentInitialValue","resetToInitialValue","i","xs","ys","_","index","l","t","k","assignValue","baseAssignValue","object","defineProperty","configurable","enumerable","writable","eq","other","objValue","hasOwnProperty","isInstanceOfMap","isInstanceOfSet","isRegExp","_f","_g","_h","_j","source","flags","$$typeof","classNames","PLUME_STRICT_MODE","setPlumeStrictMode","mode","mergeVariantToggles","toggles","definedToggles","def","grouped","group","subToggles","active","noOutline","outline","getPlumeType","childType","__plumeType","useButton","plasmicClass","link","isDisabled","startIcon","endIcon","showStartIcon","showEndIcon","submitsForm","internalVariantProps","showStartIconVariant","showEndIconVariant","isDisabledVariant","internalArgProps","startIconSlot","endIconSlot","contentSlot","buttonType","disabled","plasmicProps","getStyleProps","getDefaultPlasmicProps","RE_DATA_PROP","getDataProps","asAriaCheckboxProps","ariaProps","isSelected","isChecked","defaultSelected","defaultChecked","useCheckbox","isIndeterminate","inputRef","rootRef","useToggleState","inputProps","useCheckbox$1","isCheckedVariant","isIndeterminateVariant","noLabelVariant","VisuallyHidden","labelSlot","plumeState","setChecked","checked","setSelected","useImperativeHandle","getRoot","focus","blur","deriveItemsFromProps","itemsProp","ItemComponent","SectionComponent","items","deriveItemsFromItemsProp","deriveItemsFromChildren","disabledKeys","transform","item","textValue","itemPlumeType","sectionPlumeType","invalidChildError","itemCount","sectionCount","ensureValue","propInChild","requireItemValue","cloneChild","flattenedChildren","childKey","getItemLikeKey","getChildProp","useDerivedItems","useDerivedItemsFromChildren","renderCollectionNode","rendered","_node","renderAsCollectionChild","plumeType","option","Item","Section","prop","componentProps","TriggeredOverlayContext","MenuContext","COLLECTION_OPTS$1","asAriaMenuProps","collectionChildRenderer","useMenu","triggerContext","useTreeState","menuListRef","menuProps","useMenu$1","autoFocus","contextValue","itemsContainer","itemsSlot","getFocusedValue","selectionManager","focusedKey","setFocusedValue","setFocusedKey","useMenuGroup","useMenuSection","heading","headingProps","groupProps","separatorProps","useSeparator","noTitleVariant","isFirstVariant","getFirstKey","titleSlot","childNodes","childNode","separator","titleContainer","role","useMenuItem","menuContext","onAction","isHighlighted","useMenuItem$1","onClose","close","isVirtualized","closeOnSelect","menuItemProps","labelProps","isHighlightedVariant","labelContainer","useMenuTrigger","triggerRef","placement","menuMatchTriggerWidth","menuWidth","menu","useMenuTrigger$1","triggerPressProps","menuTriggerProps","usePress","pressProps","makeMenu","realMenu","focusStrategy","overlayMatchTriggerWidth","overlayMinTriggerWidth","overlayWidth","DropdownMenu","isOpen","defaultOpen","onOpenChange","useMenuTriggerState","useMenuButton","triggerFocusProps","useFocusable","focusableProps","isOpenVariant","menuSlot","open","getTrigger","SelectContext","COLLECTION_OPTS","useAriaSelectProps","defaultValue","onChange","OptionComponent","OptionGroupComponent","onSelectionChange","defaultSelectedKey","selectedKey","useSelect","useSelectState","placeholder","selectedContent","canvasCtx","usePlasmicCanvasContext","useSelect$1","triggerContent","selectedItem","placeholderVariant","interactive","HiddenSelect","overlay","optionsContainer","ListBoxWrapper","triggerContentSlot","placeholderSlot","optionsSlot","getSelectedValue","setSelectedValue","setSelectedKey","listBoxProps","useListBox","disallowEmptySelection","useSelectOption","onRef","useOption","shouldSelectOnPressUp","shouldFocusOnHover","shouldUseVirtualFocus","optionProps","isSelectedVariant","useSelectOptionGroup","useListBoxSection","asAriaSwitchProps","useSwitch","useSwitch$1","useTextInput","inputClassName","inputStyle","getInput","getBoundingClientRect","input","useTriggeredOverlay","isDismissable","overlayRef","onOverlayRef","e","preventDefault","isRendered","setRendered","triggerWidth","offsetWidth","overlayAriaProps","useOverlay","shouldCloseOnBlur","overlayProps","useOverlayPosition","targetRef","shouldFlip","containerPadding","overlayPositionProps","updatePosition","placementAxis","requestAnimationFrame","left","right","top","bottom","position","isPlacedTopVariant","isPlacedBottomVariant","isPlacedLeftVariant","isPlacedRightVariant","FocusScope","restoreFocus","DismissButton","onDismiss","document","ReactDOM","createPortal","body"],"sources":["C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\auth\\PlasmicPageGuard.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\common.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\react-utils.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\Stack.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\elements.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\global-variants.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\PlasmicHead\\index.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\PlasmicIcon.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\PlasmicImg\\index.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\PlasmicLink.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\translation.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\PlasmicSlot.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\screen-variants.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\ssr.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\render\\triggers.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\states\\types.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\states\\errors.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\states\\graph.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\states\\valtio.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\states\\helpers.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\index-common.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\plume-utils.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\button\\index.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\props-utils.ts","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\checkbox\\index.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\collection-utils.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\triggered-overlay\\context.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\menu\\context.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\menu\\menu.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\menu\\menu-group.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\menu\\menu-item.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\menu-button\\menu-trigger.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\menu-button\\DropdownMenu.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\menu-button\\menu-button.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\select\\context.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\select\\select.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\select\\select-option.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\select\\select-option-group.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\switch\\index.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\text-input\\index.tsx","C:\\Users\\rewac\\OneDrive\\Documents\\GitHub\\scatch-store.me\\node_modules\\@plasmicapp\\react-web\\src\\plume\\triggered-overlay\\triggered-overlay.tsx"],"sourcesContent":["import { usePlasmicDataSourceContext } from \"@plasmicapp/data-sources-context\";\nimport * as plasmicQuery from \"@plasmicapp/query\";\nimport React from \"react\";\n\n// https://stackoverflow.com/a/2117523\nfunction uuidv4() {\n  // eslint-disable-next-line\n  // @ts-ignore\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n    (\n      c ^\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n    ).toString(16)\n  );\n}\n\nasync function triggerLogin(\n  appId: string,\n  authorizeEndpoint: string,\n  redirectUri?: string\n) {\n  async function sha256(text: string) {\n    const encoder = new TextEncoder();\n    const data = encoder.encode(text);\n    const hashBuffer = await crypto.subtle.digest(\"SHA-256\", data);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    const hashHex = hashArray\n      .map((b) => b.toString(16).padStart(2, \"0\"))\n      .join(\"\");\n    return hashHex;\n  }\n\n  const continueTo = window.location.href;\n  const state = JSON.stringify({ continueTo });\n  const code_verifier = uuidv4();\n  localStorage.setItem(\"code_verifier\", code_verifier);\n  const code_challenge = await sha256(code_verifier);\n\n  const params = new URLSearchParams();\n  params.set(\"client_id\", appId);\n  params.set(\"state\", state);\n  params.set(\"response_type\", \"code\");\n  params.set(\"code_challenge\", code_challenge);\n  params.set(\"code_challenge_method\", \"S256\");\n  params.set(\"origin_host\", window.location.host);\n\n  if (redirectUri) {\n    params.set(\"redirect_uri\", redirectUri);\n  }\n\n  const url = `${authorizeEndpoint}?${params.toString()}`;\n  window.location.href = url;\n}\n\ninterface PlasmicPageGuardProps {\n  appId: string;\n  authorizeEndpoint: string;\n  minRole?: string;\n  canTriggerLogin: boolean;\n  children: React.ReactNode;\n  unauthorizedComp?: React.ReactNode;\n}\n\nexport function PlasmicPageGuard(props: PlasmicPageGuardProps) {\n  const {\n    appId,\n    authorizeEndpoint,\n    minRole,\n    canTriggerLogin,\n    children,\n    unauthorizedComp,\n  } = props;\n\n  const dataSourceCtxValue = usePlasmicDataSourceContext();\n\n  React.useEffect(() => {\n    if (canTriggerLogin) {\n      if (\n        minRole &&\n        dataSourceCtxValue &&\n        \"isUserLoading\" in dataSourceCtxValue &&\n        !dataSourceCtxValue.isUserLoading &&\n        !dataSourceCtxValue.user\n      ) {\n        triggerLogin(\n          appId,\n          authorizeEndpoint,\n          dataSourceCtxValue.authRedirectUri\n        );\n      }\n    }\n  }, [dataSourceCtxValue, appId, authorizeEndpoint, canTriggerLogin, minRole]);\n\n  function canUserViewPage() {\n    if (!minRole) {\n      return true;\n    }\n    if (!dataSourceCtxValue) {\n      return false;\n    }\n    if (!dataSourceCtxValue.user) {\n      return false;\n    }\n    if (!(\"roleIds\" in dataSourceCtxValue.user)) {\n      return false;\n    }\n    if (!Array.isArray(dataSourceCtxValue.user.roleIds)) {\n      return false;\n    }\n    return dataSourceCtxValue.user.roleIds.includes(minRole);\n  }\n\n  // If we are in prepass, PlasmicPageGuard should not render anything\n  // it's expected that pages are only equipped with PlasmicPageGuard\n  // when it's known that it will disable prepass/prefetching\n  if (plasmicQuery.isPlasmicPrepass?.()) {\n    return null;\n  }\n\n  /*\n  PlasmicPageGuard has three cases:\n  1. No value of dataSourceCtxValue, user is loading or a trigger login should be performed.\n     In this case, we don't want to render the children or the access denied message.\n     While the user is loading we look to see if don't have a user value as we can be in a\n     revalidate state.\n  2. The user doesn't have access to the page in which we show an access denied message.\n  3. The user has access to the page in which we render the children.\n  */\n  if (\n    !dataSourceCtxValue ||\n    (dataSourceCtxValue.isUserLoading && !dataSourceCtxValue.user) ||\n    (!dataSourceCtxValue.user && minRole && canTriggerLogin)\n  ) {\n    return null;\n  }\n\n  if (!canUserViewPage()) {\n    if (unauthorizedComp) {\n      return <>{unauthorizedComp}</>;\n    }\n\n    return <div>You don't have access to this page</div>;\n  }\n\n  return <>{children}</>;\n}\n\nexport function withPlasmicPageGuard<P extends object>(\n  WrappedComponent: React.ComponentType<P>,\n  options: Omit<PlasmicPageGuardProps, \"children\">\n) {\n  const PageGuard: React.FC<P> = (props) => (\n    <PlasmicPageGuard {...options}>\n      <WrappedComponent {...props} />\n    </PlasmicPageGuard>\n  );\n  return PageGuard;\n}\n","export function notNil<T>(x: T | undefined | null): x is T {\n  return x != null;\n}\n\nexport function pick<T extends {}>(\n  obj: T,\n  ...keys: (string | number | symbol)[]\n): Partial<T> {\n  if (Object.keys(obj).length === 0) {\n    return obj;\n  }\n  const res: any = {};\n  for (const key of keys) {\n    if (key in obj) {\n      res[key] = obj[key as keyof T];\n    }\n  }\n  return res as Partial<T>;\n}\n\nexport function pickBy<T extends {}>(\n  obj: T,\n  func: (key: string, val: any) => boolean\n): Partial<T> {\n  const res: any = {};\n  for (const [key, val] of Object.entries(obj)) {\n    if (func(key, val)) {\n      res[key] = obj[key as keyof T];\n    }\n  }\n  return res as Partial<T>;\n}\n\nexport function omit<T extends {}>(obj: T, ...keys: (keyof T)[]): Partial<T> {\n  if (Object.keys(obj).length === 0) {\n    return obj;\n  }\n  const res: Partial<T> = {};\n  for (const key of Object.keys(obj) as (keyof T)[]) {\n    if (!keys.includes(key)) {\n      res[key] = obj[key];\n    }\n  }\n  return res;\n}\n\nexport function isSubset<T>(a1: T[], a2: T[]) {\n  return a1.every((x) => a2.includes(x));\n}\n\nexport function chainSingleArgFuncs<A>(...funcs: ((arg: A) => A)[]) {\n  if (funcs.length === 0) {\n    return undefined;\n  }\n  return (arg: A) => {\n    let res: A = arg;\n    for (const func of funcs) {\n      res = func(res);\n    }\n    return res;\n  };\n}\n\nexport function ensure<T>(x: T | null | undefined): T {\n  if (x === null || x === undefined) {\n    debugger;\n    throw new Error(`Value must not be undefined or null`);\n  } else {\n    return x;\n  }\n}\n\nexport function isString(x: any): x is string {\n  return typeof x === \"string\";\n}\n\nexport function groupBy<T>(\n  collection: T[],\n  keyFunc: (x: T) => string\n): Record<string, T[]> {\n  const result: Record<string, T[]> = {};\n  for (const obj of collection) {\n    const key = keyFunc(obj);\n    if (key in result) {\n      result[key].push(obj);\n    } else {\n      result[key] = [obj];\n    }\n  }\n  return result;\n}\n\nexport function mapValues<V, V2>(\n  obj: Record<string, V>,\n  mapper: (value: V) => V2\n): Record<string, V2> {\n  const result: Record<string, V2> = {};\n  for (const key in obj) {\n    result[key] = mapper(obj[key]);\n  }\n  return result;\n}\n","import classNames from \"classnames\";\nimport React from \"react\";\n\nexport const isBrowser = typeof window !== \"undefined\";\nexport const NONE = Symbol(\"NONE\");\n\nexport const useIsomorphicLayoutEffect = isBrowser\n  ? React.useLayoutEffect\n  : React.useEffect;\n\nexport function createElementWithChildren(\n  elementType: any,\n  props: any,\n  children: React.ReactNode\n) {\n  if (Array.isArray(children)) {\n    return React.createElement(\n      elementType,\n      props,\n      ...children\n    ) as React.ReactElement;\n  } else if (children || \"children\" in props) {\n    // Only call React.createElement with `children` if there are actual children,\n    // or if there was an explicit (albeit undefined) children passed via\n    // props.  Otherwise, if you pass `undefined` as the children argument\n    // to React.createElement, the created element will have prop {children: undefined}.\n    // If the `root` is an PlasmicGeneratedComponent, and these props with {children: undefined}\n    // are used, then it will be taken as a `children` override, and will thus blank out\n    // everything under the root node.\n    return React.createElement(elementType, props, children);\n  } else {\n    return React.createElement(elementType, props);\n  }\n}\n\nexport function ensureNotArray(children: React.ReactNode) {\n  if (Array.isArray(children)) {\n    if (children.length === 1) {\n      return children[0];\n    } else {\n      return React.createElement(React.Fragment, {}, ...children);\n    }\n  } else {\n    return children;\n  }\n}\n\n/**\n * Flattens ReactNode into an array of ReactChild, but does NOT replace\n * missing keys with array index, as React.Children.toArray() does.\n */\nexport function toChildArray(children: React.ReactNode): React.ReactChild[] {\n  if (isReactChild(children)) {\n    return [children];\n  } else if (Array.isArray(children)) {\n    return children.flatMap(toChildArray);\n  } else {\n    return [];\n  }\n}\n\nexport function isReactText(child: React.ReactNode): child is React.ReactText {\n  return typeof child === \"string\" || typeof child === \"number\";\n}\n\nexport function isReactChild(\n  child: React.ReactNode\n): child is React.ReactChild {\n  return React.isValidElement(child) || isReactText(child);\n}\n\nexport function isReactFragment(\n  child: React.ReactNode\n): child is React.ReactElement {\n  return React.isValidElement(child) && child.type === React.Fragment;\n}\n\nexport function isReactNode(x: any) {\n  return (\n    typeof x === \"string\" || typeof x === \"number\" || React.isValidElement(x)\n  );\n}\n\n// From https://stackoverflow.com/questions/54775790/forcing-excess-property-checking-on-variable-passed-to-typescript-function\n// We also wrap the error message in a Partial<> because otherwise Jetbrains IDEs will autocomplete the component with all the string methods as props - see https://github.com/plasmicapp/plasmic/issues/16.\nexport type StrictProps<T, TExpected> = Exclude<\n  keyof T,\n  keyof TExpected\n> extends never\n  ? {}\n  : Partial<\"Unexpected extraneous props\">;\n\nexport type HTMLElementRefOf<T extends keyof JSX.IntrinsicElements> = Exclude<\n  React.ComponentProps<T>[\"ref\"],\n  string\n>;\n\nexport function mergeProps(\n  props: Record<string, any>,\n  ...restProps: Record<string, any>[]\n): Record<string, any> {\n  if (restProps.every((rest) => Object.keys(rest).length === 0)) {\n    return props;\n  }\n\n  const result = { ...props };\n\n  for (const rest of restProps) {\n    for (const key of Object.keys(rest)) {\n      result[key] = mergePropVals(key, result[key], rest[key]);\n    }\n  }\n\n  return result;\n}\n\nfunction updateRef<T>(ref: React.Ref<T> | undefined, value: T | null) {\n  if (!ref) {\n    return;\n  }\n\n  if (typeof ref === \"function\") {\n    ref(value);\n  } else {\n    if (!Object.isFrozen(ref)) {\n      (ref as React.MutableRefObject<T | null>).current = value;\n    }\n  }\n}\n\nexport function mergeRefs<T>(...refs: (React.Ref<T> | undefined)[]) {\n  return (value: T) => {\n    for (const ref of refs) {\n      updateRef(ref, value);\n    }\n  };\n}\n\nexport function mergePropVals(name: string, val1: any, val2: any): any {\n  if (val1 === NONE || val2 === NONE) {\n    // The NONE sentinel always skips all merging and returns null\n    return null;\n  } else if (val1 == null) {\n    // If either of them is nil, prefer the other\n    return val2;\n  } else if (val2 == null) {\n    return val1;\n  } else if (name === \"className\") {\n    // Special case for className -- always combine both class names\n    return classNames(val1, val2);\n  } else if (name === \"style\") {\n    // Special case for style -- always shallow-merge style dicts\n    return { ...val1, ...val2 };\n  } else if (name === \"ref\") {\n    // Special case for ref\n    return mergeRefs(val1, val2);\n  } else if (typeof val1 !== typeof val2) {\n    // If the type of the two values are different, then no way to merge them.\n    // Prefer val2.\n    return val2;\n  } else if (name.startsWith(\"on\") && typeof val1 === \"function\") {\n    // Special case for event handlers -- always call both handlers\n    return (...args: any[]) => {\n      let res: any;\n      if (typeof val1 === \"function\") {\n        res = val1(...args);\n      }\n      if (typeof val2 === \"function\") {\n        res = val2(...args);\n      }\n      return res;\n    };\n  } else {\n    // For all else, prefer val2\n    return val2;\n  }\n}\n\nexport function getElementTypeName(element: React.ReactElement) {\n  if (typeof element.type === \"string\") {\n    return element.type;\n  } else {\n    const comp = element.type as any;\n    return comp.displayName ?? comp.name ?? comp.render?.name ?? \"Component\";\n  }\n}\n","import * as React from \"react\";\nimport { createElementWithChildren } from \"../react-utils\";\nimport { wrapFlexContainerChildren } from \"./elements\";\n\nfunction renderStack<T extends keyof JSX.IntrinsicElements>(\n  as: T,\n  props: React.ComponentProps<T>,\n  hasGap: boolean | undefined,\n  ref: React.Ref<any>\n) {\n  const { children, ...rest } = props;\n  const wrappedChildren = wrapFlexContainerChildren(children, hasGap ?? false);\n  return createElementWithChildren(as, { ref, ...rest }, wrappedChildren);\n}\n\nfunction FlexStack_<T extends keyof JSX.IntrinsicElements = \"div\">(\n  props: { as?: T; hasGap?: boolean } & React.ComponentProps<T>,\n  outerRef: React.Ref<any>\n) {\n  const { as, hasGap, ...rest } = props;\n  return renderStack(\n    as ?? \"div\",\n    rest as React.ComponentProps<T>,\n    hasGap,\n    outerRef\n  );\n}\n\nconst FlexStack = React.forwardRef(FlexStack_) as <\n  T extends keyof JSX.IntrinsicElements = \"div\"\n>(\n  props: { as?: T; hasGap?: boolean } & React.ComponentProps<T>\n) => React.ReactElement;\n\nconst makeStackImpl = <T extends keyof JSX.IntrinsicElements>(as: T) => {\n  return React.forwardRef(\n    (\n      props: React.ComponentProps<T> & { hasGap?: boolean },\n      ref: React.Ref<any>\n    ) => {\n      const { hasGap, ...rest } = props;\n      return renderStack(as, rest as React.ComponentProps<T>, hasGap, ref);\n    }\n  ) as React.FC<React.ComponentProps<T> & { hasGap?: boolean }>;\n};\n\nexport const Stack = Object.assign(FlexStack, {\n  div: makeStackImpl(\"div\"),\n  a: makeStackImpl(\"a\"),\n  button: makeStackImpl(\"button\"),\n  h1: makeStackImpl(\"h1\"),\n  h2: makeStackImpl(\"h2\"),\n  h3: makeStackImpl(\"h3\"),\n  h4: makeStackImpl(\"h4\"),\n  h5: makeStackImpl(\"h5\"),\n  h6: makeStackImpl(\"h6\"),\n  label: makeStackImpl(\"label\"),\n  form: makeStackImpl(\"form\"),\n  section: makeStackImpl(\"section\"),\n  head: makeStackImpl(\"head\"),\n  main: makeStackImpl(\"main\"),\n  nav: makeStackImpl(\"nav\"),\n});\n","import get from \"dlv\";\nimport * as React from \"react\";\nimport { chainSingleArgFuncs, isSubset, notNil, omit, pick } from \"../common\";\nimport {\n  createElementWithChildren,\n  ensureNotArray,\n  isReactNode,\n  mergeProps,\n  mergePropVals,\n  NONE,\n} from \"../react-utils\";\nimport { $State } from \"../states\";\nimport { Stack } from \"./Stack\";\n\ninterface Variants {\n  [vg: string]: any;\n}\n\nexport type MultiChoiceArg<M extends string> = M | M[] | { [v in M]?: boolean };\nexport type SingleChoiceArg<M extends string> = M;\nexport type SingleBooleanChoiceArg<M extends string> = M | boolean;\n\ninterface OverrideTwiddle {\n  wrapChildren?: (children: React.ReactNode) => React.ReactNode;\n  wrap?: (node: React.ReactNode) => React.ReactNode;\n}\n\nexport type DefaultOverride<C extends React.ElementType> = {\n  type: \"default\";\n  props?: Partial<React.ComponentProps<C>>;\n} & OverrideTwiddle;\n\nexport type AsOverride<C extends React.ElementType> = {\n  type: \"as\";\n  as: C;\n  props?: Partial<React.ComponentProps<C>>;\n} & OverrideTwiddle;\n\nexport type RenderOverride<C extends React.ElementType> = {\n  type: \"render\";\n  render: (props: React.ComponentProps<C>, Comp: C) => React.ReactNode;\n  props?: Partial<React.ComponentProps<C>>;\n} & OverrideTwiddle;\n\nexport type Override<DefaultElementType extends React.ElementType> =\n  | DefaultOverride<DefaultElementType>\n  | AsOverride<any>\n  | RenderOverride<DefaultElementType>;\n\nexport type Overrides = Record<string, Flex<any>>;\nexport type Args = Record<string, any>;\n\n// Flex provides a more \"flexible\" way to specify bindings.\nexport type Flex<DefaultElementType extends React.ElementType> =\n  // Fully-specified bindings\n  | (Omit<DefaultOverride<DefaultElementType>, \"type\"> & {\n      as?: never;\n      render?: never;\n    })\n  | Omit<AsOverride<any>, \"type\">\n  | (Omit<RenderOverride<DefaultElementType>, \"type\"> & {\n      as?: never;\n    })\n\n  // Valid ReactNode, used as children.\n  // Note: We use React.ReactChild instead of React.ReactNode because we don't want to include\n  // React.ReactFragment, which includes {}, which would allow any object to be passed in,\n  // defeating any attempt to type-check!\n  | React.ReactChild\n\n  // Ignored\n  | null\n  | undefined\n\n  // dict of props for the DefaultElementType\n  | (Partial<React.ComponentProps<DefaultElementType>> & {\n      wrap?: never;\n      wrapChildren?: never;\n      props?: never;\n      as?: never;\n      render?: never;\n    })\n\n  // render function taking in dict of props for the DefaultElementType\n  | ((props: React.ComponentProps<DefaultElementType>) => React.ReactNode);\n\nexport function hasVariant<V extends Variants>(\n  variants: V | undefined,\n  groupName: keyof V,\n  variant: string\n) {\n  if (variants == null) {\n    return false;\n  }\n  const groupVariants = variants[groupName];\n  if (groupVariants == null) {\n    return false;\n  } else if (groupVariants === true) {\n    return variant === groupName;\n  } else if (groupVariants === false) {\n    return false;\n  } else if (Array.isArray(groupVariants)) {\n    return groupVariants.includes(variant);\n  } else if (typeof groupVariants === \"string\") {\n    return groupVariants === variant;\n  } else {\n    return (\n      groupVariants[variant] !== undefined && groupVariants[variant] !== false\n    );\n  }\n}\n\nexport function wrapFlexContainerChildren(\n  children: React.ReactNode,\n  hasGap: boolean\n) {\n  // We need to always wrap the children, even if there are no gaps, because\n  // otherwise if we toggle between with and without gap, React reconciliation\n  // will blow away the children tree and all state if we switch from having\n  // a wrapper and not.\n  const className = hasGap ? \"__wab_flex-container ρfc\" : \"__wab_passthrough\";\n  if (!children) {\n    return null;\n  } else if (Array.isArray(children)) {\n    return React.createElement(\"div\", { className }, ...children);\n  } else {\n    return React.createElement(\"div\", { className }, children);\n  }\n}\n\nfunction createPlasmicElement<DefaultElementType extends React.ElementType>(\n  override: Flex<DefaultElementType>,\n  defaultRoot: DefaultElementType,\n  defaultProps: Partial<React.ComponentProps<DefaultElementType>>,\n  wrapChildrenInFlex?: boolean\n): React.ReactNode | null {\n  if (\n    !override ||\n    (typeof override === \"object\" && Object.keys(override).length === 0)\n  ) {\n    return createElementWithChildren(\n      defaultRoot,\n      defaultProps,\n      defaultProps.children\n    );\n  }\n  const override2 = deriveOverride(override);\n  const props = mergeOverrideProps(defaultProps, override2.props);\n  if (override2.type === \"render\") {\n    return override2.render(\n      props as React.ComponentProps<DefaultElementType>,\n      defaultRoot\n    );\n  }\n\n  let root = defaultRoot;\n  if (override2.type === \"as\" && override2.as) {\n    if (defaultRoot === (Stack as React.ElementType)) {\n      // If there was an \"as\" override specified, but the default type is\n      // a Stack, then we don't want to switch to using \"as\" as the root,\n      // because then we'd lose the flex wrapper that Stack provides.\n      // Instead, we specify the \"as\" as the \"as\" prop to Stack.\n      props.as = override2.as;\n    } else {\n      root = override2.as;\n    }\n  }\n\n  let children = props.children;\n\n  if (override2.wrapChildren) {\n    children = override2.wrapChildren(ensureNotArray(children));\n  }\n\n  if (wrapChildrenInFlex) {\n    // For legacy, we still support data-plasmic-wrap-flex-children\n    children = wrapFlexContainerChildren(children, true);\n  }\n\n  let result = createElementWithChildren(root, props, children);\n\n  if (override2.wrap) {\n    result = override2.wrap(result) as React.ReactElement;\n  }\n\n  return result;\n}\n\n// We use data-plasmic-XXX attributes for custom properties since Typescript doesn't\n// support type check on jsx pragma. See https://github.com/microsoft/TypeScript/issues/21699\n// for more info.\nconst seenElements = new Map<string, React.ReactNode>();\nexport function createPlasmicElementProxy<\n  DefaultElementType extends React.ElementType\n>(\n  defaultElement: DefaultElementType,\n  props: Partial<React.ComponentProps<DefaultElementType>>,\n  ...children: React.ReactNode[]\n) {\n  // We use seenElements to keep track of elements that has been rendered by\n  // createPlasmicElementProxy().  When a JSX tree is evaluated, the JSX factory\n  // is invoked from the leaf to the root as the last call.  So we can store\n  // all the elements we've created until we encounter the leaf, at which point\n  // we will clear this map.  We are guaranteed that this map will only contain\n  // elements from one Plasmic* component at a time, because we're just creating\n  // elements and not \"rendering\" at this point; even if this JSX tree references\n  // other Plasmic* elements, we'll just create an element referencing that component,\n  // rather than following into the content of that component.\n  //\n  // TODO: is this ConcurrentMode friendly?\n\n  if (props == null) {\n    props = {};\n  }\n\n  const name = props[\"data-plasmic-name\"];\n  const isRoot = props[\"data-plasmic-root\"];\n  const forNodeName = props[\"data-plasmic-for-node\"];\n\n  delete props[\"data-plasmic-name\"];\n  delete props[\"data-plasmic-root\"];\n  delete props[\"data-plasmic-for-node\"];\n\n  const element = createPlasmicElementFromJsx(\n    defaultElement,\n    props,\n    ...children\n  );\n  if (name) {\n    seenElements.set(name, element);\n  }\n\n  if (isRoot) {\n    // If this is the root, and we requested a specific node by specifying data-plasmic-for-node,\n    // then return that node instead\n    const forNode = forNodeName\n      ? seenElements.get(forNodeName) ?? null\n      : element;\n\n    // Clear out the seenElements map, as we're done rendering this Plasmic* component.\n    seenElements.clear();\n    return forNode;\n  }\n  return element;\n}\n\nfunction createPlasmicElementFromJsx<\n  DefaultElementType extends React.ElementType\n>(\n  defaultElement: DefaultElementType,\n  props: Partial<React.ComponentProps<DefaultElementType>>,\n  ...children: React.ReactNode[]\n) {\n  const override = props[\"data-plasmic-override\"];\n  const wrapFlexChild = props[\"data-plasmic-wrap-flex-child\"];\n  const triggerProps = (props[\"data-plasmic-trigger-props\"] ??\n    []) as React.HTMLAttributes<HTMLElement>[];\n  delete props[\"data-plasmic-override\"];\n  delete props[\"data-plasmic-wrap-flex-child\"];\n  delete props[\"data-plasmic-trigger-props\"];\n  return createPlasmicElement(\n    override,\n    defaultElement,\n    mergeProps(\n      props,\n      children.length === 0\n        ? {}\n        : { children: children.length === 1 ? children[0] : children },\n      ...triggerProps\n    ) as any,\n    wrapFlexChild\n  );\n}\n\nexport function makeFragment(...children: React.ReactNode[]) {\n  return React.createElement(React.Fragment, {}, ...children);\n}\n\nexport const UNSET = Symbol(\"UNSET\");\n\nfunction mergeOverrideProps(\n  defaults: Record<string, any>,\n  overrides?: Record<string, any>\n): Record<string, any> {\n  if (!overrides) {\n    return defaults;\n  }\n\n  const result = { ...defaults };\n\n  for (const key of Object.keys(overrides)) {\n    const defaultVal = defaults[key];\n    let overrideVal = overrides[key];\n    if (overrideVal === UNSET) {\n      delete result[key];\n    } else {\n      // We use the NONE sentinel if the overrideVal is nil, and is not one of the\n      // props that we merge by default -- which are className, style, and\n      // event handlers.  This means for all other \"normal\" props -- like children,\n      // title, etc -- a nil value will unset the default.\n      if (\n        overrideVal == null &&\n        key !== \"className\" &&\n        key !== \"style\" &&\n        !(key.startsWith(\"on\") && typeof defaultVal === \"function\")\n      ) {\n        overrideVal = NONE;\n      }\n      result[key] = mergePropVals(key, defaultVal, overrideVal);\n    }\n  }\n\n  return result;\n}\n\nexport function wrapWithClassName(element: React.ReactNode, className: string) {\n  const key = React.isValidElement(element)\n    ? element.key || undefined\n    : undefined;\n  return React.createElement(\n    \"div\",\n    {\n      key,\n      className,\n      style: {\n        display: \"grid\",\n      },\n    },\n    element\n  );\n}\n\nfunction deriveOverride<C extends React.ElementType>(x: Flex<C>): Override<C> {\n  if (!x) {\n    // undefined Binding is an empty Binding\n    return {\n      type: \"default\",\n      props: {} as any,\n    };\n  } else if (isReactNode(x)) {\n    // If ReactNode, then assume this is the children\n    return {\n      type: \"default\",\n      props: {\n        children: x,\n      } as any,\n    };\n  } else if (typeof x === \"object\") {\n    // If any of the overrideKeys is a key of this object, then assume\n    // this is a full Override\n    if (\"as\" in x) {\n      return {\n        ...x,\n        props: x.props || {},\n        type: \"as\",\n      } as any;\n    } else if (\"render\" in x) {\n      return {\n        ...x,\n        type: \"render\",\n      } as any;\n    } else if (\"props\" in x) {\n      return {\n        ...x,\n        props: x.props || {},\n        type: \"default\",\n      };\n    } else if (isSubset(Object.keys(x), [\"wrap\", \"wrapChildren\"])) {\n      // Only twiddling functions present, so assume no props overrides\n      // (otherwise we'd assume these were props).\n      return {\n        ...x,\n        props: {},\n        type: \"default\",\n      };\n    }\n\n    // Else, assume this is just a props object.\n    return {\n      type: \"default\",\n      props: x as any,\n    };\n  } else if (typeof x === \"function\") {\n    return {\n      type: \"render\",\n      render: x,\n    };\n  }\n\n  throw new Error(`Unexpected override: ${x}`);\n}\n\nfunction mergeVariants<V extends Variants>(\n  v1: Partial<V> | undefined,\n  v2: Partial<V> | undefined\n): Partial<V> {\n  if (!v1 || !v2) {\n    return v1 || v2 || {};\n  }\n  return { ...v1, ...v2 };\n}\n\nexport function mergeVariantsWithStates(\n  variants: Variants,\n  $state: $State,\n  linkedStates: {\n    variantGroup: string;\n    statePath: (string | number)[];\n  }[]\n): Variants {\n  return {\n    ...variants,\n    ...Object.fromEntries(\n      linkedStates.map(({ variantGroup, statePath }) => [\n        variantGroup,\n        get($state, statePath),\n      ])\n    ),\n  };\n}\n\nfunction mergeArgs<A extends Args>(\n  a1: Partial<A> | undefined,\n  a2: Partial<A> | undefined\n): Partial<A> {\n  if (!a1 || !a2) {\n    return a1 || a2 || {};\n  }\n  return { ...a1, ...a2 };\n}\n\nfunction mergeFlexOverrides<O extends Overrides>(\n  o1: Partial<O>,\n  o2: Partial<O> | undefined\n): Partial<O> {\n  if (!o2) {\n    return o1;\n  }\n  const keys = Array.from(new Set([...Object.keys(o1), ...Object.keys(o2)]));\n  const merged: Record<string, any> = {};\n  for (const key of keys) {\n    merged[key] = mergeFlexOverride(o1[key], o2[key]);\n  }\n  return merged as Partial<O>;\n}\n\nfunction mergeFlexOverride<C extends React.ElementType<any>>(\n  fo1: Flex<C> | undefined,\n  fo2: Flex<C> | undefined\n): Flex<C> | undefined {\n  if (!fo1) {\n    return fo2;\n  }\n  if (!fo2) {\n    return fo1;\n  }\n\n  const o1 = deriveOverride(fo1);\n  const o2 = deriveOverride(fo2);\n  const wrap = chainSingleArgFuncs(...[o1.wrap, o2.wrap].filter(notNil));\n  const wrapChildren = chainSingleArgFuncs(\n    ...[o1.wrapChildren, o2.wrapChildren].filter(notNil)\n  );\n\n  // \"render\" type always takes precedence, but we still merge the props\n  const props = mergeOverrideProps(o1.props ?? {}, o2.props) as Partial<\n    React.ComponentProps<C>\n  >;\n  if (o2.type === \"render\") {\n    return {\n      render: o2.render,\n      props,\n      wrap,\n      wrapChildren,\n    };\n  }\n\n  if (o1.type === \"render\") {\n    return {\n      render: o1.render,\n      props,\n      wrap,\n      wrapChildren,\n    };\n  }\n\n  // \"as\" will take precedence\n  const as =\n    (o2.type === \"as\" ? o2.as : undefined) ??\n    (o1.type === \"as\" ? o1.as : undefined);\n\n  return {\n    props,\n    wrap,\n    wrapChildren,\n    ...(as ? { as } : {}),\n  };\n}\n\nexport function deriveRenderOpts(\n  props: Record<string, any>,\n  config: {\n    name: string;\n    descendantNames: string[];\n    internalVariantPropNames: string[];\n    internalArgPropNames: string[];\n  }\n) {\n  const {\n    name,\n    descendantNames,\n    internalVariantPropNames,\n    internalArgPropNames,\n  } = config;\n  const reservedPropNames = [\"variants\", \"args\", \"overrides\"];\n  const variants = mergeVariants(\n    omit(pick(props, ...internalVariantPropNames), ...reservedPropNames),\n    props.variants\n  );\n  const args = mergeArgs(\n    omit(pick(props, ...internalArgPropNames), ...reservedPropNames),\n    props.args\n  );\n  let overrides = mergeFlexOverrides(\n    omit(\n      pick(props, ...descendantNames),\n      ...internalArgPropNames,\n      ...internalVariantPropNames,\n      ...reservedPropNames\n    ),\n    props.overrides\n  );\n\n  const leftoverProps = omit(\n    props,\n    \"variants\",\n    \"args\",\n    \"overrides\",\n    ...descendantNames,\n    ...internalVariantPropNames,\n    ...internalArgPropNames\n  ) as Partial<React.ComponentProps<\"button\">>;\n\n  if (Object.keys(leftoverProps).length > 0) {\n    overrides = mergeFlexOverrides(overrides, {\n      [name]: {\n        props: leftoverProps,\n      },\n    });\n  }\n  return { variants, args, overrides };\n}\n","const isDefaultValue = (val: string) => val === \"PLEASE_RENDER_INSIDE_PROVIDER\";\nconst seenDefaultVariants: Record<string, boolean> = {};\nexport function ensureGlobalVariants<T extends Record<string, any>>(\n  globalVariantValues: T\n) {\n  Object.entries(globalVariantValues)\n    .filter(([_, value]) => isDefaultValue(value))\n    .forEach(([key, _]) => {\n      (globalVariantValues as any)[key] = undefined;\n\n      if (!seenDefaultVariants[key] && process.env.NODE_ENV === \"development\") {\n        seenDefaultVariants[key] = true;\n        const providerName = `${key[0].toUpperCase()}${key.substring(\n          1\n        )}Context.Provider`;\n        console.warn(\n          `Plasmic context value for global variant \"${key}\" was not provided; please use ${providerName} at the root of your React app. Learn More: https://www.plasmic.app/learn/other-assets/#global-variants`\n        );\n      }\n    });\n  return globalVariantValues;\n}\n","import * as plasmicQuery from \"@plasmicapp/query\";\nimport * as React from \"react\";\n\nexport const PlasmicHeadContext = React.createContext<\n  React.ComponentType<any> | undefined\n>(undefined);\n\nexport function PlasmicHead(props: plasmicQuery.HeadMetadata) {\n  const Head = React.useContext(PlasmicHeadContext);\n  const headMetadata =\n    // Check if `HeadMetadataContext` is exported for backward compatibility\n    \"HeadMetadataContext\" in plasmicQuery\n      ? React.useContext(plasmicQuery.HeadMetadataContext)\n      : undefined;\n\n  if (headMetadata) {\n    // If we have the Head metadata object specified, mutate it so to ensure it\n    // stores the data that should go in the <head>.\n    if (props.image) {\n      headMetadata.image = props.image;\n    }\n    if (props.title) {\n      headMetadata.title = props.title;\n    }\n    if (props.description) {\n      headMetadata.description = props.description;\n    }\n    if (props.canonical) {\n      headMetadata.canonical = props.canonical;\n    }\n  }\n\n  if (!Head) {\n    console.warn(\n      `Plasmic: Head meta tags are being ignored. To make them work, pass a Head component into PlasmicRootProvider.`\n    );\n    // TODO: Link to doc about Head.\n    return null;\n  }\n\n  // Helmet does not support React.Fragments, so we need to use `[<meta />,\n  // <meta />]` instead of `<><meta /><meta /></>`.\n  return (\n    <Head>\n      {props.image ? (\n        [\n          <meta\n            key=\"twitter:card\"\n            name=\"twitter:card\"\n            content=\"summary_large_image\"\n          />,\n          <meta key=\"og:image\" property=\"og:image\" content={props.image} />,\n          <meta\n            key=\"twitter:image\"\n            name=\"twitter:image\"\n            content={props.image}\n          />,\n        ]\n      ) : (\n        <meta key=\"twitter:card\" name=\"twitter:card\" content=\"summary\" />\n      )}\n      {props.title && [\n        <title key=\"title\">{props.title}</title>,\n        <meta key=\"og:title\" property=\"og:title\" content={props.title} />,\n        <meta\n          key=\"twitter:title\"\n          property=\"twitter:title\"\n          content={props.title}\n        />,\n      ]}\n      {props.description && [\n        <meta\n          key=\"description\"\n          name=\"description\"\n          content={props.description}\n        />,\n        <meta\n          key=\"og:description\"\n          property=\"og:description\"\n          content={props.description}\n        />,\n        <meta\n          key=\"twitter:description\"\n          name=\"twitter:description\"\n          content={props.description}\n        />,\n      ]}\n      {props.canonical && (\n        <link key=\"canonical\" rel=\"canonical\" href={props.canonical} />\n      )}\n    </Head>\n  );\n}\n\nexport const plasmicHeadMeta = {\n  name: \"hostless-plasmic-head\",\n  displayName: \"Page Metadata Override\",\n  description: \"Set page metadata (HTML <head />) to dynamic values.\",\n  importName: \"PlasmicHead\",\n  importPath: \"@plasmicapp/react-web\",\n  isRepeatable: false,\n  styleSections: false,\n  props: {\n    title: {\n      type: \"string\",\n      displayName: \"Title\",\n    },\n    description: {\n      type: \"string\",\n      displayName: \"Description\",\n    },\n    image: {\n      type: \"imageUrl\",\n      displayName: \"Image\",\n    },\n    canonical: {\n      type: \"string\",\n      displayName: \"Canonical URL\",\n    },\n  },\n};\n","import * as React from \"react\";\n\nexport function PlasmicIcon(\n  props: React.ComponentProps<\"svg\"> & {\n    PlasmicIconType: React.ComponentType;\n  }\n) {\n  const { PlasmicIconType, ...rest } = props;\n  return <PlasmicIconType {...rest} />;\n}\n","/**\n * Responsive `<img/>` replacement, based on `next/image`\n */\n\nimport classNames from \"classnames\";\nimport React, { CSSProperties } from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeRefs } from \"../../react-utils\";\n\nexport interface ImageLoader {\n  supportsUrl: (url: string) => boolean;\n  transformUrl: (opts: {\n    src: string;\n    width?: number;\n    quality?: number;\n    format?: \"webp\";\n  }) => string;\n}\n\ntype ImgTagProps = Omit<\n  React.ComponentProps<\"img\">,\n  \"src\" | \"srcSet\" | \"ref\" | \"style\"\n>;\n\nconst IMG_OPTIMIZER_HOST = \"https://img.plasmic.app\";\n\n// Default image sizes to snap to\n// TODO: make this configurable?\nconst IMG_SIZES = [16, 32, 48, 64, 96, 128, 256, 384];\nconst DEVICE_SIZES = [640, 750, 828, 1080, 1200, 1920, 2048, 3840];\nconst ALL_SIZES = [...IMG_SIZES, ...DEVICE_SIZES];\n\nexport interface PlasmicImgProps extends ImgTagProps {\n  /**\n   * Either an object with the src string, and its full width and height,\n   * or just a src string with unknown intrinsic dimensions.\n   */\n  src?:\n    | string\n    | {\n        src:\n          | string\n          | {\n              src: string;\n              height: number;\n              width: number;\n              blurDataURL?: string;\n            };\n        fullHeight: number;\n        fullWidth: number;\n        // We might also get a more precise aspectRatio for SVGs\n        // instead of relyiing on fullWidth / fullHeight, because\n        // those values might be rounded and not so accurate.\n        aspectRatio?: number;\n      };\n\n  /**\n   * className applied to the wrapper element if one is used.\n   */\n  className?: string;\n\n  /**\n   * css width\n   */\n  displayWidth?: number | string;\n\n  /**\n   * css height\n   */\n  displayHeight?: number | string;\n\n  /**\n   * css min-width\n   */\n  displayMinWidth?: number | string;\n\n  /**\n   * css min-height\n   */\n  displayMinHeight?: number | string;\n\n  /**\n   * css max-width\n   */\n  displayMaxWidth?: number | string;\n\n  /**\n   * css max-height\n   */\n  displayMaxHeight?: number | string;\n\n  /**\n   * For variable quality formats like jpg, the quality from 0 to 100\n   */\n  quality?: number;\n\n  /**\n   * ImageLoader to use for loading different dimensions of the image.\n   * If none specified, will not attempt to load different dimensions.\n   */\n  loader?: \"plasmic\" | ImageLoader;\n\n  /**\n   * Style applied to the wrapper element. objectFit and objectPosition\n   * rules are applied to the img element.\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * Ref for the img element.  The normal <PlasmicImg ref={...} />\n   * prop gives the root element instead, which may be the img element\n   * or a wrapper element\n   */\n  imgRef?: React.Ref<HTMLImageElement>;\n}\n\nexport const PlasmicImg = React.forwardRef(function PlasmicImg(\n  props: PlasmicImgProps,\n  outerRef: React.Ref<HTMLElement>\n) {\n  let {\n    src,\n    className,\n    displayWidth,\n    displayHeight,\n    displayMinWidth,\n    displayMinHeight,\n    displayMaxWidth,\n    displayMaxHeight,\n    quality,\n    loader,\n    imgRef,\n    style,\n    loading,\n    ...rest\n  } = props;\n\n  const imgProps = Object.assign({}, rest, {\n    // Default loading to \"lazy\" if not specified (which is different from the\n    // html img, which defaults to eager!)\n    loading: loading ?? \"lazy\",\n  });\n\n  const { fullWidth, fullHeight, aspectRatio } = !src\n    ? { fullWidth: undefined, fullHeight: undefined, aspectRatio: undefined }\n    : typeof src === \"string\"\n    ? getImageSizeData(\n        getPixelLength(props.width),\n        getPixelLength(props.height)\n      )\n    : src;\n  const srcStr = src\n    ? typeof src === \"string\"\n      ? src\n      : typeof src.src === \"string\"\n      ? src.src\n      : src.src.src\n    : \"\";\n\n  // Assume external image if either dimension is null and use usual <img>\n  if (fullHeight == null || fullWidth == null) {\n    return (\n      <img\n        src={srcStr}\n        className={className}\n        style={style}\n        {...imgProps}\n        loading={loading}\n        ref={mergeRefs(imgRef, outerRef) as any}\n      />\n    );\n  }\n\n  if (\n    isSvg(srcStr) &&\n    (displayHeight == null || displayHeight === \"auto\") &&\n    (displayWidth == null || displayWidth === \"auto\")\n  ) {\n    displayWidth = \"100%\";\n  }\n\n  let computedDisplayWidth = displayWidth;\n  if (\n    fullWidth &&\n    fullHeight &&\n    (!displayWidth || displayWidth === \"auto\") &&\n    !!getPixelLength(displayHeight)\n  ) {\n    // If there's a pixel length specified for displayHeight but not displayWidth,\n    // then we can derive the pixel length for displayWidth.  Having an explicit\n    // displayWidth makes this a fixed-size image, which makes it possible for us to\n    // generate better markup!\n    if (!isSvg(srcStr)) {\n      // We shouldn't do it for SVGs though, because `fullWidth` and\n      // `fullHeight` might have rounded values so the final\n      // `displayWidth` could differ by 1px or so.\n      computedDisplayWidth =\n        (getPixelLength(displayHeight)! * fullWidth) / fullHeight;\n    }\n  }\n\n  let spacerWidth = fullWidth;\n  let spacerHeight = fullHeight;\n  if (aspectRatio && isFinite(aspectRatio) && isSvg(srcStr)) {\n    // For SVGs, fullWidth and fullHeight can be rounded values, which would\n    // cause some discrepancy between the actual aspect ratio and the aspect\n    // ratio from those values. So, for those cases, we set large width / height\n    // values to get a more precise ratio from the spacer.\n    spacerWidth = DEFAULT_SVG_WIDTH;\n    spacerHeight = Math.round(spacerWidth / aspectRatio);\n  }\n\n  const { sizes, widthDescs } = getWidths(computedDisplayWidth, fullWidth, {\n    minWidth: displayMinWidth,\n  });\n  const imageLoader = getImageLoader(loader);\n  const spacerSvg = `<svg width=\"${spacerWidth}\" height=\"${spacerHeight}\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"/>`;\n  const spacerSvgBase64 =\n    // if btoa exists, use btoa, as it works in browser and in\n    // cloudflare edge workers.  For node, use Buffer.from().\n    typeof globalThis.btoa === \"function\"\n      ? globalThis.btoa(spacerSvg)\n      : Buffer.from(spacerSvg).toString(\"base64\");\n\n  let wrapperStyle: CSSProperties = { ...(style || {}) };\n  let spacerStyle: CSSProperties = {\n    ...pick(style || {}, \"objectFit\", \"objectPosition\"),\n  };\n\n  if (displayWidth != null && displayWidth !== \"auto\") {\n    // If width is set, set it on the wrapper along with min/max width\n    // and just use `width: 100%` on the spacer\n    spacerStyle.width = \"100%\";\n    // Rely on the styles set by `classname` on the wrapper:\n    // wrapperStyle.width = displayWidth;\n    // wrapperStyle.minWidth = displayMinWidth;\n    // wrapperStyle.maxWidth = displayMaxWidth;\n  } else {\n    // Otherwise, we want auto sizing from the spacer, so set width there.\n    //\n    // But if we have min/max width, it should be set in the wrapper and it\n    // can be percentage values (and we add corresponding min/max width to\n    // 100% in the spacer). In general it ends up with the correct effect,\n    // but some edge cases might make `min-width: 100%` shrink the image more\n    // than it should.\n    spacerStyle.width = displayWidth;\n    wrapperStyle.width = \"auto\";\n    if (displayMinWidth) {\n      spacerStyle.minWidth = \"100%\";\n      // Rely on min-width set by `classname` on the wrapper:\n      // wrapperStyle.minWidth = displayMinWidth;\n    }\n    if (displayMaxWidth != null && displayMaxWidth !== \"none\") {\n      spacerStyle.maxWidth = \"100%\";\n      // Rely on max-width set by `classname` on the wrapper:\n      // wrapperStyle.maxWidth = displayMaxWidth;\n    }\n  }\n\n  if (displayHeight != null && displayHeight !== \"auto\") {\n    spacerStyle.height = \"100%\";\n    // wrapperStyle.height = displayHeight;\n    // wrapperStyle.minHeight = displayMinHeight;\n    // wrapperStyle.maxHeight = displayMaxHeight;\n  } else {\n    spacerStyle.height = displayHeight;\n    wrapperStyle.height = \"auto\";\n    if (displayMinHeight) {\n      spacerStyle.minHeight = \"100%\";\n      // wrapperStyle.minHeight = displayMinHeight;\n    }\n    if (displayMaxHeight != null && displayMaxHeight !== \"none\") {\n      spacerStyle.maxHeight = \"100%\";\n      // wrapperStyle.maxHeight = displayMaxHeight;\n    }\n  }\n\n  return (\n    <div\n      className={classNames(className, \"__wab_img-wrapper\")}\n      ref={outerRef as any}\n      style={wrapperStyle}\n    >\n      <img\n        alt=\"\"\n        aria-hidden\n        className=\"__wab_img-spacer-svg\"\n        src={`data:image/svg+xml;base64,${spacerSvgBase64}`}\n        style={spacerStyle}\n      />\n      {makePicture({\n        imageLoader,\n        widthDescs,\n        sizes,\n        src: srcStr,\n        quality,\n        ref: imgRef,\n        style: style ? pick(style, \"objectFit\", \"objectPosition\") : undefined,\n        imgProps,\n        className: \"__wab_img\",\n      })}\n    </div>\n  );\n});\n\nfunction makePicture(opts: {\n  imageLoader?: ImageLoader;\n  widthDescs: WidthDesc[];\n  sizes?: string;\n  src: string;\n  quality?: number;\n  style?: React.CSSProperties;\n  className?: string;\n  imgProps: ImgTagProps;\n  ref?: React.Ref<HTMLImageElement>;\n}) {\n  // If imageLoader is undefined, then this renders to just a normal\n  // <img />.  Else it will render to a <picture> with a <source> for\n  // webp, and srcSet/sizes set according to width requirements.\n  const {\n    imageLoader,\n    widthDescs,\n    src,\n    quality,\n    style,\n    className,\n    sizes,\n    imgProps,\n    ref,\n  } = opts;\n  return (\n    <picture className=\"__wab_picture\">\n      {imageLoader && imageLoader.supportsUrl(src) && (\n        <source\n          type=\"image/webp\"\n          srcSet={widthDescs\n            .map(\n              (wd) =>\n                `${imageLoader.transformUrl({\n                  src,\n                  quality,\n                  width: wd.width,\n                  format: \"webp\",\n                })} ${wd.desc}`\n            )\n            .join(\", \")}\n        />\n      )}\n      <img\n        {...imgProps}\n        ref={ref}\n        className={className}\n        decoding=\"async\"\n        src={\n          imageLoader && imageLoader.supportsUrl(src)\n            ? imageLoader.transformUrl({\n                src,\n                quality,\n                width: widthDescs[widthDescs.length - 1].width,\n              })\n            : src\n        }\n        srcSet={\n          imageLoader && imageLoader.supportsUrl(src)\n            ? widthDescs\n                .map(\n                  (wd) =>\n                    `${imageLoader.transformUrl({\n                      src,\n                      quality,\n                      width: wd.width,\n                    })} ${wd.desc}`\n                )\n                .join(\", \")\n            : undefined\n        }\n        sizes={imageLoader && imageLoader.supportsUrl(src) ? sizes : undefined}\n        style={{\n          ...(style ? pick(style, \"objectFit\", \"objectPosition\") : {}),\n          width: 0,\n          height: 0,\n        }}\n      />\n    </picture>\n  );\n}\n\nconst DEFAULT_SVG_WIDTH = 10000;\n\nfunction isSvg(src: string) {\n  return src.endsWith(\".svg\") || src.startsWith(\"data:image/svg\");\n}\n\ninterface WidthDesc {\n  width?: number;\n  desc: string;\n}\n\nfunction getClosestPresetSize(width: number, fullWidth: number) {\n  const nextBiggerIndex =\n    ALL_SIZES.findIndex((w) => w >= width) ?? ALL_SIZES.length - 1;\n  const nextBigger = ALL_SIZES[nextBiggerIndex];\n  if (nextBigger >= fullWidth) {\n    // If the requested width is larger than the fullWidth,\n    // we just use the original width instead. It's impossible\n    // to make an image bigger than fullWidth!\n    return undefined;\n  } else if (\n    nextBiggerIndex + 1 < ALL_SIZES.length &&\n    fullWidth <= ALL_SIZES[nextBiggerIndex + 1]\n  ) {\n    // If the fullWidth is just between nextBigger and the one after that,\n    // then also might as well just use the original size (so, width is 30,\n    // nextBigger is 32, then we just use the original as long as fullWidth is\n    // less than 48)\n    return undefined;\n  }\n\n  return nextBigger;\n}\n\n/**\n * Computes the appropriate srcSet and sizes to use\n */\nfunction getWidths(\n  width: number | string | undefined,\n  fullWidth: number,\n  extra?: { minWidth: string | number | undefined }\n): { sizes: string | undefined; widthDescs: WidthDesc[] } {\n  const minWidth = extra?.minWidth;\n  const pixelWidth = getPixelLength(width);\n  const pixelMinWidth = getPixelLength(minWidth);\n  if (pixelWidth != null && (!minWidth || pixelMinWidth != null)) {\n    // If there's an exact width, then we just need to display it at 1x and 2x density\n    return {\n      widthDescs: [\n        {\n          width: getClosestPresetSize(\n            Math.max(pixelWidth, pixelMinWidth ?? 0),\n            fullWidth\n          ),\n          desc: \"1x\",\n        },\n        {\n          width: getClosestPresetSize(\n            Math.max(pixelWidth, pixelMinWidth ?? 0) * 2,\n            fullWidth\n          ),\n          desc: \"2x\",\n        },\n      ],\n      sizes: undefined,\n    };\n  }\n  // Otherwise we don't know what sizes we'll end up, so we just cap it at\n  // device width.  TODO: do better!\n  const usefulSizes = DEVICE_SIZES.filter(\n    (size) => !fullWidth || size < fullWidth\n  );\n  if (!!fullWidth && usefulSizes.length === 0) {\n    // image fullWidth is smaller than all device sizes.  So all we can do\n    // is offer 1x\n    return {\n      widthDescs: [\n        {\n          width: getClosestPresetSize(fullWidth, fullWidth),\n          desc: \"1x\",\n        },\n      ],\n      sizes: undefined,\n    };\n  }\n  return {\n    widthDescs: usefulSizes.map((size) => ({\n      width: getClosestPresetSize(size, fullWidth),\n      // If this is the last (buggest) useful width, but it is\n      // still within the bounds set by DEVICE_SIZES, then just\n      // use the original, unresized image.  This means if we match\n      // the largest size, we use unresized and best quality image.\n      // We only do this, though, if fullWidth is \"reasonable\" --\n      // smaller than the largest size we would consider.\n      // i === usefulSizes.length - 1 &&\n      // fullWidth < DEVICE_SIZES[DEVICE_SIZES.length - 1]\n      //   ? undefined\n      //   : size,\n      desc: `${size}w`,\n    })),\n    sizes: \"100vw\",\n  };\n}\n\nfunction getPixelLength(length: number | string | undefined) {\n  if (length == null || length == \"\") {\n    return undefined;\n  }\n\n  if (typeof length === \"number\") {\n    return length;\n  }\n\n  const parsed = parseNumeric(length);\n  if (parsed && (!parsed.units || parsed.units === \"px\")) {\n    return parsed.num;\n  }\n\n  return undefined;\n}\n\nfunction parseNumeric(val: string) {\n  // Parse strings like \"30\", \"30px\", \"30%\", \"30px /* blah blah */\"\n  const res = val.match(\n    /^\\s*(-?(?:\\d+\\.\\d*|\\d*\\.\\d+|\\d+))\\s*([a-z]*|%)\\s*(?:\\/\\*.*)?$/i\n  );\n  if (res == null) {\n    return undefined;\n  }\n  const num = res[1];\n  const units = res[2];\n  return { num: +num, units };\n}\n\nfunction getImageSizeData(\n  width: number | undefined,\n  height: number | undefined\n) {\n  const aspectRatio = width && height ? width / height : undefined;\n  return {\n    fullWidth: width,\n    fullHeight: height,\n    aspectRatio: aspectRatio && isFinite(aspectRatio) ? aspectRatio : undefined,\n  };\n}\n\nfunction getImageLoader(loader: \"plasmic\" | ImageLoader | undefined) {\n  if (loader == null) {\n    return undefined;\n  } else if (loader === \"plasmic\") {\n    return PLASMIC_IMAGE_LOADER;\n  } else {\n    return loader;\n  }\n}\n\nfunction isInternalKey(src: string) {\n  return /^([a-f0-9]{32})\\..{1,16}$/i.test(src);\n}\n\nconst PLASMIC_IMAGE_LOADER: ImageLoader = {\n  supportsUrl: (src) => {\n    return (src.startsWith(\"http\") || isInternalKey(src)) && !isSvg(src);\n  },\n  transformUrl: (opts) => {\n    const params = [\n      `src=${encodeURIComponent(opts.src)}`,\n      opts.width ? `w=${opts.width}` : undefined,\n      `q=${opts.quality ?? 75}`,\n      opts.format ? `f=${opts.format}` : undefined,\n    ].filter((x) => !!x);\n    return `${IMG_OPTIMIZER_HOST}/img-optimizer/v1/img?${params.join(\"&\")}`;\n  },\n};\n","import { usePlasmicLinkMaybe } from \"@plasmicapp/host\";\nimport React from \"react\";\nimport { omit, pick } from \"../common\";\n\nexport const PlasmicLink = React.forwardRef(function PlasmicLink(\n  props: any,\n  ref: React.Ref<any>\n) {\n  // The usePlasmicLinkMaybe function may be undefined, if host is not up-to-date\n  const Link = usePlasmicLinkMaybe?.() ?? PlasmicLinkInternal;\n  if (Link === PlasmicLink || Link === PlasmicLinkInternal) {\n    // Just in case, break the cycle\n    return <PlasmicLinkInternal {...props} ref={ref} />;\n  } else {\n    // Don't pass component/platform props to non-PlasmicLinkInternal\n    return <Link {...omit(props, \"component\", \"platform\")} ref={ref} />;\n  }\n});\n\nexport const PlasmicLinkInternal = React.forwardRef(\n  function PlasmicLinkInternal(props: any, ref: React.Ref<any>) {\n    // props.href is required for nextjs; if no props.href,\n    // then we just render the default anchor element\n    if (props.platform === \"nextjs\" && props.href) {\n      const nextjsProps = [\n        \"href\",\n        \"replace\",\n        \"scroll\",\n        \"shallow\",\n        \"passHref\",\n        \"prefetch\",\n        \"locale\",\n      ];\n\n      // If this is a fragment identifier link, then we set\n      // scroll={false} so that smooth scrolling works\n      const isFragment = props.href?.startsWith(\"#\");\n\n      return React.createElement(\n        props.component,\n        {\n          scroll: !isFragment,\n          ...pick(props, ...nextjsProps),\n          legacyBehavior: true,\n        },\n        <a\n          {...omit(props, \"component\", \"platform\", ...nextjsProps)}\n          ref={ref}\n        />\n      );\n    }\n\n    if (props.platform === \"gatsby\" && isInternalHref(props.href)) {\n      return React.createElement(props.component, {\n        ...omit(props, \"component\", \"platform\", \"href\"),\n        ...{ to: props.href, ref },\n      });\n    }\n\n    return <a {...omit(props, \"component\", \"platform\")} ref={ref} />;\n  }\n);\n\nfunction isInternalHref(href: string): boolean {\n  return /^\\/(?!\\/)/.test(href);\n}\n","import {\n  PlasmicTranslatorContext as HostPlasmicTranslatorContext,\n  PlasmicI18NContextValue,\n  PlasmicTranslator,\n  usePlasmicTranslator as useHostPlasmicTranslator,\n} from \"@plasmicapp/host\";\nimport React from \"react\";\n\n// Make the refactor to host backwards compatible for loader\nexport const PlasmicTranslatorContext =\n  HostPlasmicTranslatorContext ??\n  React.createContext<PlasmicI18NContextValue | PlasmicTranslator | undefined>(\n    undefined\n  );\n\nexport const usePlasmicTranslator =\n  useHostPlasmicTranslator ??\n  (() => {\n    const _t = React.useContext(PlasmicTranslatorContext);\n    const translator = _t\n      ? typeof _t === \"function\"\n        ? _t\n        : _t.translator\n      : undefined;\n    return translator;\n  });\n\nexport interface TransProps {\n  transKey?: string;\n  children?: React.ReactNode;\n}\n\nexport function genTranslatableString(\n  elt: React.ReactNode,\n  opts?: {\n    tagPrefix?: string;\n  }\n) {\n  const components: {\n    [key: string]: React.ReactElement;\n  } = {};\n  let componentsCount = 0;\n\n  const getText = (node: React.ReactNode): string => {\n    if (!node) {\n      return \"\";\n    }\n    if (\n      typeof node === \"number\" ||\n      typeof node === \"boolean\" ||\n      typeof node === \"string\"\n    ) {\n      return node.toString();\n    }\n    if (typeof node !== \"object\") {\n      return \"\";\n    }\n    if (Array.isArray(node) || isIterable(node)) {\n      return Array.from(node)\n        .map((child) => getText(child))\n        .filter((child) => !!child)\n        .join(\"\");\n    }\n    const nodeChildren: React.ReactNode =\n      (hasKey(node, \"props\") &&\n        hasKey(node.props, \"children\") &&\n        (node.props.children as React.ReactNode | undefined)) ||\n      (hasKey(node, \"children\") && node.children) ||\n      [];\n    const contents = `${React.Children.toArray(nodeChildren)\n      .map((child) => getText(child))\n      .filter((child) => !!child)\n      .join(\"\")}`;\n    if (React.isValidElement(node) && node.type === React.Fragment) {\n      return contents;\n    }\n    const prefix = opts?.tagPrefix ?? \"\";\n    const componentId = `${prefix}${componentsCount + 1}`;\n    componentsCount++;\n    components[componentId] = React.isValidElement(node)\n      ? React.cloneElement(node as any, {\n          key: componentId,\n          children: undefined,\n        })\n      : (node as never);\n    return `<${componentId}>${contents}</${componentId}>`;\n  };\n\n  const str = getText(elt);\n  return {\n    str,\n    components,\n    componentsCount,\n  };\n}\n\nexport function Trans({ transKey, children }: TransProps) {\n  const _t = React.useContext(PlasmicTranslatorContext);\n  const translator = _t\n    ? typeof _t === \"function\"\n      ? _t\n      : _t.translator\n    : undefined;\n  if (!translator) {\n    warnNoTranslationFunctionAtMostOnce();\n    return children;\n  }\n\n  const { str, components, componentsCount } = genTranslatableString(children, {\n    tagPrefix: typeof _t === \"object\" ? _t.tagPrefix : undefined,\n  });\n  return translator(\n    transKey ?? str,\n    componentsCount > 0 ? { components } : undefined\n  );\n}\n\nlet hasWarned = false;\nfunction warnNoTranslationFunctionAtMostOnce() {\n  if (!hasWarned) {\n    console.warn(\n      \"Using Plasmic Translation but no translation function has been provided\"\n    );\n    hasWarned = true;\n  }\n}\n\nfunction hasKey<K extends string>(v: any, key: K): v is Record<K, any> {\n  return typeof v === \"object\" && v !== null && key in v;\n}\n\nfunction isIterable(val: any): val is Iterable<any> {\n  return val != null && typeof val[Symbol.iterator] === \"function\";\n}\n","import * as React from \"react\";\nimport { mergeProps } from \"../react-utils\";\nimport { Trans } from \"./translation\";\n\nexport function PlasmicSlot<T extends keyof JSX.IntrinsicElements = \"div\">(\n  props: React.ComponentProps<T> & {\n    as?: T;\n    defaultContents?: React.ReactNode;\n    value?: React.ReactNode;\n  }\n) {\n  return renderPlasmicSlot(props);\n}\n\nexport function renderPlasmicSlot<\n  T extends keyof JSX.IntrinsicElements = \"div\"\n>(opts: {\n  as?: T;\n  defaultContents?: React.ReactNode;\n  value?: React.ReactNode;\n}) {\n  const { as, defaultContents, value, ...rest } = opts;\n\n  let content = value === undefined ? defaultContents : value;\n  if (\n    typeof content !== \"number\" &&\n    (!content || (Array.isArray(content) && content.length === 0))\n  ) {\n    return null;\n  }\n\n  // If the content is a raw string, then we need to wrap the raw string\n  // into an element, in case the slot is inside a flex-gap\n  // container (you cannot apply margin to just a text node).\n  const maybeString = maybeAsString(content);\n  if (maybeString) {\n    content = (\n      <span className=\"__wab_slot-string-wrapper ρsw\">{maybeString}</span>\n    );\n  }\n\n  const nonEmptyProps = Object.keys(rest).filter((p) => !!(rest as any)[p]);\n  if (nonEmptyProps.length === 0) {\n    // No attrs to apply to the slot (which means the slot is unstyled), then\n    // just render the content directly; no need for style wrapper.\n    return content as React.ReactElement | null;\n  }\n\n  return React.createElement(\n    as || \"span\",\n    mergeProps({ className: \"__wab_slot ρs\" }, rest),\n    content\n  );\n}\n\nfunction maybeAsString(\n  node: React.ReactNode\n): string | React.ReactElement | undefined {\n  // Unwrap fragments\n  if (React.isValidElement(node)) {\n    // Fragment doesn't render DOM elements\n    if (node.type === React.Fragment) {\n      return maybeAsString(node.props.children);\n    } else if (node.type === Trans) {\n      // Trans also doesn't render DOM elements. But we don't want to just render\n      // its content string, because we want to keep the <Trans/> for the localization.\n      // So we render the same node, to be wrapped into __wab_slot-string-wrapper.\n      return node;\n    }\n  }\n\n  if (typeof node === \"string\") {\n    return node;\n  }\n\n  if (typeof node === \"number\") {\n    return `${node}`;\n  }\n\n  if (Array.isArray(node) && node.length === 1 && typeof node[0] === \"string\") {\n    return node[0];\n  }\n\n  return undefined;\n}\n","import * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { isBrowser, useIsomorphicLayoutEffect } from \"../react-utils\";\n\ntype Queries = { [name: string]: string };\n\nconst listeners: Array<() => void> = [];\nconst queries: Queries = {};\n\nfunction matchScreenVariants() {\n  if (!isBrowser) {\n    return [];\n  }\n  return Object.entries(queries)\n    .filter(([, query]) => window.matchMedia(query).matches)\n    .map(([name]) => name);\n}\n\n// undefined if screen variants have never been calculated\nlet curScreenVariants: string[] | undefined = undefined;\n\nfunction recalculateScreenVariants() {\n  const screenVariant = matchScreenVariants();\n  if (\n    !curScreenVariants ||\n    screenVariant.join(\"\") !== curScreenVariants.join(\"\")\n  ) {\n    curScreenVariants = screenVariant;\n    ReactDOM.unstable_batchedUpdates(() =>\n      listeners.forEach((listener) => listener())\n    );\n  }\n}\n\nfunction ensureInitCurScreenVariants() {\n  // Initializes curScreenVariants if it hadn't been before. Note that this must\n  // be called from within an effect.\n  if (curScreenVariants === undefined) {\n    curScreenVariants = matchScreenVariants();\n  }\n}\n\nif (isBrowser) {\n  window.addEventListener(\"resize\", recalculateScreenVariants);\n}\n\nexport function createUseScreenVariants(\n  isMulti: boolean,\n  screenQueries: Queries\n) {\n  Object.assign(queries, screenQueries);\n  curScreenVariants = undefined;\n\n  return function () {\n    // It is important that upon first render, we return [] or undefined, because\n    // that is what SSR will use, and the client must match.  In an effect (which\n    // only happens on the client), we then actually ask for the real screen variant\n    // and, if different from [] or undefined, forces a re-render.\n\n    const [, updateState] = React.useState<{}>();\n    const lastScreenVariantsRef = React.useRef<string[]>(\n      curScreenVariants || []\n    );\n\n    // We do useLayoutEffect instead of useEffect to immediately\n    // register our forceUpdate. This ensures that if there was\n    // a window resize event between render and effects, that the\n    // listener will be registered in time\n    useIsomorphicLayoutEffect(() => {\n      const updateIfChanged = () => {\n        if (\n          curScreenVariants &&\n          lastScreenVariantsRef.current.join(\"\") !== curScreenVariants.join(\"\")\n        ) {\n          lastScreenVariantsRef.current = curScreenVariants;\n          // Force update\n          updateState({});\n        }\n      };\n\n      // Listeners are invoked whenever the window is resized\n      listeners.push(updateIfChanged);\n\n      // Initialize the curScreenVariants for the first time.  We don't need\n      // to invoke the listeners here because all components will already\n      // have this effect running and will re-render if the real screen\n      // variant is non-empty.\n      ensureInitCurScreenVariants();\n\n      // Now, if the curScreenVariants differs from what we returned last,\n      // then force a re-render.\n      updateIfChanged();\n      return () => {\n        // Remove our listener on unmount\n        listeners.splice(listeners.indexOf(updateIfChanged), 1);\n      };\n    }, []);\n\n    if (isMulti) {\n      return curScreenVariants || [];\n    } else if (curScreenVariants) {\n      return curScreenVariants[curScreenVariants.length - 1];\n    } else {\n      return undefined;\n    }\n  };\n}\n","import {\n  PlasmicDataSourceContextProvider,\n  PlasmicDataSourceContextValue,\n} from \"@plasmicapp/data-sources-context\";\nimport {\n  DataProvider,\n  PlasmicI18NContextValue,\n  PlasmicLinkProvider,\n  PlasmicTranslator,\n} from \"@plasmicapp/host\";\nimport { SSRProvider, useIsSSR as useAriaIsSSR } from \"@react-aria/ssr\";\nimport * as React from \"react\";\nimport { PlasmicHeadContext } from \"./PlasmicHead\";\nimport { PlasmicLinkInternal } from \"./PlasmicLink\";\nimport { PlasmicTranslatorContext } from \"./translation\";\nexport {\n  PlasmicDataSourceContextProvider,\n  useCurrentUser,\n} from \"@plasmicapp/data-sources-context\";\n// import { PlasmicLink } from \"./PlasmicLink\";\n\nexport interface PlasmicRootContextValue {\n  platform?: \"nextjs\" | \"gatsby\";\n}\n\nconst PlasmicRootContext = React.createContext<\n  PlasmicRootContextValue | undefined\n>(undefined);\n\nexport interface PlasmicRootProviderProps\n  extends PlasmicDataSourceContextValue {\n  platform?: \"nextjs\" | \"gatsby\";\n  children?: React.ReactNode;\n  i18n?: PlasmicI18NContextValue;\n  /**\n   * @deprecated use i18n.translator instead\n   */\n  translator?: PlasmicTranslator;\n  Head?: React.ComponentType<any>;\n  Link?: React.ComponentType<any>;\n  disableLoadingBoundary?: boolean;\n  suspenseFallback?: React.ReactNode;\n}\n\nexport function PlasmicRootProvider(props: PlasmicRootProviderProps) {\n  const {\n    platform,\n    children,\n    userAuthToken,\n    isUserLoading,\n    authRedirectUri,\n    user,\n    disableLoadingBoundary,\n    suspenseFallback,\n  } = props;\n  const context = React.useMemo(\n    () => ({\n      platform,\n    }),\n    [platform]\n  );\n  const dataSourceContextValue = React.useMemo(\n    () => ({\n      userAuthToken,\n      user,\n      isUserLoading,\n      authRedirectUri,\n    }),\n    [userAuthToken, isUserLoading, user, authRedirectUri]\n  );\n  const reactMajorVersion = +React.version.split(\".\")[0];\n\n  return (\n    <MaybeWrap\n      cond={!disableLoadingBoundary && reactMajorVersion >= 18}\n      wrapper={(children_) => (\n        <DataProvider\n          name=\"plasmicInternalEnableLoadingBoundary\"\n          hidden\n          data={true}\n        >\n          <React.Suspense fallback={suspenseFallback ?? \"Loading...\"}>\n            {children_}\n          </React.Suspense>\n        </DataProvider>\n      )}\n    >\n      <PlasmicRootContext.Provider value={context}>\n        <MaybeWrap\n          cond={reactMajorVersion < 18}\n          wrapper={(children_) => <SSRProvider>{children_}</SSRProvider>}\n        >\n          <PlasmicDataSourceContextProvider value={dataSourceContextValue}>\n            <PlasmicTranslatorContext.Provider\n              value={props.i18n ?? props.translator}\n            >\n              <PlasmicHeadContext.Provider value={props.Head}>\n                <SafePlasmicLinkProvider\n                  Link={props.Link ?? PlasmicLinkInternal}\n                >\n                  {children}\n                </SafePlasmicLinkProvider>\n              </PlasmicHeadContext.Provider>\n            </PlasmicTranslatorContext.Provider>\n          </PlasmicDataSourceContextProvider>\n        </MaybeWrap>\n      </PlasmicRootContext.Provider>\n    </MaybeWrap>\n  );\n}\n\n/**\n * A PlasmicLinkProvider that anticipates PlasmicLinkProvider may not exist yet from\n * @plasmicapp/host if the user is using an older version\n */\nfunction SafePlasmicLinkProvider(\n  props: React.ComponentProps<typeof PlasmicLinkProvider>\n) {\n  if (PlasmicLinkProvider) {\n    return <PlasmicLinkProvider {...props} />;\n  } else {\n    return <>{props.children}</>;\n  }\n}\n\nexport const useIsSSR = useAriaIsSSR;\n\nexport function useHasPlasmicRoot() {\n  return !!React.useContext(PlasmicRootContext);\n}\n\nlet hasWarnedSSR = false;\n/**\n * Warns the user if PlasmicRootProvider is not used\n */\nexport function useEnsureSSRProvider() {\n  const hasRoot = useHasPlasmicRoot();\n  if (hasRoot || hasWarnedSSR || process.env.NODE_ENV !== \"development\") {\n    return;\n  }\n\n  hasWarnedSSR = true;\n  console.warn(\n    `Plasmic: To ensure your components work correctly with server-side rendering, please use PlasmicRootProvider at the root of your application.  See https://docs.plasmic.app/learn/ssr`\n  );\n}\n\nfunction MaybeWrap(props: {\n  children: React.ReactElement;\n  cond: boolean;\n  wrapper: (children: React.ReactElement) => React.ReactElement;\n}) {\n  return props.cond ? props.wrapper(props.children) : props.children;\n}\n","import * as React from \"react\";\nimport { useFocusRing as useAriaFocusRing } from \"@react-aria/focus\";\n\nfunction useFocused(opts: { isTextInput?: boolean }) {\n  const { isFocused, focusProps } = useAriaFocusRing({\n    within: false,\n    isTextInput: opts.isTextInput,\n  });\n\n  return [isFocused, focusProps];\n}\n\nfunction useFocusVisible(opts: { isTextInput?: boolean }) {\n  const { isFocusVisible, focusProps } = useAriaFocusRing({\n    within: false,\n    isTextInput: opts.isTextInput,\n  });\n\n  return [isFocusVisible, focusProps];\n}\n\nfunction useFocusedWithin(opts: { isTextInput?: boolean }) {\n  const { isFocused, focusProps } = useAriaFocusRing({\n    within: true,\n    isTextInput: opts.isTextInput,\n  });\n\n  return [isFocused, focusProps];\n}\n\nfunction useFocusVisibleWithin(opts: { isTextInput?: boolean }) {\n  const { isFocusVisible, focusProps } = useAriaFocusRing({\n    within: true,\n    isTextInput: opts.isTextInput,\n  });\n\n  return [isFocusVisible, focusProps];\n}\n\nfunction useHover() {\n  const [isHover, setHover] = React.useState(false);\n  return [\n    isHover,\n    {\n      onMouseEnter: () => setHover(true),\n      onMouseLeave: () => setHover(false),\n    },\n  ];\n}\n\nfunction usePressed() {\n  const [isPressed, setPressed] = React.useState(false);\n  return [\n    isPressed,\n    {\n      onMouseDown: () => setPressed(true),\n      onMouseUp: () => setPressed(false),\n    },\n  ];\n}\n\nconst TRIGGER_TO_HOOK = {\n  useHover,\n  useFocused,\n  useFocusVisible,\n  useFocusedWithin,\n  useFocusVisibleWithin,\n  usePressed,\n} as const;\n\ntype TriggerType = keyof typeof TRIGGER_TO_HOOK;\n\ninterface TriggerOpts {\n  isTextInput?: boolean;\n}\n\n/**\n * Installs argment trigger. All the useTrigger calls must use hardcoded `trigger` arg,\n * as it's not valid to install variable React hooks!\n */\nexport function useTrigger(trigger: TriggerType, opts: TriggerOpts) {\n  return TRIGGER_TO_HOOK[trigger](opts) as [\n    boolean,\n    React.HTMLAttributes<HTMLElement>\n  ];\n}\n","import { StateSpecNode } from \"./graph\";\n\nexport type InitFuncEnv = {\n  $props: Record<string, any>;\n  $state: Record<string, any>;\n  $queries?: Record<string, any>;\n  $ctx?: Record<string, any>;\n  $refs?: Record<string, any>;\n};\n\nexport type DollarStateEnv = Omit<InitFuncEnv, \"$state\">;\n\nexport type NoUndefinedField<T> = { [P in keyof T]-?: T[P] };\n\nexport type InitFunc<T> = (env: NoUndefinedField<InitFuncEnv>) => T;\n\nexport type DeprecatedInitFunc<T> = (\n  $props: Record<string, any>,\n  $state: $State,\n  $ctx: Record<string, any>\n) => T;\n\nexport type ObjectPath = (string | number)[];\n\nexport interface $StateSpec<T> {\n  // path of the state, like `count` or `list.selectedIndex`\n  path: string;\n  // if initial value is defined by a js expression\n  initFunc?: InitFunc<T>;\n  // if initial value is a hard-coded value\n  initVal?: T;\n  // Whether this state is private, readonly, or writable in\n  // this component\n  type: \"private\" | \"readonly\" | \"writable\";\n\n  // If writable, there should be a valueProp that maps props[valueProp]\n  // to the value of the state\n  valueProp?: string;\n\n  // If writable or readonly, there should be an onChangeProp where\n  // props[onChangeProp] is invoked whenever the value changes\n  onChangeProp?: string;\n\n  isImmutable?: boolean;\n\n  variableType:\n    | \"text\"\n    | \"number\"\n    | \"boolean\"\n    | \"array\"\n    | \"object\"\n    | \"variant\"\n    | \"dateString\"\n    | \"dateRangeStrings\";\n\n  // Hash used to re-create the state\n  // This is only used in canvas where the state specs are dynamic\n  initFuncHash?: string;\n\n  refName?: string;\n  onMutate?: (stateValue: T, $ref: any) => void;\n}\n\nexport interface $State {\n  [key: string]: any;\n  registerInitFunc?: (\n    path: string,\n    f: InitFunc<any>,\n    repetitonIndex?: number[],\n    overrideEnv?: DollarStateEnv\n  ) => any;\n}\n\nexport const ARRAY_SYMBOL = Symbol(\"[]\");\nexport const PLASMIC_STATE_PROXY_SYMBOL = Symbol(\"plasmic.state.proxy\");\nexport const UNINITIALIZED = Symbol(\"plasmic.unitialized\");\n\nexport interface Internal$StateSpec<T> extends $StateSpec<T> {\n  isRepeated: boolean;\n  pathObj: (string | symbol)[];\n}\n\nexport interface Internal$StateInstance {\n  path: ObjectPath; // [\"counter\", 0, \"count\"]\n  specKey: string;\n}\n\nexport interface StateCell<T> {\n  initialValue?: T | symbol;\n  node: StateSpecNode<any>;\n  path: ObjectPath;\n  initFunc?: InitFunc<T>;\n  listeners: (() => void)[];\n  initFuncHash: string;\n  overrideEnv?: NoUndefinedField<DollarStateEnv>;\n}\n\nexport interface Internal$State {\n  registrationsQueue: {\n    node: StateSpecNode<any>;\n    path: ObjectPath;\n    f: InitFunc<any>;\n    overrideEnv?: NoUndefinedField<DollarStateEnv>;\n  }[];\n  stateValues: Record<string, any>;\n  env: NoUndefinedField<DollarStateEnv>;\n  rootSpecTree: StateSpecNode<any>;\n  specTreeLeaves: StateSpecNode<any>[];\n  specs: $StateSpec<any>[];\n  stateInitializationEnv: {\n    stack: string[];\n    visited: Set<string>;\n  };\n  initializedLeafPaths: Set<string>;\n}\n","export class CustomError extends Error {\n  name: string;\n  constructor(msg?: string) {\n    super(msg);\n    this.name = this.constructor.name;\n    ({ message: this.message, stack: this.stack } = this);\n  }\n}\n\nexport class CyclicStatesReferencesError extends Error {\n  constructor(stateAccessCycle: string[]) {\n    super(\n      \"Cyclic reference found in state initialization: \" +\n        stateAccessCycle.join(\" -> \")\n    );\n  }\n}\n\nexport class InvalidOperation extends Error {\n  constructor(msg: string) {\n    super(msg);\n  }\n}\n\nexport class UnknownError extends Error {\n  constructor(msg: string) {\n    super(msg);\n  }\n}\n","import { isNum, shallowEqual } from \"./helpers\";\nimport {\n  $StateSpec,\n  ARRAY_SYMBOL,\n  Internal$StateSpec,\n  ObjectPath,\n} from \"./types\";\n\nexport class StateSpecNode<T> {\n  private _specs: Internal$StateSpec<T>[];\n  private _edges: Map<string | symbol, StateSpecNode<any>>;\n\n  constructor(specs: Internal$StateSpec<T>[]) {\n    this._specs = specs;\n    this._edges = new Map();\n  }\n\n  setSpecs(specs: Internal$StateSpec<T>[]) {\n    this._specs = specs;\n  }\n\n  edges() {\n    return this._edges;\n  }\n\n  hasEdge(key: string | symbol) {\n    return this._edges.has(key);\n  }\n\n  addEdge(key: string | symbol, node: StateSpecNode<any>) {\n    this._edges.set(key, node);\n  }\n\n  clearEdges() {\n    this._edges = new Map();\n  }\n\n  children() {\n    return this._edges.values();\n  }\n\n  makeTransition(key: string | symbol | number) {\n    key = isNum(key) ? ARRAY_SYMBOL : key;\n    return this._edges.get(key);\n  }\n\n  isLeaf() {\n    return this._edges.size === 0 && this.getAllSpecs().length > 0;\n  }\n\n  hasArrayTransition() {\n    return this._edges.has(ARRAY_SYMBOL);\n  }\n\n  getSpec() {\n    return this._specs[0];\n  }\n\n  getAllSpecs() {\n    return this._specs;\n  }\n}\n\nexport const transformPathStringToObj = (str: string) => {\n  const splitStatePathPart = (state: string): (string | symbol)[] =>\n    state.endsWith(\"[]\")\n      ? [...splitStatePathPart(state.slice(0, -2)), ARRAY_SYMBOL]\n      : [state];\n  return str.split(\".\").flatMap(splitStatePathPart);\n};\n\nexport function buildTree(specs: $StateSpec<any>[]) {\n  const internalSpec = specs.map(\n    (spec) =>\n      ({\n        ...spec,\n        pathObj: transformPathStringToObj(spec.path),\n        isRepeated: spec.path.split(\".\").some((part) => part.endsWith(\"[]\")),\n      } as Internal$StateSpec<any>)\n  );\n\n  const rec = (currentPath: (string | symbol)[]): StateSpecNode<any> => {\n    const node = new StateSpecNode(\n      internalSpec.filter((spec) =>\n        shallowEqual(currentPath, spec.pathObj.slice(0, currentPath.length))\n      )!\n    );\n    node.getAllSpecs().forEach((spec) => {\n      if (spec.pathObj.length > currentPath.length) {\n        const nextKey = spec.pathObj[currentPath.length];\n        if (!node.hasEdge(nextKey)) {\n          node.addEdge(nextKey, rec([...currentPath, nextKey]));\n        }\n      }\n    });\n    return node;\n  };\n\n  return rec([]);\n}\n\nexport function updateTree(root: StateSpecNode<any>, specs: $StateSpec<any>[]) {\n  const internalSpec = specs.map(\n    (spec) =>\n      ({\n        ...spec,\n        pathObj: transformPathStringToObj(spec.path),\n        isRepeated: spec.path.split(\".\").some((part) => part.endsWith(\"[]\")),\n      } as Internal$StateSpec<any>)\n  );\n\n  const rec = (\n    oldNode: StateSpecNode<any> | undefined,\n    currentPath: (string | symbol)[]\n  ): StateSpecNode<any> => {\n    const nodeSpecs = internalSpec.filter((spec) =>\n      shallowEqual(currentPath, spec.pathObj.slice(0, currentPath.length))\n    )!;\n    const node = oldNode ?? new StateSpecNode(nodeSpecs);\n    node.setSpecs(nodeSpecs);\n    const oldEdges = oldNode?.edges();\n    node.clearEdges();\n    node.getAllSpecs().forEach((spec) => {\n      if (spec.pathObj.length > currentPath.length) {\n        const nextKey = spec.pathObj[currentPath.length];\n        if (!node.hasEdge(nextKey)) {\n          node.addEdge(\n            nextKey,\n            rec(oldEdges?.get(nextKey), [...currentPath, nextKey])\n          );\n        }\n      }\n    });\n    return node;\n  };\n\n  return rec(root, []);\n}\n\nexport function getSpecTreeLeaves(root: StateSpecNode<any>) {\n  const leaves: StateSpecNode<any>[] = [];\n  const rec = (node: StateSpecNode<any>) => {\n    for (const child of node.children()) {\n      rec(child);\n    }\n    if (node.isLeaf() && node.getAllSpecs().length > 0) {\n      leaves.push(node);\n    }\n  };\n  rec(root);\n  return leaves;\n}\n\nexport function findStateCell(\n  root: StateSpecNode<any>,\n  pathStr: string,\n  repetitionIndex?: number[]\n) {\n  const realPath: ObjectPath = [];\n  const pathObj = transformPathStringToObj(pathStr);\n  let currRepIndex = 0;\n  for (const part of pathObj) {\n    if (typeof part === \"symbol\") {\n      if (\n        !root.hasArrayTransition() ||\n        !repetitionIndex ||\n        currRepIndex > repetitionIndex.length\n      ) {\n        throw new Error(\n          `transition not found: pathStr ${pathStr} part ${\n            typeof part === \"symbol\" ? \"[]\" : part\n          }`\n        );\n      }\n      realPath.push(repetitionIndex[currRepIndex++]);\n      root = root.makeTransition(ARRAY_SYMBOL)!;\n    } else {\n      if (!root.hasEdge(part)) {\n        throw new Error(\n          `transition not found: pathStr ${pathStr} part ${\n            typeof part === \"symbol\" ? \"[]\" : part\n          }`\n        );\n      }\n      realPath.push(part);\n      root = root.makeTransition(part)!;\n    }\n  }\n  return {\n    node: root,\n    realPath,\n  };\n}\n","import clone from \"clone\";\nimport get from \"dlv\";\nimport React from \"react\";\nimport {\n  proxy as createValtioProxy,\n  ref as createValtioRef,\n  getVersion as isValtioProxy,\n  subscribe,\n  useSnapshot,\n} from \"valtio\";\nimport { ensure } from \"../common\";\nimport {\n  CyclicStatesReferencesError,\n  InvalidOperation,\n  UnknownError,\n} from \"./errors\";\nimport {\n  StateSpecNode,\n  buildTree,\n  findStateCell,\n  getSpecTreeLeaves,\n  updateTree,\n} from \"./graph\";\nimport {\n  arrayEq,\n  deepEqual,\n  getStateCells,\n  set,\n  useIsomorphicLayoutEffect,\n} from \"./helpers\";\nimport {\n  $State,\n  $StateSpec,\n  DeprecatedInitFunc,\n  DollarStateEnv,\n  InitFunc,\n  InitFuncEnv,\n  Internal$State,\n  NoUndefinedField,\n  ObjectPath,\n  PLASMIC_STATE_PROXY_SYMBOL,\n  StateCell,\n  UNINITIALIZED,\n} from \"./types\";\nimport defer = setTimeout;\n\nfunction isNum(value: string | number | symbol): value is number {\n  return typeof value === \"symbol\" ? false : !isNaN(+value);\n}\n\nfunction canProxy(value: any) {\n  return typeof value === \"object\" && value != null;\n}\n\nexport const proxyObjToStateCell = new WeakMap<\n  object,\n  Record<string | number | symbol, StateCell<any>>\n>();\nexport const valtioSubscriptions = new WeakMap<\n  object,\n  ReturnType<typeof subscribe>[]\n>();\n\nfunction ensureStateCell(\n  target: any,\n  property: string | number | symbol,\n  path: ObjectPath,\n  node: StateSpecNode<any>\n) {\n  if (!proxyObjToStateCell.has(target)) {\n    proxyObjToStateCell.set(target, {});\n  }\n  const stateCell = proxyObjToStateCell.get(target)!;\n  if (!(property in stateCell)) {\n    stateCell[property as any] = {\n      listeners: [],\n      initialValue: UNINITIALIZED,\n      path,\n      node,\n      initFunc: node.getSpec().initFunc,\n      initFuncHash: node.getSpec().initFuncHash ?? \"\",\n    };\n  }\n  return stateCell[property as any];\n}\n\nfunction getStateCell(target: any, property: string | number | symbol) {\n  return proxyObjToStateCell.get(target)?.[property as any];\n}\n\nexport function tryGetStateCellFrom$StateRoot(\n  $state: $State,\n  path: ObjectPath\n) {\n  if (path.length === 0) {\n    throw new UnknownError(\"expected a path with length greater than 0\");\n  }\n  const target = get($state, path.slice(0, -1));\n  get(target, path.slice(-1)); // create state cell;\n  return getStateCell(target, path.slice(-1)[0]);\n}\n\nexport function getStateCellFrom$StateRoot($state: $State, path: ObjectPath) {\n  return ensure(tryGetStateCellFrom$StateRoot($state, path));\n}\n\nexport function unsubscribeToValtio(\n  $$state: Internal$State,\n  statePath: ObjectPath\n) {\n  const oldValue = get($$state.stateValues, statePath);\n  if (isValtioProxy(oldValue)) {\n    valtioSubscriptions.get(oldValue)?.forEach((f) => f());\n    valtioSubscriptions.delete(oldValue);\n  }\n}\n\nexport function subscribeToValtio(\n  $$state: Internal$State,\n  statePath: ObjectPath,\n  node: StateSpecNode<any>\n) {\n  const spec = node.getSpec();\n  const maybeValtioProxy = spec.valueProp\n    ? $$state.env.$props[spec.valueProp]\n    : get($$state.stateValues, statePath);\n  if (\n    isValtioProxy(maybeValtioProxy) &&\n    (spec.onChangeProp || (spec.onMutate && node.isLeaf()))\n  ) {\n    const unsub = subscribe(maybeValtioProxy, () => {\n      if (spec.onMutate && node.isLeaf()) {\n        spec.onMutate(\n          maybeValtioProxy,\n          spec.refName ? $$state.env.$refs[spec.refName] : undefined\n        );\n      }\n      $$state.env.$props[spec.onChangeProp!]?.(\n        spec.valueProp\n          ? $$state.env.$props[spec.valueProp]\n          : get($$state.stateValues, statePath)\n      );\n    });\n    if (!valtioSubscriptions.has(maybeValtioProxy)) {\n      valtioSubscriptions.set(maybeValtioProxy, []);\n    }\n    ensure(valtioSubscriptions.get(maybeValtioProxy)).push(unsub);\n  }\n}\n\nfunction initializeStateValue(\n  $$state: Internal$State,\n  initialStateCell: StateCell<any>,\n  proxyRoot: any\n) {\n  const initialStateName = initialStateCell.node.getSpec().path;\n  const stateAccess: Set<{\n    stateCell: StateCell<any>;\n  }> = new Set();\n  $$state.stateInitializationEnv.visited.add(initialStateName);\n  $$state.stateInitializationEnv.stack.push(initialStateName);\n  const $state = create$StateProxy($$state, (internalStateCell) => ({\n    get() {\n      const spec = internalStateCell.node.getSpec();\n      if ($$state.stateInitializationEnv.visited.has(spec.path)) {\n        // cyclic reference found\n        const stateAccessCycle: string[] = [spec.path];\n        while ($$state.stateInitializationEnv.stack.length > 0) {\n          const curr = $$state.stateInitializationEnv.stack.pop();\n          if (!curr) {\n            break;\n          }\n          stateAccessCycle.push(curr);\n          if (curr === spec.path) {\n            throw new CyclicStatesReferencesError(stateAccessCycle);\n          }\n        }\n        throw new UnknownError(\"Internal error: cycle not found\");\n      }\n\n      const stateCell = getStateCellFrom$StateRoot(\n        proxyRoot,\n        internalStateCell.path\n      );\n      stateAccess.add({ stateCell });\n      if (spec.valueProp) {\n        return $$state.env.$props[spec.valueProp];\n      } else if (spec.initFunc && stateCell.initialValue === UNINITIALIZED) {\n        return initializeStateValue($$state, stateCell, proxyRoot);\n      }\n      return get(proxyRoot, stateCell.path);\n    },\n    set() {\n      throw new InvalidOperation(\n        `Cannot update state values during initialization`\n      );\n    },\n  }));\n\n  stateAccess.forEach(({ stateCell }) => {\n    stateCell.listeners.push(() => {\n      const newValue = invokeInitFuncBackwardsCompatible(\n        initialStateCell.node.getSpec().initFunc!,\n        {\n          $state,\n          ...(initialStateCell.overrideEnv ?? $$state.env),\n        }\n      );\n      set(proxyRoot, initialStateCell.path, newValue);\n    });\n  });\n\n  const initialValue = invokeInitFuncBackwardsCompatible(\n    initialStateCell.initFunc!,\n    {\n      $state,\n      ...(initialStateCell.overrideEnv ?? $$state.env),\n    }\n  );\n  const initialSpec = initialStateCell.node.getSpec();\n\n  // Try to clone initialValue. It can fail if it's a PlasmicUndefinedDataProxy\n  // and we still want to clear some states and return the initialValue.\n  try {\n    const clonedValue = clone(initialValue);\n    initialStateCell.initialValue = clonedValue;\n\n    const value = initialSpec.isImmutable\n      ? mkUntrackedValue(initialValue)\n      : clonedValue;\n    set(proxyRoot, initialStateCell.path, value);\n  } catch {\n    // Setting the state to undefined to make sure it gets re-initialized\n    // in case it changes values.\n    initialStateCell.initialValue = undefined;\n    set(proxyRoot, initialStateCell.path, undefined);\n  }\n\n  $$state.stateInitializationEnv.visited.delete(initialStateName);\n  $$state.stateInitializationEnv.stack.pop();\n\n  return initialValue;\n}\n\nfunction create$StateProxy(\n  $$state: Internal$State,\n  leafHandlers: (stateCell: StateCell<any>) => ProxyHandler<any>\n) {\n  let proxyRoot: any;\n  const rec = (currPath: ObjectPath, currNode: StateSpecNode<any>) => {\n    const getNextPath = (property: string | number | symbol) => [\n      ...currPath,\n      isNum(property) ? +property : (property as string),\n    ];\n    const spec = currNode.getSpec();\n    const handlers: ProxyHandler<any> = {\n      deleteProperty(target, property) {\n        if (\n          !currNode.isLeaf() &&\n          !currNode.hasArrayTransition() &&\n          !isNum(property)\n        ) {\n          throw new InvalidOperation(\n            \"Can't delete a property in the middle of the state spec\"\n          );\n        }\n        delete get($$state.stateValues, currPath)[property];\n        if (spec.onChangeProp) {\n          //we are always in a leaf, since we only have two cases:\n          // 1 - delete properties outside the state tree\n          // 2 - delete indices in repeated implicit states, but these can't be exposed, so they don't have onChangeProp\n          $$state.env.$props[spec.onChangeProp]?.(\n            get(proxyRoot, currPath.slice(spec.pathObj.length))\n          );\n        }\n        return Reflect.deleteProperty(target, property);\n      },\n      get(target, property, receiver) {\n        if (property === PLASMIC_STATE_PROXY_SYMBOL) {\n          return {\n            node: currNode,\n            path: currPath,\n          };\n        }\n        const nextPath = getNextPath(property);\n\n        const nextNode = currNode.makeTransition(property);\n        if (nextNode?.isLeaf()) {\n          return leafHandlers(\n            ensureStateCell(receiver, property, nextPath, nextNode)\n          ).get?.(target, property, receiver);\n        } else if (nextNode && !(property in target)) {\n          target[property] = rec(nextPath, nextNode);\n        }\n        return Reflect.get(target, property, receiver);\n      },\n      set(target, property, value, receiver) {\n        const nextPath = getNextPath(property);\n        const nextNode = currNode.makeTransition(property);\n        const nextSpec = nextNode?.getSpec();\n\n        if (\n          (property === \"registerInitFunc\" ||\n            property === \"eagerInitializeStates\") &&\n          currPath.length === 0\n        ) {\n          return Reflect.set(target, property, value, receiver);\n        }\n        if (!nextNode && currNode.hasArrayTransition()) {\n          set($$state.stateValues, nextPath, value);\n          //array can set his own properties such as length, map, ...\n          return Reflect.set(target, property, value, receiver);\n        }\n        if (nextNode?.isLeaf()) {\n          leafHandlers(\n            ensureStateCell(receiver, property, nextPath, nextNode)\n          ).set?.(target, property, value, receiver);\n          Reflect.set(target, property, value, receiver);\n          if (nextSpec?.onChangeProp) {\n            const pathKey = JSON.stringify(nextPath);\n            const isInitOnChange =\n              // If we are dealing with a valueProp it means that this state cell value is provided by the parent\n              // and we don't need to consider initialization calls for it.\n              !nextSpec.valueProp && !$$state.initializedLeafPaths.has(pathKey);\n\n            // We need to call the onChangeProp during initialization process so that the parent\n            // state can be updated with the correct value. We will provide an additional parameter\n            // to the onChangeProp function to indicate that the call is made during initialization.\n            $$state.env.$props[nextSpec.onChangeProp]?.(value, {\n              _plasmic_state_init_: isInitOnChange,\n            });\n\n            if (isInitOnChange) {\n              $$state.initializedLeafPaths.add(pathKey);\n            }\n          }\n        }\n        if (!nextNode) {\n          // can't set an unknown field in $state\n          return false;\n        }\n        if (canProxy(value) && !nextNode.isLeaf()) {\n          target[property] = rec(nextPath, nextNode);\n          Reflect.ownKeys(value).forEach((key) => {\n            target[property][key] = value[key];\n          });\n        } else if (!nextNode.isLeaf()) {\n          throw new InvalidOperation(\n            \"inserting a primitive value into a non-leaf\"\n          );\n        }\n        const newValue =\n          nextNode.isLeaf() && nextSpec?.isImmutable\n            ? mkUntrackedValue(value)\n            : value;\n\n        unsubscribeToValtio($$state, nextPath);\n        set($$state.stateValues, nextPath, newValue);\n        subscribeToValtio($$state, nextPath, nextNode);\n        return true;\n      },\n    };\n    const baseObject = currNode.hasArrayTransition() ? [] : {};\n    const proxyObj = new Proxy(baseObject, handlers);\n    if (currPath.length === 0) {\n      proxyRoot = proxyObj;\n    }\n    return proxyObj;\n  };\n\n  return rec([], $$state.rootSpecTree);\n}\n\nconst mkUntrackedValue = (o: any) =>\n  o != null && typeof o === \"object\" ? createValtioRef(o) : o;\n\nconst envFieldsAreNonNill = (\n  env: DollarStateEnv\n): NoUndefinedField<DollarStateEnv> => ({\n  $props: env.$props,\n  $ctx: env.$ctx ?? {},\n  $queries: env.$queries ?? {},\n  $refs: env.$refs ?? {},\n});\n\n/**\n * We need to support two versions with different parameters to be backward compatible\n *    {\n *       specs: $StateSpec<any>[],\n *       props: Record<string, any>,\n *       $ctx?: Record<string, any>,\n *       opts?: { inCanvas: boolean; }\n *    }\n *    {\n *       specs: $StateSpec<any>[],\n *       env: { $props; $queries; $ctx },\n *       opts?: { inCanvas: boolean }\n *    }\n */\nfunction extractDollarStateParametersBackwardCompatible(...rest: any[]): {\n  env: DollarStateEnv;\n  opts?: { inCanvas: boolean };\n} {\n  if (\"$props\" in rest[0]) {\n    // latest version\n    return {\n      env: rest[0],\n      opts: rest[1],\n    };\n  } else {\n    return {\n      env: {\n        $props: rest[0],\n        $ctx: rest[1],\n        $queries: {},\n      },\n      opts: rest[2],\n    };\n  }\n}\n\nfunction invokeInitFuncBackwardsCompatible<T>(\n  initFunc: InitFunc<T> | DeprecatedInitFunc<T>,\n  env: NoUndefinedField<InitFuncEnv>\n) {\n  if (initFunc.length > 1) {\n    return (initFunc as DeprecatedInitFunc<T>)(\n      env.$props,\n      env.$state,\n      env.$ctx\n    );\n  } else {\n    return (initFunc as InitFunc<T>)(env);\n  }\n}\n\nexport function useDollarState(\n  specs: $StateSpec<any>[],\n  ...rest: any[]\n): $State {\n  const { env, opts } = extractDollarStateParametersBackwardCompatible(...rest);\n  const [, setState] = React.useState<[]>();\n\n  const mountedRef = React.useRef<boolean>(false);\n  const isMounted = React.useCallback(() => mountedRef.current, []);\n\n  React.useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  const pendingUpdate = React.useRef(false);\n\n  const forceUpdate = React.useCallback(\n    () =>\n      defer(() => {\n        if (isMounted()) {\n          setState([]);\n          pendingUpdate.current = false;\n        }\n      }),\n    []\n  );\n\n  const $$state = React.useRef<Internal$State>(\n    (() => {\n      const rootSpecTree = buildTree(specs);\n      return {\n        rootSpecTree: rootSpecTree,\n        specTreeLeaves: getSpecTreeLeaves(rootSpecTree),\n        stateValues: createValtioProxy({}),\n        env: envFieldsAreNonNill(env),\n        specs: [],\n        registrationsQueue: [],\n        stateInitializationEnv: { stack: [], visited: new Set<string>() },\n        initializedLeafPaths: new Set(),\n      };\n    })()\n  ).current;\n  $$state.env = envFieldsAreNonNill(env);\n  $$state.specs = specs;\n\n  const create$State = React.useCallback(() => {\n    const $state = Object.assign(\n      create$StateProxy($$state, (stateCell) => {\n        const spec = stateCell.node.getSpec();\n        if (stateCell.initialValue === UNINITIALIZED && spec.initFunc) {\n          initializeStateValue($$state, stateCell, $state);\n        } else if (\n          stateCell.initialValue === UNINITIALIZED &&\n          !spec.valueProp\n        ) {\n          stateCell.initialValue = spec.initVal;\n          set($state, stateCell.path, spec.initVal);\n        }\n        return {\n          get() {\n            const currSpec = stateCell.node.getSpec();\n            if (currSpec.valueProp) {\n              const valueProp = $$state.env.$props[currSpec.valueProp];\n              subscribeToValtio($$state, stateCell.path, stateCell.node);\n              return valueProp;\n            } else {\n              return get($$state.stateValues, stateCell.path);\n            }\n          },\n        };\n      }),\n      {\n        registerInitFunc: function <T>(\n          pathStr: string,\n          f: InitFunc<T>,\n          repetitionIndex?: number[],\n          overrideEnv?: DollarStateEnv\n        ) {\n          const { node, realPath } = findStateCell(\n            $$state.rootSpecTree,\n            pathStr,\n            repetitionIndex\n          );\n          const stateCell = getStateCellFrom$StateRoot($state, realPath);\n          const innerEnv = overrideEnv\n            ? envFieldsAreNonNill(overrideEnv)\n            : $$state.env;\n          if (!deepEqual(stateCell.initialValue, f({ $state, ...innerEnv }))) {\n            $$state.registrationsQueue.push({\n              node,\n              path: realPath,\n              f,\n              overrideEnv: overrideEnv\n                ? envFieldsAreNonNill(overrideEnv)\n                : undefined,\n            });\n            if (!pendingUpdate.current) {\n              pendingUpdate.current = true;\n              forceUpdate();\n            }\n          }\n        },\n        ...(opts?.inCanvas\n          ? {\n              eagerInitializeStates: (stateSpecs: $StateSpec<any>[]) => {\n                // we need to eager initialize all states in canvas to populate the data picker\n                $$state.specTreeLeaves.forEach((node) => {\n                  const spec = node.getSpec();\n                  if (spec.isRepeated) {\n                    return;\n                  }\n                  const stateCell = getStateCellFrom$StateRoot(\n                    $state,\n                    spec.pathObj as string[]\n                  );\n                  const newSpec = stateSpecs.find(\n                    (sp) => sp.path === spec.path\n                  );\n                  if (\n                    !newSpec ||\n                    (stateCell.initFuncHash === (newSpec?.initFuncHash ?? \"\") &&\n                      stateCell.initialValue !== UNINITIALIZED)\n                  ) {\n                    return;\n                  }\n                  stateCell.initFunc = newSpec.initFunc;\n                  stateCell.initFuncHash = newSpec.initFuncHash ?? \"\";\n                  const init = spec.valueProp\n                    ? $$state.env.$props[spec.valueProp]\n                    : spec.initFunc\n                    ? initializeStateValue($$state, stateCell, $state)\n                    : spec.initVal;\n                  set($state, spec.pathObj, init);\n                });\n              },\n            }\n          : {}),\n      }\n    );\n    return $state;\n  }, [opts?.inCanvas]);\n  const ref = React.useRef<undefined | $State>(undefined);\n  if (!ref.current) {\n    ref.current = create$State();\n  }\n  let $state = ref.current as $State;\n  if (opts?.inCanvas) {\n    $$state.rootSpecTree = updateTree($$state.rootSpecTree, specs);\n    const newLeaves = getSpecTreeLeaves($$state.rootSpecTree);\n    if (!arrayEq(newLeaves, $$state.specTreeLeaves)) {\n      const old$state = $state;\n      $state = ref.current = create$State();\n      $$state.specTreeLeaves = newLeaves;\n      getStateCells(old$state, $$state.rootSpecTree).forEach(({ path }) => {\n        const oldStateCell = tryGetStateCellFrom$StateRoot(old$state, path);\n        if (oldStateCell) {\n          set($state, path, get(old$state, path));\n          const newStateCell = getStateCellFrom$StateRoot($state, path);\n          newStateCell.initialValue = oldStateCell.initialValue;\n        }\n      });\n    }\n  }\n\n  const reInitializeState = (stateCell: StateCell<any>) => {\n    const newInit = initializeStateValue($$state, stateCell, $state);\n    const spec = stateCell.node.getSpec();\n    if (spec.onChangeProp) {\n      $$state.env.$props[spec.onChangeProp]?.(newInit);\n    }\n  };\n  useIsomorphicLayoutEffect(() => {\n    // For each spec with an initFunc, evaluate it and see if\n    // the init value has changed. If so, reset its state.\n    const resetSpecs: {\n      stateCell: StateCell<any>;\n    }[] = [];\n    getStateCells($state, $$state.rootSpecTree).forEach((stateCell) => {\n      if (stateCell.initFunc) {\n        try {\n          const newInit = invokeInitFuncBackwardsCompatible(\n            stateCell.initFunc,\n            {\n              $state,\n              ...(stateCell.overrideEnv ?? envFieldsAreNonNill(env)),\n            }\n          );\n          if (!deepEqual(newInit, stateCell.initialValue)) {\n            resetSpecs.push({ stateCell });\n          }\n        } catch {\n          // Exception may be thrown from initFunc -- for example, if it tries to access $queries\n          // that are still loading. We swallow those here, since we're only interested in\n          // checking if the init value has changed, not in handling these errors.\n        }\n      }\n    });\n    resetSpecs.forEach(({ stateCell }) => {\n      reInitializeState(stateCell);\n    });\n  }, [env.$props, $state, $$state, reInitializeState]);\n  useIsomorphicLayoutEffect(() => {\n    while ($$state.registrationsQueue.length) {\n      const { path, f, overrideEnv } = $$state.registrationsQueue.shift()!;\n      const stateCell = getStateCellFrom$StateRoot($state, path);\n      stateCell.initFunc = f;\n      stateCell.overrideEnv = overrideEnv;\n      reInitializeState(stateCell);\n    }\n  });\n  // immediately initialize exposed non-private states\n  useIsomorphicLayoutEffect(() => {\n    $$state.specTreeLeaves.forEach((node) => {\n      const spec = node.getSpec();\n      if (!spec.isRepeated && spec.type !== \"private\") {\n        // We only need to attempt to access the state cell to trigger initialization,\n        // Check create$StateProxy for more details on how this works.\n        getStateCellFrom$StateRoot($state, spec.pathObj as ObjectPath);\n      }\n    });\n  }, []);\n\n  // Re-render if any value changed in one of these objects\n  useSnapshot($$state.stateValues, { sync: true });\n  return $state;\n}\n\nexport default useDollarState;\n","import type { ComponentHelpers } from \"@plasmicapp/host\";\nimport get from \"dlv\";\nimport { useEffect, useLayoutEffect } from \"react\";\nimport { getVersion as isValtioProxy } from \"valtio\";\nimport { ensure } from \"../common\";\nimport { StateSpecNode } from \"./graph\";\nimport {\n  $State,\n  ARRAY_SYMBOL,\n  InitFunc,\n  ObjectPath,\n  PLASMIC_STATE_PROXY_SYMBOL,\n  StateCell,\n} from \"./types\";\nimport { proxyObjToStateCell, tryGetStateCellFrom$StateRoot } from \"./valtio\";\n\nexport function initializeCodeComponentStates(\n  $state: $State,\n  states: {\n    name: string;\n    plasmicStateName: string;\n  }[],\n  repetitionIndex: number[],\n  componentHelpers: ComponentHelpers<any>,\n  child$Props: Record<string, any>\n) {\n  const stateHelpers = componentHelpers?.states ?? {};\n  for (const { name, plasmicStateName } of states) {\n    if (name in stateHelpers && \"initFunc\" in stateHelpers[name]) {\n      $state.registerInitFunc?.(\n        plasmicStateName,\n        ({ $props }) => stateHelpers[name].initFunc?.($props),\n        repetitionIndex ?? [],\n        { $props: child$Props }\n      );\n    }\n  }\n}\n\nexport function generateOnMutateForSpec(\n  stateName: string,\n  componentHelpers: ComponentHelpers<any>\n) {\n  return componentHelpers?.states?.[stateName]?.onMutate;\n}\n\nexport function initializePlasmicStates(\n  $state: $State,\n  states: {\n    name: string;\n    initFunc: InitFunc<any>;\n  }[],\n  repetitionIndex: number[]\n) {\n  for (const { name, initFunc } of states) {\n    $state.registerInitFunc?.(name, initFunc, repetitionIndex ?? []);\n  }\n}\n\nexport function generateStateOnChangeProp(\n  $state: $State,\n  path: ObjectPath\n): (val: any) => void {\n  return (val) => set($state, path, val);\n}\n\nexport function generateStateOnChangePropForCodeComponents(\n  $state: $State,\n  stateName: string,\n  plasmicStatePath: ObjectPath,\n  componentHelpers: ComponentHelpers<any>\n): (val: any) => void {\n  const onChangeArgsToValue =\n    componentHelpers?.states?.[stateName]?.onChangeArgsToValue;\n  if (!onChangeArgsToValue || typeof onChangeArgsToValue !== \"function\") {\n    return generateStateOnChangeProp($state, plasmicStatePath);\n  }\n  return (...args) =>\n    generateStateOnChangeProp(\n      $state,\n      plasmicStatePath\n    )(onChangeArgsToValue.apply(null, args));\n}\n\nexport function generateStateValueProp($state: $State, path: ObjectPath) {\n  return get($state, path);\n}\n\nexport const useIsomorphicLayoutEffect =\n  typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n\nexport function isPlasmicStateProxy(obj: any) {\n  return (\n    obj != null && typeof obj === \"object\" && !!obj[PLASMIC_STATE_PROXY_SYMBOL]\n  );\n}\n\nexport function is$StateProxy(obj: any) {\n  return (\n    obj != null &&\n    typeof obj === \"object\" &&\n    (!!obj[PLASMIC_STATE_PROXY_SYMBOL] || isValtioProxy(obj))\n  );\n}\n\nexport function getStateCells(\n  $state: $State,\n  root: StateSpecNode<any>\n): StateCell<any>[] {\n  if ($state == null || typeof $state !== \"object\") {\n    return [];\n  }\n\n  if (root.hasArrayTransition()) {\n    return Object.keys($state).flatMap((key) =>\n      getStateCells($state[key], ensure(root.makeTransition(ARRAY_SYMBOL)))\n    );\n  } else {\n    const stateCell = proxyObjToStateCell.get($state) ?? {};\n    const stateCells: StateCell<any>[] = [];\n    for (const [key, child] of root.edges().entries()) {\n      if (typeof key === \"string\" && key in $state) {\n        stateCells.push(...getStateCells($state[key], child));\n        if (key in stateCell) {\n          stateCells.push(stateCell[key]);\n        }\n      }\n    }\n    return stateCells;\n  }\n}\n\nexport function getStateCellsInPlasmicProxy(\n  obj: any\n): { realPath: ObjectPath; path: string }[] {\n  if (!isPlasmicStateProxy(obj)) {\n    return [];\n  }\n  const {\n    node: rootNode,\n    path: rootPath,\n    isOutside,\n  } = obj[PLASMIC_STATE_PROXY_SYMBOL];\n  if (isOutside) {\n    return [];\n  }\n  return getStateCells(obj, rootNode).map((stateCell) => ({\n    path: stateCell.node.getSpec().path,\n    realPath: stateCell.path.slice(rootPath.length),\n  }));\n}\n\nexport function getStateSpecInPlasmicProxy(obj: any, path: ObjectPath) {\n  obj = get(obj, path.slice(0, path.length - 1));\n  if (!isPlasmicStateProxy(obj)) {\n    return undefined;\n  }\n  const { node } = obj[PLASMIC_STATE_PROXY_SYMBOL] as {\n    node: StateSpecNode<any>;\n  };\n  const nextNode = node.makeTransition(path[path.length - 1]);\n  if (node.isLeaf() || !nextNode) {\n    return undefined;\n  }\n  return {\n    spec: nextNode.getSpec(),\n    isImplicitStateArray: nextNode.hasArrayTransition(),\n  };\n}\n\nexport function getCurrentInitialValue(obj: any, path: ObjectPath) {\n  if (!isPlasmicStateProxy(obj)) {\n    return undefined;\n  }\n  return tryGetStateCellFrom$StateRoot(obj, path)?.initialValue;\n}\n\nexport function resetToInitialValue(obj: any, path: ObjectPath) {\n  const stateCell = tryGetStateCellFrom$StateRoot(obj, path);\n  if (stateCell) {\n    set(obj, path, stateCell.initialValue);\n  }\n}\n\nexport function shallowEqual<T>(a1: T[], a2: T[]) {\n  if (a1.length !== a2.length) {\n    return false;\n  }\n  for (let i = 0; i < a1.length; i++) {\n    if (a1[i] !== a2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Shallow comparison of arrays.\n */\nexport function arrayEq(xs: ReadonlyArray<any>, ys: ReadonlyArray<any>) {\n  return (\n    xs.length === ys.length && xs.every((_, index) => xs[index] === ys[index])\n  );\n}\n\nexport function isNum(value: string | number | symbol): value is number {\n  return typeof value === \"symbol\" ? false : !isNaN(+value);\n}\n\ntype StringGen = string | (() => string);\nexport function assert<T>(\n  cond: T,\n  msg: StringGen = \"Assertion failed\"\n): asserts cond {\n  if (!cond) {\n    // We always generate an non empty message so that it doesn't get swallowed\n    // by the async library.\n    msg = (typeof msg === \"string\" ? msg : msg()) || \"Assertion failed\";\n    debugger;\n    throw new Error(msg);\n  }\n}\n\n/**\n * Forked from https://github.com/lukeed/dset\n * Changes: fixed setting a deep value to a proxy object\n */\nexport function set(obj: any, keys: any, val: any) {\n  keys = keys.split ? keys.split(\".\") : keys;\n  var i = 0,\n    l = keys.length,\n    t = obj,\n    x,\n    k;\n  while (i < l) {\n    k = keys[i++];\n    if (k === \"__proto__\" || k === \"constructor\" || k === \"prototype\") break;\n    const newValue =\n      i === l\n        ? val\n        : typeof (x = t[k]) === typeof keys\n        ? x\n        : keys[i] * 0 !== 0 || !!~(\"\" + keys[i]).indexOf(\".\")\n        ? {}\n        : [];\n    assignValue(t, k, newValue);\n    t = t[k];\n  }\n}\n\n/**\n * Forked from lodash\n */\nfunction baseAssignValue(object: any, key: any, value: any) {\n  if (key == \"__proto__\") {\n    Object.defineProperty(object, key, {\n      configurable: true,\n      enumerable: true,\n      value: value,\n      writable: true,\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nfunction eq(value: any, other: any) {\n  return value === other || (value !== value && other !== other);\n}\n\nfunction assignValue(object: any, key: any, value: any) {\n  const objValue = object[key];\n  if (\n    !(\n      Object.prototype.hasOwnProperty.call(object, key) && eq(objValue, value)\n    ) ||\n    (value === undefined && !(key in object))\n  ) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nconst isInstanceOfMap = (a: any) =>\n  a != null &&\n  typeof a === \"object\" &&\n  \"size\" in a &&\n  typeof a.entries === \"function\" &&\n  typeof a.get === \"function\" &&\n  typeof a.set === \"function\" &&\n  typeof a.has === \"function\";\n\nconst isInstanceOfSet = (a: any) =>\n  a != null &&\n  typeof a === \"object\" &&\n  \"size\" in a &&\n  typeof a.entries === \"function\" &&\n  typeof a.add === \"function\" &&\n  typeof a.has === \"function\" &&\n  typeof a.delete === \"function\";\n\nconst isRegExp = (a: any) =>\n  Object.prototype.toString.call(a) === \"[object RegExp]\";\n\n/**\n * Forked from https://github.com/epoberezkin/fast-deep-equal/blob/master/src/index.jst\n * Changes: removed the comparison between constructors and instanceof objects\n * because they are dependent on the window object\n */\nexport function deepEqual(a: any, b: any) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n    // if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0; ) if (!deepEqual(a[i], b[i])) return false;\n      return true;\n    }\n\n    // if ((a instanceof Map) && (b instanceof Map)) {\n    if (isInstanceOfMap(a) && isInstanceOfMap(b)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries()) if (!b.has(i[0])) return false;\n      for (i of a.entries()) if (!deepEqual(i[1], b.get(i[0]))) return false;\n      return true;\n    }\n\n    // if ((a instanceof Set) && (b instanceof Set)) {\n    if (isInstanceOfSet(a) && isInstanceOfSet(b)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries()) if (!b.has(i[0])) return false;\n      return true;\n    }\n\n    // if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (isRegExp(a) && isRegExp(b))\n      return a.source === b.source && a.flags === b.flags;\n    // if (a.valueOf !== Object.prototype.valueOf)\n    //   return a.valueOf() === b.valueOf();\n    // if (a.toString !== Object.prototype.toString)\n    //   return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0; )\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0; ) {\n      var key = keys[i];\n      if (key === \"_owner\" && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        continue;\n      }\n      if (!deepEqual(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a !== a && b !== b;\n}\n","// Utilities used by generated code\nimport _classNames from \"classnames\";\nexport { PlasmicTranslator } from \"@plasmicapp/host\";\nexport {\n  PlasmicPageGuard,\n  withPlasmicPageGuard,\n} from \"./auth/PlasmicPageGuard\";\nexport { omit, pick } from \"./common\";\nexport { HTMLElementRefOf, StrictProps } from \"./react-utils\";\nexport {\n  Flex,\n  MultiChoiceArg,\n  SingleBooleanChoiceArg,\n  SingleChoiceArg,\n  createPlasmicElementProxy,\n  deriveRenderOpts,\n  hasVariant,\n  makeFragment,\n  mergeVariantsWithStates,\n  wrapWithClassName,\n} from \"./render/elements\";\nexport { ensureGlobalVariants } from \"./render/global-variants\";\nexport { PlasmicHead, plasmicHeadMeta } from \"./render/PlasmicHead\";\nexport { PlasmicIcon } from \"./render/PlasmicIcon\";\nexport { PlasmicImg } from \"./render/PlasmicImg\";\nexport { PlasmicLink } from \"./render/PlasmicLink\";\nexport { PlasmicSlot, renderPlasmicSlot } from \"./render/PlasmicSlot\";\nexport { createUseScreenVariants } from \"./render/screen-variants\";\nexport {\n  PlasmicDataSourceContextProvider,\n  PlasmicRootProvider,\n  useCurrentUser,\n  useIsSSR,\n} from \"./render/ssr\";\nexport { Stack } from \"./render/Stack\";\nexport {\n  Trans,\n  genTranslatableString,\n  usePlasmicTranslator,\n} from \"./render/translation\";\nexport { useTrigger } from \"./render/triggers\";\nexport * from \"./states\";\n// Using any while classnames package is not updated to have the correct types exported\nexport const classNames: any = _classNames;\n","import * as React from \"react\";\nimport { groupBy, mapValues } from \"../common\";\nimport { SingleChoiceArg } from \"../render/elements\";\n\nexport let PLUME_STRICT_MODE = true;\n\nexport function setPlumeStrictMode(mode: boolean) {\n  PLUME_STRICT_MODE = mode;\n}\n\ntype VariantArgChoices<T> = T extends (infer M)[]\n  ? M\n  : T extends SingleChoiceArg<infer M>\n  ? M\n  : never;\ntype VariantArgsChoices<V> = { [k in keyof V]-?: VariantArgChoices<V[k]> };\ntype DictValues<V extends Record<string, any>> = V[keyof V];\ntype DictTuples<V extends Record<string, any>> = DictValues<\n  { [K in keyof V]: [K, V[K]] }\n>;\nexport type VariantDefTuple<V> = DictTuples<VariantArgsChoices<V>>;\n\ntype DistributeTuple<T> = T extends [infer T1, infer T2]\n  ? { group: T1; variant: T2 }\n  : never;\n\nexport type VariantDef<V> = DistributeTuple<VariantDefTuple<V>>;\n\nexport type PlasmicClass<\n  V extends Record<string, any>,\n  A extends Record<string, any>,\n  O extends Record<string, any>\n> = {\n  (props: { variants?: V; args?: A; overrides?: O }): React.ReactElement | null;\n  internalVariantProps: (keyof V)[];\n  internalArgProps: (keyof A)[];\n};\n\nexport type AnyPlasmicClass = PlasmicClass<any, any, any>;\n\nexport type PlasmicClassVariants<\n  C extends AnyPlasmicClass\n> = C extends PlasmicClass<infer V, any, any> ? V : unknown;\nexport type PlasmicClassArgs<\n  C extends AnyPlasmicClass\n> = C extends PlasmicClass<any, infer A, any> ? A : unknown;\nexport type PlasmicClassOverrides<\n  C extends AnyPlasmicClass\n> = C extends PlasmicClass<any, any, infer O> ? O : unknown;\n\ntype BooleanLike = boolean | undefined | null;\n\nexport function mergeVariantToggles<V>(\n  ...toggles: { def?: VariantDef<V>; active: BooleanLike }[]\n) {\n  const definedToggles = toggles.filter((x) => !!x.def) as {\n    def: VariantDef<V>;\n    active: BooleanLike;\n  }[];\n  const grouped = groupBy(definedToggles, ({ def }) => def.group as string);\n  return mapValues(grouped, (subToggles) => {\n    return Object.fromEntries(\n      subToggles.map(({ def, active }) => [def.variant, !!active])\n    );\n  });\n}\n\nexport function noOutline() {\n  return { outline: \"none\" };\n}\n\nexport function getPlumeType(child: React.ReactChild): string | undefined {\n  if (!React.isValidElement(child)) {\n    return undefined;\n  }\n  const childType = child.type as any;\n  return (childType.__plumeType || childType.getPlumeType?.(child.props)) as\n    | string\n    | undefined;\n}\n","import * as React from \"react\";\nimport { omit, pick } from \"../../common\";\nimport { Overrides } from \"../../render/elements\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\n\ninterface PlumeCommonProps {\n  showStartIcon?: boolean;\n  showEndIcon?: boolean;\n  startIcon?: React.ReactNode;\n  endIcon?: React.ReactNode;\n  children?: React.ReactNode;\n  isDisabled?: boolean;\n}\n\ninterface HtmlButtonProps\n  extends Omit<React.ComponentProps<\"button\">, \"ref\" | \"disabled\"> {}\n\ninterface HtmlAnchorProps\n  extends Omit<React.ComponentProps<\"a\">, \"ref\" | \"href\" | \"target\"> {}\n\ninterface PlumeActualButtonProps {\n  submitsForm?: boolean;\n}\n\ninterface PlumeAnchorProps {\n  link?: string;\n  target?: React.ComponentProps<\"a\">[\"target\"] | boolean;\n}\n\nexport type PlumeButtonProps = PlumeCommonProps &\n  PlumeActualButtonProps &\n  PlumeAnchorProps;\n\nexport type BaseButtonProps = PlumeButtonProps &\n  HtmlButtonProps &\n  HtmlAnchorProps;\n\ntype AllButtonProps = PlumeCommonProps &\n  PlumeActualButtonProps &\n  HtmlButtonProps;\ntype AllAnchorProps = PlumeCommonProps & PlumeAnchorProps & HtmlAnchorProps;\n\nexport type HtmlAnchorOnlyProps = Exclude<\n  keyof AllAnchorProps,\n  keyof AllButtonProps\n>;\nexport type HtmlButtonOnlyProps = Exclude<\n  keyof AllButtonProps,\n  keyof AllAnchorProps\n>;\n\nexport type ButtonRef = React.Ref<HTMLButtonElement | HTMLAnchorElement>;\n\ninterface ButtonConfig<C extends AnyPlasmicClass> {\n  showStartIconVariant: VariantDef<PlasmicClassVariants<C>>;\n  showEndIconVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  startIconSlot?: keyof PlasmicClassArgs<C>;\n  endIconSlot?: keyof PlasmicClassArgs<C>;\n  contentSlot: keyof PlasmicClassArgs<C>;\n  root: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useButton<\n  P extends PlumeButtonProps,\n  C extends AnyPlasmicClass\n>(plasmicClass: C, props: P, config: ButtonConfig<C>, ref: ButtonRef = null) {\n  const {\n    link,\n    isDisabled,\n    startIcon,\n    endIcon,\n    showStartIcon,\n    showEndIcon,\n    children,\n    target,\n    submitsForm = false,\n    ...rest\n  } = props;\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.showStartIconVariant, active: showStartIcon },\n      { def: config.showEndIconVariant, active: showEndIcon },\n      { def: config.isDisabledVariant, active: isDisabled }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    ...(config.startIconSlot && { [config.startIconSlot]: startIcon }),\n    ...(config.endIconSlot && { [config.endIconSlot]: endIcon }),\n    [config.contentSlot]: children,\n  };\n\n  let buttonType = undefined;\n  if (!link) {\n    if (\n      !plasmicClass.internalVariantProps.includes(\"type\") &&\n      !plasmicClass.internalArgProps.includes(\"type\") &&\n      \"type\" in rest\n    ) {\n      // There's no Plasmic-defined variant or arg called \"type\",\n      // but the user passed in a \"type\" arg, so must be an override\n      // or direct instantiation. We use that value\n      buttonType = rest.type;\n    } else {\n      // Otherwise, we set buttonType depending in submitsForm\n      buttonType = submitsForm ? \"submit\" : \"button\";\n    }\n  }\n\n  const overrides: Overrides = {\n    [config.root]: {\n      as: link ? \"a\" : \"button\",\n      props: {\n        // Put this at the top, as user may also have set `type` as\n        // inherited from \"button\", so let `rest` override it\n        ...omit(\n          rest as any,\n          ...plasmicClass.internalArgProps,\n          ...plasmicClass.internalVariantProps\n        ),\n        type: buttonType,\n        ref: ref,\n        disabled: isDisabled,\n        target:\n          target === true ? \"_blank\" : target === false ? undefined : target,\n        ...(!!link && { href: link }),\n      },\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import * as React from \"react\";\nimport { pick, pickBy } from \"../common\";\nimport {\n  AnyPlasmicClass,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n} from \"./plume-utils\";\n\nexport interface StyleProps {\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nexport function getStyleProps<P extends StyleProps>(props: P): StyleProps {\n  return pick(props, \"className\", \"style\");\n}\n\nexport function getDefaultPlasmicProps<C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: Record<string, any>\n) {\n  return {\n    plasmicProps: {\n      variants: pick(\n        props,\n        ...plasmicClass.internalVariantProps\n      ) as PlasmicClassVariants<C>,\n      args: pick(\n        props,\n        ...plasmicClass.internalArgProps\n      ) as PlasmicClassArgs<C>,\n      overrides: {} as PlasmicClassOverrides<C>,\n    },\n  };\n}\n\nconst RE_DATA_PROP = /^(data-.*)$/;\n\nexport function getDataProps(props: Record<string, any>) {\n  return pickBy(props, (k) => RE_DATA_PROP.test(k));\n}\n","import { useCheckbox as useAriaCheckbox } from \"@react-aria/checkbox\";\nimport { VisuallyHidden } from \"@react-aria/visually-hidden\";\nimport { useToggleState } from \"@react-stately/toggle\";\nimport { AriaCheckboxProps } from \"@react-types/checkbox\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { useEnsureSSRProvider } from \"../../render/ssr\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getStyleProps, StyleProps } from \"../props-utils\";\n\nexport type CheckboxRef = React.Ref<CheckboxRefValue>;\nexport interface CheckboxRefValue extends CheckboxState {\n  getRoot: () => HTMLElement | null;\n  focus: () => void;\n  blur: () => void;\n}\n\ninterface CheckboxState {\n  setChecked: (checked: boolean) => void;\n}\n\nexport interface CheckboxProps\n  extends Omit<AriaCheckboxProps, \"isSelected\" | \"defaultSelected\">,\n    StyleProps {\n  /**\n   * Whether the Checkbox is checked or not; controlled\n   */\n  isChecked?: boolean;\n\n  /**\n   * Whether the Checkbox is checked by default; uncontrolled\n   */\n  defaultChecked?: boolean;\n\n  /**\n   * Whether the Checkbox is in an \"indeterminate\" state; this usually\n   * refers to a \"check all\" that is used to check / uncheck many other\n   * checkboxes, and is visually indeterminate if some of its controlled\n   * checkboxes are checked and some are not.\n   */\n  isIndeterminate?: boolean;\n}\n\nfunction asAriaCheckboxProps(props: CheckboxProps) {\n  const ariaProps = {\n    ...props,\n    isSelected: props.isChecked,\n    defaultSelected: props.defaultChecked,\n  };\n  delete ariaProps[\"isChecked\"];\n  delete ariaProps[\"defaultChecked\"];\n  return ariaProps;\n}\n\ninterface CheckboxConfig<C extends AnyPlasmicClass> {\n  isCheckedVariant: VariantDef<PlasmicClassVariants<C>>;\n  isIndeterminateVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  noLabelVariant?: VariantDef<PlasmicClassVariants<C>>;\n  labelSlot?: keyof PlasmicClassArgs<C>;\n  root: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useCheckbox<P extends CheckboxProps, C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: P,\n  config: CheckboxConfig<C>,\n  ref: CheckboxRef = null\n) {\n  const { children, isDisabled, isIndeterminate } = props;\n  useEnsureSSRProvider();\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const rootRef = React.useRef<HTMLElement>(null);\n  const ariaProps = asAriaCheckboxProps(props);\n  const state = useToggleState(ariaProps);\n  const { inputProps } = useAriaCheckbox(ariaProps, state, inputRef);\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      {\n        def: config.isDisabledVariant,\n        active: isDisabled,\n      },\n      {\n        def: config.isCheckedVariant,\n        active: state.isSelected,\n      },\n      {\n        def: config.isIndeterminateVariant,\n        active: isIndeterminate,\n      },\n      {\n        def: config.noLabelVariant,\n        active: !children,\n      }\n    ),\n  };\n  const overrides: Overrides = {\n    [config.root]: {\n      as: \"label\",\n      props: mergeProps(getStyleProps(props), {\n        ref: rootRef,\n      }),\n      wrapChildren: (children: React.ReactNode) => (\n        <>\n          <VisuallyHidden>\n            <input {...inputProps} ref={inputRef} />\n          </VisuallyHidden>\n          {children}\n        </>\n      ),\n    },\n  };\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    ...(config.labelSlot ? { [config.labelSlot]: children } : {}),\n  };\n\n  const plumeState: CheckboxState = React.useMemo(\n    () => ({\n      setChecked: (checked: boolean) => state.setSelected(checked),\n    }),\n    [state]\n  );\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      getRoot: () => rootRef.current,\n      focus: () => inputRef.current?.focus(),\n      blur: () => inputRef.current?.blur(),\n      setChecked: (checked) => plumeState.setChecked(checked),\n    }),\n    [rootRef, inputRef, plumeState]\n  );\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n      args: args as PlasmicClassArgs<C>,\n    },\n    state: plumeState,\n  };\n}\n","/**\n * In general, we try not to expose react-aria's Collections API to Plume users.\n * The Collections API is how react-aria users pass data about collections of\n * things using the built-in Item and Section components, which are abstract,\n * metadata-only components that don't render anything but only serve to specify\n * data.  For example, here's how you would use react-spectrum's Picker:\n *\n *   <Picker>\n *     <Section title=\"Asia\">\n *       <Item key=\"taiwan\">Taiwan</Item>\n *       <Item key=\"japan\">Japan</Item>\n *       <Item key=\"china\">China</Item>\n *     </Section>\n *     <Section title=\"Europe\">\n *       <Item key=\"germany\">Germany</Item>\n *       <Item key=\"france\">France</Item>\n *     </Section>\n *   </Picker>\n *\n * You would re-use this same Item/Section components to pass similar things to\n * Menu, Tabs, etc.\n *\n * For Plasmic, this API is too abstract.  The user has explicitly designed components\n * like Select.Option and Select.OptionGroup, and it is weird that they don't actually\n * use these components. It is more natural to do:\n *\n *   <Select>\n *     <Select.OptionGroup title=\"Asia\">\n *       <Select.Option key=\"taiwan\">Taiwan</Select>\n *     </Select.OptionGroup>\n *   </Select>\n *\n * For Plume, we let users directly use the components they designed, both to collect\n * information and to perform actual rendering.  For example, for Plume,\n * you'd use Select.Option instead of Item, and Select.OptionGroup instead of Section.\n * This means that the Select.Option props will collect the same information Item\n * does.\n *\n * A component like Select.Option then serves two purposes:\n *\n * 1. Allow users to specify the collection of data, like in the above example\n *    Here, we're mainly interested in the props in those ReactElements so\n *    we can pass the Item/Section data onto react-aria's APIs.  We are not\n *    actually rendering these elements.\n * 2. Once react-aria's Collections API has gone through them and built\n *    Collection \"nodes\", we then create cloned versions of these elements\n *    with the corresponding node passed in as a secret prop.  These ReactElements\n *    are then actually used to _render_ the corresponding Option / OptionGroup.\n *\n * This file contains helper functions to help with implementing the above.\n *\n * Note also that most of the collections-based react-aria components expose\n * a parallel API that accepts a list of \"items\" and a render prop, instead\n * of list of Item/Section elements.  This is for efficiency, but we are opting\n * to only support the composite-component pattern for now for simplicity.\n */\n\nimport { Item, Section } from \"@react-stately/collections\";\nimport { Node } from \"@react-types/shared\";\nimport React from \"react\";\nimport { isString } from \"../common\";\nimport { getElementTypeName, toChildArray } from \"../react-utils\";\nimport { getPlumeType, PLUME_STRICT_MODE } from \"./plume-utils\";\n\nexport interface PlasmicLoaderProps<T> {\n  component: string;\n  componentProps: T;\n}\n\n/**\n * Props for a Plume component that corresponds to an Item\n */\nexport interface ItemLikeProps {\n  /**\n   * value key corresponding to this item. Not required if you use the\n   * `key` prop instead.\n   */\n  value?: string | null;\n\n  /**\n   * The text string value corresponding to this item. Used to support\n   * keyboard type-ahead.  If not specified, then will be derived from\n   * `children` if it is a string, or the `value` or `key`.\n   */\n  textValue?: string;\n\n  /**\n   * aria-label for this item.\n   */\n  \"aria-label\"?: string;\n\n  /**\n   * Primary content label for this item.\n   */\n  children?: React.ReactNode;\n\n  /**\n   * If true, this item will not be selectable.\n   */\n  isDisabled?: boolean;\n}\n\ntype LoaderAwareItemLikeProps =\n  | ItemLikeProps\n  | PlasmicLoaderProps<ItemLikeProps>;\n\n/**\n * Props for a Plume component that corresponds to a Section\n */\nexport interface SectionLikeProps {\n  /**\n   * Heading content of the title\n   */\n  title?: React.ReactNode;\n\n  /**\n   * aria-label for this section\n   */\n  \"aria-label\"?: string;\n\n  /**\n   * A list of items that belong in this group\n   */\n  children?: React.ReactNode;\n}\n\ntype LoaderAwareSectionLikeProps =\n  | SectionLikeProps\n  | PlasmicLoaderProps<SectionLikeProps>;\n\nexport type ItemJson = LeafItemJson | SectionJson;\n\nexport type LeafItemJson =\n  | string\n  | {\n      value: string;\n      label?: string;\n      textValue?: string;\n      isDisabled?: boolean;\n    };\n\nexport interface SectionJson {\n  title: string;\n  children: ItemJson[];\n}\n\nexport function deriveItemsFromProps(\n  props: any,\n  opts: {\n    itemPlumeType: string;\n    sectionPlumeType?: string;\n    invalidChildError?: string;\n    requireItemValue: boolean;\n    ItemComponent?: React.ComponentType<ItemLikeProps>;\n    SectionComponent?: React.ComponentType<SectionLikeProps>;\n    itemsProp?: string;\n  }\n) {\n  if (opts.itemsProp && opts.itemsProp in props) {\n    if (!opts.ItemComponent || !opts.SectionComponent) {\n      throw new Error(`You may need to re-generate your Plasmic* files`);\n    }\n    const items = props[opts.itemsProp] as ItemJson[] | undefined;\n    return deriveItemsFromItemsProp(items, {\n      ItemComponent: opts.ItemComponent,\n      SectionComponent: opts.SectionComponent,\n    });\n  } else {\n    return deriveItemsFromChildren(props.children as React.ReactNode, opts);\n  }\n}\n\nfunction deriveItemsFromItemsProp(\n  items: ItemJson[] | undefined,\n  opts: {\n    ItemComponent: React.ComponentType<ItemLikeProps>;\n    SectionComponent: React.ComponentType<SectionLikeProps>;\n  }\n) {\n  const { ItemComponent, SectionComponent } = opts;\n  const disabledKeys: string[] = [];\n  const transform = (item: ItemJson) => {\n    if (typeof item === \"string\") {\n      return (\n        <ItemComponent key={item} value={item}>\n          {item}\n        </ItemComponent>\n      );\n    } else if (\"children\" in item) {\n      return (\n        <SectionComponent key={item.title} title={item.title}>\n          {item.children.map((x) => transform(x))}\n        </SectionComponent>\n      );\n    } else {\n      if (item.isDisabled) {\n        disabledKeys.push(item.value);\n      }\n      return (\n        <ItemComponent\n          key={item.value}\n          value={item.value}\n          textValue={item.textValue}\n          isDisabled={item.isDisabled}\n        >\n          {item.label ?? item.value}\n        </ItemComponent>\n      );\n    }\n  };\n  return {\n    items: items?.map((x) => transform(x)) ?? [],\n    disabledKeys,\n  };\n}\n\n/**\n * Given children of a component like Select or Menu, derive the items\n * that we will pass into the Collections API.  These will be\n * ReactElement<ItemLikeProps|SectionLikeProps>[].\n *\n * Will also assign keys to items by their index in the collection,\n * and collect the keys of disabled items.\n */\nexport function deriveItemsFromChildren<T extends React.ReactElement>(\n  children: React.ReactNode,\n  opts: {\n    itemPlumeType: string;\n    sectionPlumeType?: string;\n    invalidChildError?: string;\n    requireItemValue: boolean;\n  }\n) {\n  if (!children) {\n    return {\n      items: [] as T[],\n      disabledKeys: [] as React.Key[],\n    };\n  }\n\n  const { itemPlumeType, sectionPlumeType, invalidChildError } = opts;\n\n  // For Plume items without an explicit key, we assign a key as the index\n  // of the collection.\n  let itemCount = 0;\n  let sectionCount = 0;\n\n  const ensureValue = (element: React.ReactElement) => {\n    if (!propInChild(element, \"value\")) {\n      if (opts.requireItemValue && PLUME_STRICT_MODE) {\n        throw new Error(\n          `Must specify a \"value\" prop for ${getElementTypeName(element)}`\n        );\n      } else {\n        return cloneChild(element, { value: `${itemCount++}` });\n      }\n    } else {\n      // Still increment count even if key is present, so that the\n      // auto-assigned key really reflects the index\n      itemCount++;\n      return element;\n    }\n  };\n\n  const disabledKeys: React.Key[] = [];\n\n  const flattenedChildren = (\n    children: React.ReactNode\n  ): React.ReactElement[] => {\n    return toChildArray(children).flatMap((child) => {\n      if (React.isValidElement(child)) {\n        if (child.type === React.Fragment) {\n          return flattenedChildren(\n            (child as React.ReactElement<{ children: React.ReactNode }>).props\n              .children\n          );\n        }\n        const type = getPlumeType(child);\n        if (type === itemPlumeType) {\n          child = ensureValue(child);\n          const childKey = getItemLikeKey(child);\n          if (getChildProp(child, \"isDisabled\") && !!childKey) {\n            disabledKeys.push(childKey);\n          }\n          return [child];\n        }\n        if (type === sectionPlumeType) {\n          return [\n            cloneChild(child, {\n              // key of section doesn't actually matter, just needs\n              // to be unique\n              key: child.key ?? `section-${sectionCount++}`,\n              children: flattenedChildren(getChildProp(child, \"children\")),\n            }),\n          ];\n        }\n      }\n\n      if (PLUME_STRICT_MODE) {\n        throw new Error(invalidChildError ?? `Unexpected child`);\n      } else {\n        return [];\n      }\n    });\n  };\n\n  return { items: flattenedChildren(children) as T[], disabledKeys };\n}\n\nexport function useDerivedItems(\n  props: any,\n  opts: {\n    itemPlumeType: string;\n    sectionPlumeType?: string;\n    invalidChildError?: string;\n    requireItemValue: boolean;\n    ItemComponent?: React.ComponentType<ItemLikeProps>;\n    SectionComponent?: React.ComponentType<SectionLikeProps>;\n    itemsProp?: string;\n  }\n) {\n  const { children } = props;\n  const {\n    itemPlumeType,\n    sectionPlumeType,\n    invalidChildError,\n    requireItemValue,\n    ItemComponent,\n    SectionComponent,\n    itemsProp,\n  } = opts;\n  const items = itemsProp ? props[itemsProp] : undefined;\n  return React.useMemo(() => {\n    return deriveItemsFromProps(props, {\n      itemPlumeType,\n      sectionPlumeType,\n      invalidChildError,\n      requireItemValue,\n      itemsProp,\n      ItemComponent,\n      SectionComponent,\n    });\n  }, [\n    children,\n    items,\n    itemPlumeType,\n    sectionPlumeType,\n    invalidChildError,\n    requireItemValue,\n    ItemComponent,\n    SectionComponent,\n  ]);\n}\n\nexport function useDerivedItemsFromChildren<T extends React.ReactElement>(\n  children: React.ReactNode,\n  opts: {\n    itemPlumeType: string;\n    sectionPlumeType?: string;\n    invalidChildError?: string;\n    requireItemValue: boolean;\n  }\n) {\n  const {\n    itemPlumeType,\n    sectionPlumeType,\n    invalidChildError,\n    requireItemValue,\n  } = opts;\n  return React.useMemo(() => {\n    return deriveItemsFromChildren<T>(children, {\n      itemPlumeType,\n      sectionPlumeType,\n      invalidChildError,\n      requireItemValue,\n    });\n  }, [\n    children,\n    itemPlumeType,\n    sectionPlumeType,\n    invalidChildError,\n    requireItemValue,\n  ]);\n}\n\n/**\n * Given a Collection node, create the React element that we should use\n * to render it.\n */\nexport function renderCollectionNode(node: Node<any>) {\n  // node.rendered should already have our item-like or section-like Plume\n  // component elements, so we just need to clone them with a secret\n  // _node prop that we use to render.\n  return cloneChild(node.rendered as React.ReactElement, {\n    _node: node,\n    key: node.key,\n  });\n}\n\n/**\n * Renders a item-like or section-like Plume component element into an\n * Item or a Section element.\n */\nexport function renderAsCollectionChild<\n  T extends React.ReactElement<\n    LoaderAwareItemLikeProps | LoaderAwareSectionLikeProps\n  >\n>(\n  child: T,\n  opts: {\n    itemPlumeType: string;\n    sectionPlumeType?: string;\n  }\n) {\n  const plumeType = getPlumeType(child);\n  if (plumeType === opts.itemPlumeType) {\n    const option = child as React.ReactElement<LoaderAwareItemLikeProps>;\n\n    // We look at the children passed to the item-like element, and derive key\n    // or textValue from it if it is a string\n    const content = getChildProp(option, \"children\");\n\n    // The children render prop needs to return an <Item/>\n    return (\n      <Item\n        // We use ItemLike.value if the user explicitly specified a value,\n        // and we fallback to key.  If the user specified neither, then\n        // the Collections API will generate a unique key for this item.\n        key={getItemLikeKey(option)}\n        // textValue is either explicitly specified by the user, or we\n        // try to derive it if `content` is a string.\n        textValue={\n          getChildProp(option, \"textValue\") ??\n          (isString(content)\n            ? content\n            : propInChild(option, \"value\")\n            ? getChildProp(option, \"value\")\n            : option.key)\n        }\n        aria-label={getChildProp(option, \"aria-label\")}\n      >\n        {\n          // Note that what we setting the item-like element as the children\n          // here, and not content; we want the entire item-like Plume element to\n          // end up as Node.rendered.\n        }\n        {option}\n      </Item>\n    );\n  } else {\n    const group = child as React.ReactElement<LoaderAwareSectionLikeProps>;\n    return (\n      <Section\n        // Note that we are using the whole section-like element as the title\n        // here, and not group.props.title; we want the entire section-like\n        // Plume element to end up as Node.rendered.\n        title={group}\n        aria-label={getChildProp(group, \"aria-label\")}\n        // We are flattening and deriving the descendant Options as items here.\n        // group.props.children should've already been cleaned up by\n        // deriveItemsFromChildren()\n        items={getChildProp(group, \"children\") as React.ReactElement[]}\n      >\n        {\n          // We use the same render function to turn descendent Options into Items\n        }\n        {(c: React.ReactElement) => renderAsCollectionChild(c, opts)}\n      </Section>\n    );\n  }\n}\n\nfunction getItemLikeKey(element: React.ReactElement<LoaderAwareItemLikeProps>) {\n  return getChildProp(element, \"value\") ?? element.key;\n}\n\n// PlasmicLoader-aware function to get prop from child.\nexport function getChildProp(child: React.ReactElement, prop: string) {\n  return \"componentProps\" in child.props\n    ? child.props.componentProps[prop]\n    : child.props[prop];\n}\n\n// PlasmicLoader-aware function to check `if (prop in element.props)`.\nfunction propInChild(child: React.ReactElement, prop: string): boolean {\n  return \"componentProps\" in child.props\n    ? prop in child.props.componentProps\n    : prop in child.props;\n}\n\n// PlasmicLoader-aware function to clone React element.\nfunction cloneChild(child: React.ReactElement, props: Record<string, any>) {\n  if ((child.type as any).getPlumeType) {\n    // If React element has getPlumeType(), assume that it is PlasmicLoader,\n    // so add nodeProps to componentProps instead of element props.\n    return React.cloneElement(child, {\n      componentProps: {\n        ...child.props.componentProps,\n        ...props,\n      },\n      ...(props.key ? { key: props.key } : {}),\n    });\n  }\n\n  return React.cloneElement(child, props);\n}\n","import type { Placement } from \"@react-types/overlays\";\nimport type { FocusStrategy } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport type { OverlayTriggerState } from \"@react-stately/overlays\";\n\nexport interface TriggeredOverlayContextValue {\n  triggerRef: React.RefObject<HTMLElement>;\n  state: OverlayTriggerState;\n  autoFocus?: boolean | FocusStrategy;\n\n  placement?: Placement;\n  overlayMatchTriggerWidth?: boolean;\n  overlayMinTriggerWidth?: boolean;\n  overlayWidth?: number;\n}\n\nexport const TriggeredOverlayContext = React.createContext<\n  TriggeredOverlayContextValue | undefined\n>(undefined);\n","import * as React from \"react\";\nimport type { TreeState } from \"@react-stately/tree\";\nimport type { BaseMenuProps } from \"./menu\";\n\nexport interface MenuContextValue {\n  menuProps: BaseMenuProps;\n  state: TreeState<any>;\n}\n\nexport const MenuContext = React.createContext<MenuContextValue | undefined>(\n  undefined\n);\n","import { useMenu as useAriaMenu } from \"@react-aria/menu\";\nimport { useTreeState } from \"@react-stately/tree\";\nimport { AriaMenuProps } from \"@react-types/menu\";\nimport { AriaLabelingProps, DOMProps } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { useEnsureSSRProvider } from \"../../render/ssr\";\nimport {\n  renderAsCollectionChild,\n  renderCollectionNode,\n  useDerivedItemsFromChildren,\n} from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  noOutline,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getStyleProps, StyleProps } from \"../props-utils\";\nimport { TriggeredOverlayContext } from \"../triggered-overlay/context\";\nimport { MenuContext } from \"./context\";\n\nexport interface BaseMenuProps extends DOMProps, AriaLabelingProps, StyleProps {\n  /**\n   * List of `Menu.Item`s or `Menu.Group`s that make up the menu\n   */\n  children?: React.ReactNode;\n\n  /**\n   * Called with the value of a `Menu.Item` when it is selected.\n   */\n  onAction?: (value: string) => void;\n}\n\nexport type MenuRef = React.Ref<MenuRefValue>;\nexport interface MenuRefValue extends MenuState {\n  getRoot: () => HTMLElement | null;\n}\n\nconst COLLECTION_OPTS = {\n  itemPlumeType: \"menu-item\",\n  sectionPlumeType: \"menu-group\",\n};\n\nexport interface MenuConfig<C extends AnyPlasmicClass> {\n  isPlacedTopVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedBottomVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedLeftVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedRightVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  itemsSlot: keyof PlasmicClassArgs<C>;\n  itemsContainer: keyof PlasmicClassOverrides<C>;\n  root: keyof PlasmicClassOverrides<C>;\n}\n\n/**\n * Converts props from BaseMenuProps to react-aria's useMenu() props.\n */\nfunction asAriaMenuProps(props: BaseMenuProps) {\n  const { children, ...rest } = props;\n  const { items, disabledKeys } = useDerivedItemsFromChildren(children, {\n    ...COLLECTION_OPTS,\n    invalidChildError: `Can only use Menu.Item and Menu.Group as children to Menu`,\n    requireItemValue: false,\n  });\n\n  const collectionChildRenderer = React.useCallback(\n    (child: any) => renderAsCollectionChild(child, COLLECTION_OPTS),\n    []\n  );\n\n  return {\n    ariaProps: {\n      ...rest,\n      children: collectionChildRenderer,\n      items,\n      disabledKeys,\n    } as AriaMenuProps<any>,\n  };\n}\n\nexport interface MenuState {\n  getFocusedValue: () => string | null;\n  setFocusedValue: (value: string) => void;\n}\n\nexport function useMenu<P extends BaseMenuProps, C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: P,\n  config: MenuConfig<C>,\n  ref: MenuRef = null\n) {\n  useEnsureSSRProvider();\n  const { ariaProps } = asAriaMenuProps(props);\n  const triggerContext = React.useContext(TriggeredOverlayContext);\n  const rootRef = React.useRef<HTMLElement>(null);\n\n  const state = useTreeState(ariaProps);\n\n  const menuListRef = React.useRef<HTMLUListElement>(null);\n\n  const { menuProps } = useAriaMenu(\n    {\n      ...ariaProps,\n      autoFocus: triggerContext?.autoFocus,\n    },\n    state,\n    menuListRef\n  );\n\n  const contextValue = React.useMemo(() => ({ state, menuProps: props }), [\n    state,\n    props,\n  ]);\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: mergeProps(getStyleProps(props), {\n        ref: rootRef,\n      }),\n    },\n    [config.itemsContainer]: {\n      as: \"ul\",\n      props: mergeProps(menuProps, {\n        ref: menuListRef,\n        style: {\n          ...noOutline(),\n        },\n      }),\n    },\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.itemsSlot]: (\n      <MenuContext.Provider value={contextValue}>\n        {Array.from(state.collection).map((node) => renderCollectionNode(node))}\n      </MenuContext.Provider>\n    ),\n  };\n\n  const plumeState: MenuState = React.useMemo(\n    () => ({\n      getFocusedValue: () => state.selectionManager.focusedKey as string | null,\n      setFocusedValue: (value: string) =>\n        state.selectionManager.setFocusedKey(value),\n    }),\n    [state]\n  );\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      getRoot: () => rootRef.current,\n      getFocusedValue: () => plumeState.getFocusedValue(),\n      setFocusedValue: (key) => plumeState.setFocusedValue(key),\n    }),\n    [rootRef, plumeState]\n  );\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n    state: plumeState,\n  };\n}\n","import { Node } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { useMenuSection } from \"@react-aria/menu\";\nimport { useSeparator } from \"@react-aria/separator\";\nimport { pick } from \"../../common\";\nimport { Overrides } from \"../../render/elements\";\nimport { renderCollectionNode, SectionLikeProps } from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  PLUME_STRICT_MODE,\n} from \"../plume-utils\";\nimport {\n  getDefaultPlasmicProps,\n  getStyleProps,\n  StyleProps,\n} from \"../props-utils\";\nimport { MenuContext } from \"./context\";\n\nexport interface BaseMenuGroupProps extends SectionLikeProps, StyleProps {}\n\ninterface MenuGroupConfig<C extends AnyPlasmicClass> {\n  noTitleVariant: PlasmicClassVariants<C>;\n  isFirstVariant: PlasmicClassVariants<C>;\n\n  itemsSlot: keyof PlasmicClassArgs<C>;\n  titleSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  separator: keyof PlasmicClassOverrides<C>;\n  titleContainer: keyof PlasmicClassOverrides<C>;\n  itemsContainer: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useMenuGroup<\n  P extends BaseMenuGroupProps,\n  C extends AnyPlasmicClass\n>(plasmicClass: C, props: P, config: MenuGroupConfig<C>) {\n  const context = React.useContext(MenuContext);\n\n  const node = (props as any)._node as\n    | Node<React.ReactElement<BaseMenuGroupProps>>\n    | undefined;\n\n  if (!context || !node) {\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\"You can only use a Menu.Group within a Menu component.\");\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n\n  const { headingProps, groupProps } = useMenuSection({\n    heading: props.title,\n    \"aria-label\": props[\"aria-label\"],\n  });\n\n  const { separatorProps } = useSeparator({\n    elementType: \"li\",\n  });\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.noTitleVariant, active: !props.title },\n      {\n        def: config.isFirstVariant,\n        active: context.state.collection.getFirstKey() === node.key,\n      }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.titleSlot]: props.title,\n    [config.itemsSlot]: Array.from(node.childNodes).map((childNode) =>\n      renderCollectionNode(childNode)\n    ),\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: getStyleProps(props),\n    },\n    [config.separator]: {\n      props: {\n        ...separatorProps,\n      },\n      as: \"li\",\n    },\n    [config.titleContainer]: {\n      props: {\n        role: \"presentation\",\n        ...headingProps,\n      },\n      ...(!props.title && {\n        render: () => null,\n      }),\n    },\n    [config.itemsContainer]: {\n      props: {\n        ...groupProps,\n      },\n      as: \"ul\",\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import { Node } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { useMenuItem as useAriaMenuItem } from \"@react-aria/menu\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { ItemLikeProps } from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  noOutline,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  PLUME_STRICT_MODE,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getDefaultPlasmicProps } from \"../props-utils\";\nimport { TriggeredOverlayContext } from \"../triggered-overlay/context\";\nimport { MenuContext } from \"./context\";\n\nexport interface BaseMenuItemProps extends ItemLikeProps {\n  /**\n   * Called when this item is selected\n   */\n  onAction?: (key: string) => void;\n}\n\ninterface MenuItemConfig<C extends AnyPlasmicClass> {\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isHighlightedVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  labelSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  labelContainer: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useMenuItem<\n  P extends BaseMenuItemProps,\n  C extends AnyPlasmicClass\n>(plasmicClass: C, props: P, config: MenuItemConfig<C>) {\n  const menuContext = React.useContext(MenuContext);\n  const triggerContext = React.useContext(TriggeredOverlayContext);\n\n  if (!menuContext) {\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\"You can only use a Menu.Item within a Menu component.\");\n    }\n\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n\n  const { children, onAction } = props;\n\n  const { state, menuProps } = menuContext;\n\n  // We pass in the Node secretly as an undocumented prop from <Select />\n  const node = (props as any)._node as Node<\n    React.ReactElement<BaseMenuItemProps>\n  >;\n\n  const isDisabled = state.disabledKeys.has(node.key);\n  const isHighlighted =\n    state.selectionManager.isFocused &&\n    state.selectionManager.focusedKey === node.key;\n\n  const ref = React.useRef<HTMLLIElement>(null);\n\n  const { menuItemProps, labelProps } = useAriaMenuItem(\n    mergeProps(\n      {\n        // We need to merge both the onAction on MenuItem and the onAction\n        // on Menu\n        onAction,\n      },\n      {\n        onAction: menuProps.onAction,\n        onClose: triggerContext?.state.close,\n      },\n      {\n        isDisabled,\n        \"aria-label\": node && node[\"aria-label\"],\n        key: node.key,\n        isVirtualized: false,\n        closeOnSelect: true,\n      }\n    ),\n    state,\n    ref\n  );\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.isDisabledVariant, active: isDisabled },\n      { def: config.isHighlightedVariant, active: isHighlighted }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.labelSlot]: children,\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      as: \"li\",\n      props: mergeProps(menuItemProps, { ref, style: noOutline() }),\n    },\n    [config.labelContainer]: {\n      props: { ...labelProps },\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import { Placement } from \"@react-types/overlays\";\nimport * as React from \"react\";\nimport { useMenuTrigger as useAriaMenuTrigger } from \"@react-aria/menu\";\nimport { usePress } from \"@react-aria/interactions\";\nimport { MenuTriggerState } from \"@react-stately/menu\";\nimport { mergeProps } from \"../../react-utils\";\nimport { BaseMenuProps } from \"../menu/menu\";\nimport { getPlumeType, PLUME_STRICT_MODE } from \"../plume-utils\";\nimport { TriggeredOverlayContextValue } from \"../triggered-overlay/context\";\n\n/**\n * A menu trigger hook that combines react-aria's useMenuTrigger, useAriaMenuTrigger,\n * useOverlayPosition, useOverlay, and usePress\n */\nexport function useMenuTrigger(\n  opts: {\n    isDisabled?: boolean;\n    triggerRef: React.RefObject<HTMLElement>;\n    placement?: Placement;\n    menuMatchTriggerWidth?: boolean;\n    menuWidth?: number;\n    menu:\n      | React.ReactElement<BaseMenuProps>\n      | (() => React.ReactElement<BaseMenuProps>);\n  },\n  state: MenuTriggerState\n) {\n  const {\n    triggerRef,\n    isDisabled,\n    placement,\n    menuMatchTriggerWidth,\n    menuWidth,\n    menu,\n  } = opts;\n\n  const { menuTriggerProps: triggerPressProps, menuProps } = useAriaMenuTrigger(\n    {\n      type: \"menu\",\n      isDisabled,\n    },\n    state,\n    triggerRef\n  );\n\n  const { pressProps: triggerProps } = usePress({\n    ...triggerPressProps,\n    isDisabled,\n  });\n\n  const makeMenu = () => {\n    let realMenu = typeof menu === \"function\" ? menu() : menu;\n    if (!realMenu) {\n      return null;\n    }\n    if (getPlumeType(realMenu) !== \"menu\") {\n      if (PLUME_STRICT_MODE) {\n        throw new Error(`Must use an instance of the Menu component.`);\n      }\n      return null;\n    }\n\n    return React.cloneElement(realMenu, mergeProps(realMenu.props, menuProps));\n  };\n\n  const triggerContext: TriggeredOverlayContextValue = React.useMemo(\n    () => ({\n      triggerRef,\n      state,\n      autoFocus: state.focusStrategy ?? true,\n      placement,\n      overlayMatchTriggerWidth: menuMatchTriggerWidth,\n      overlayMinTriggerWidth: true,\n      overlayWidth: menuWidth,\n    }),\n    [triggerRef, state, placement, menuMatchTriggerWidth, menuWidth]\n  );\n\n  return {\n    triggerProps,\n    makeMenu,\n    triggerContext,\n  };\n}\n","import { useMenuTriggerState } from \"@react-stately/menu\";\nimport { Placement } from \"@react-types/overlays\";\nimport * as React from \"react\";\nimport { mergeProps } from \"../../react-utils\";\nimport { BaseMenuProps } from \"../menu/menu\";\nimport { TriggeredOverlayContext } from \"../triggered-overlay/context\";\nimport { useMenuTrigger } from \"./menu-trigger\";\n\nexport interface DropdownMenuProps {\n  /**\n   * A ReactElement that takes in a `ref` as well as the usual mouse and\n   * pointer events. The dropdown menu will be positioned relative to this\n   * trigger.\n   */\n  children: React.ReactElement;\n\n  /**\n   * The menu to show; must be either a ReactElement of Menu type, or\n   * a function that creates one if you prefer to delay creating it until\n   * the menu has been triggered.\n   */\n  menu:\n    | React.ReactElement<BaseMenuProps>\n    | (() => React.ReactElement<BaseMenuProps>);\n\n  /**\n   * Where to place the menu relative to the trigger.\n   */\n  placement?: Placement;\n\n  /**\n   * Whether the menu is currently shown.\n   */\n  isOpen?: boolean;\n\n  /**\n   * Uncontrolled open state.\n   */\n  defaultOpen?: boolean;\n\n  /**\n   * Event handler fired when Menu's open state changes\n   */\n  onOpenChange?: (isOpen: boolean) => void;\n}\n\nexport function DropdownMenu(props: DropdownMenuProps) {\n  const { isOpen, defaultOpen, onOpenChange, children, placement, menu } =\n    props;\n\n  const triggerRef = React.useRef<HTMLElement>(null);\n\n  const state = useMenuTriggerState({\n    isOpen,\n    defaultOpen,\n    onOpenChange,\n  });\n\n  const { triggerProps, makeMenu, triggerContext } = useMenuTrigger(\n    {\n      triggerRef,\n      placement,\n      menu,\n    },\n    state\n  );\n\n  return (\n    <TriggeredOverlayContext.Provider value={triggerContext}>\n      {React.cloneElement(\n        children,\n        mergeProps(children.props, triggerProps, { ref: triggerRef })\n      )}\n      {state.isOpen && makeMenu()}\n    </TriggeredOverlayContext.Provider>\n  );\n}\n","import { useFocusable } from \"@react-aria/focus\";\nimport { useMenuTriggerState } from \"@react-stately/menu\";\nimport { Placement } from \"@react-types/overlays\";\nimport { DOMProps, FocusableProps } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { useEnsureSSRProvider } from \"../../render/ssr\";\nimport { BaseMenuProps } from \"../menu/menu\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getStyleProps, StyleProps } from \"../props-utils\";\nimport { TriggeredOverlayContext } from \"../triggered-overlay/context\";\nimport { useMenuTrigger } from \"./menu-trigger\";\n\nexport interface BaseMenuButtonProps\n  extends DOMProps,\n    FocusableProps,\n    StyleProps,\n    Pick<React.ComponentProps<\"button\">, \"title\"> {\n  /**\n   * The menu to show; can either be a Menu instance, or a function that returns a Menu\n   * instance if you want to defer creating the instance till when it's opened.\n   */\n  menu:\n    | React.ReactElement<BaseMenuProps>\n    | (() => React.ReactElement<BaseMenuProps>);\n\n  /**\n   * Whether the button is disabled\n   */\n  isDisabled?: boolean;\n\n  /**\n   * Whether the menu is currently shown.\n   */\n  isOpen?: boolean;\n\n  /**\n   * Uncontrolled open state\n   */\n  defaultOpen?: boolean;\n\n  /**\n   * Event handler fired when Menu's open state changes\n   */\n  onOpenChange?: (isOpen: boolean) => void;\n\n  /**\n   * Desired placement location of the Select dropdown\n   */\n  placement?: Placement;\n  /**\n   * If true, menu width will always match the trigger button width.\n   * If false, then menu width will have min-width matching the\n   * trigger button width.\n   */\n  menuMatchTriggerWidth?: boolean;\n\n  /**\n   * If set, menu width will be exactly this width, overriding\n   * menuMatchTriggerWidth.\n   */\n  menuWidth?: number;\n}\n\nexport interface MenuButtonConfig<C extends AnyPlasmicClass> {\n  isOpenVariant: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  menuSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  trigger: keyof PlasmicClassOverrides<C>;\n}\n\ninterface MenuButtonState {\n  open: () => void;\n  close: () => void;\n  isOpen: () => boolean;\n}\n\nexport type MenuButtonRef = React.Ref<MenuButtonRefValue>;\n\nexport interface MenuButtonRefValue extends MenuButtonState {\n  getRoot: () => HTMLElement | null;\n  getTrigger: () => HTMLElement | null;\n  focus: () => void;\n  blur: () => void;\n}\n\nexport function useMenuButton<\n  P extends BaseMenuButtonProps,\n  C extends AnyPlasmicClass\n>(\n  plasmicClass: C,\n  props: P,\n  config: MenuButtonConfig<C>,\n  outerRef: MenuButtonRef = null\n) {\n  const {\n    placement,\n    isOpen,\n    defaultOpen,\n    onOpenChange,\n    isDisabled,\n    menu,\n    autoFocus,\n    menuMatchTriggerWidth,\n    menuWidth,\n  } = props;\n\n  useEnsureSSRProvider();\n  const rootRef = React.useRef<HTMLElement>(null);\n  const triggerRef = React.useRef<HTMLButtonElement>(null);\n\n  const state = useMenuTriggerState({\n    isOpen,\n    defaultOpen,\n    onOpenChange,\n  });\n\n  const { triggerProps, makeMenu, triggerContext } = useMenuTrigger(\n    {\n      isDisabled,\n      triggerRef,\n      placement,\n      menuMatchTriggerWidth,\n      menuWidth,\n      menu,\n    },\n    state\n  );\n\n  const { focusableProps: triggerFocusProps } = useFocusable(props, triggerRef);\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.isOpenVariant, active: state.isOpen },\n      { def: config.isDisabledVariant, active: isDisabled }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.menuSlot]: state.isOpen ? makeMenu() : undefined,\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      wrapChildren: (children: React.ReactNode) => (\n        <TriggeredOverlayContext.Provider value={triggerContext}>\n          {children}\n        </TriggeredOverlayContext.Provider>\n      ),\n      props: {\n        ref: rootRef,\n      },\n    },\n    [config.trigger]: {\n      props: mergeProps(\n        triggerProps,\n        triggerFocusProps,\n        getStyleProps(props),\n        pick(props, \"title\"),\n        {\n          ref: triggerRef,\n          autoFocus,\n          disabled: !!isDisabled,\n          // Make sure this button is not interpreted as submit\n          type: \"button\",\n        }\n      ),\n    },\n  };\n\n  const plumeState: MenuButtonState = React.useMemo(\n    () => ({\n      open: () => state.open(),\n      close: () => state.close(),\n      isOpen: () => state.isOpen,\n    }),\n    [state]\n  );\n\n  React.useImperativeHandle(\n    outerRef,\n    () => ({\n      getRoot: () => rootRef.current,\n      getTrigger: () => triggerRef.current,\n      focus: () => triggerRef.current && triggerRef.current.focus(),\n      blur: () => triggerRef.current && triggerRef.current.blur(),\n      open: plumeState.open,\n      close: plumeState.close,\n      isOpen: plumeState.isOpen,\n    }),\n    [rootRef, triggerRef, plumeState]\n  );\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n    state: plumeState,\n  };\n}\n","import * as React from \"react\";\nimport type { ListState } from \"@react-stately/list\";\n\nexport const SelectContext = React.createContext<ListState<any> | undefined>(\n  undefined\n);\n","import { usePlasmicCanvasContext } from \"@plasmicapp/host\";\nimport { usePress } from \"@react-aria/interactions\";\nimport { AriaListBoxOptions, useListBox } from \"@react-aria/listbox\";\nimport { HiddenSelect, useSelect as useAriaSelect } from \"@react-aria/select\";\nimport {\n  SelectState as AriaSelectState,\n  useSelectState as useAriaSelectState,\n} from \"@react-stately/select\";\nimport { Placement } from \"@react-types/overlays\";\nimport { AriaSelectProps } from \"@react-types/select\";\nimport {\n  AriaLabelingProps,\n  DOMProps,\n  FocusableDOMProps,\n  FocusableProps,\n  InputBase,\n} from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { useEnsureSSRProvider } from \"../../render/ssr\";\nimport {\n  getChildProp,\n  ItemJson,\n  ItemLikeProps,\n  renderAsCollectionChild,\n  renderCollectionNode,\n  SectionLikeProps,\n  useDerivedItems,\n} from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  noOutline,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getStyleProps, StyleProps } from \"../props-utils\";\nimport {\n  TriggeredOverlayContext,\n  TriggeredOverlayContextValue,\n} from \"../triggered-overlay/context\";\nimport { SelectContext } from \"./context\";\nimport { BaseSelectOptionProps } from \"./select-option\";\nimport { BaseSelectOptionGroupProps } from \"./select-option-group\";\n\nexport interface BaseSelectProps\n  extends DOMProps,\n    AriaLabelingProps,\n    FocusableDOMProps,\n    InputBase,\n    FocusableProps,\n    StyleProps {\n  /**\n   * Key of the currently selected value\n   */\n  value?: string | null;\n\n  /**\n   * Event handler fired when currently selected value changes\n   */\n  onChange?: (value: string | null) => void;\n\n  /**\n   * Uncontrolled key of the default selected value\n   */\n  defaultValue?: string;\n\n  /**\n   * List of Select.Options\n   */\n  children?: React.ReactNode;\n\n  /**\n   * List of options as an array, instead of using `children` prop. If this\n   * is passed in, then `children` is ignored.\n   *\n   * The options can be a list of strings, or a list of objects with\n   * fields `value` (for the value of the option), `label` (for what's rendered\n   * in the option), and `isDisabled` (if the option should be disabled).\n   */\n  options?: ItemJson[];\n\n  /**\n   * Whether the Select is currently open\n   */\n  isOpen?: boolean;\n\n  /**\n   * Event handler fired when Select's open state changes\n   */\n  onOpenChange?: (isOpen: boolean) => void;\n\n  /**\n   * Uncontrolled default open state\n   */\n  defaultOpen?: boolean;\n\n  /**\n   * Form name of the select element\n   */\n  name?: string;\n\n  /**\n   * By default, Select will render whatever is in Select.Option as the\n   * content in the trigger button when it is selected.  You can override\n   * what content by passing in `selectedContent` here.\n   */\n  selectedContent?: React.ReactNode;\n\n  /**\n   * Desired placement location of the Select dropdown\n   */\n  placement?: Placement;\n\n  /**\n   * If true, menu width will always match the trigger button width.\n   * If false, then menu width will have min-width matching the\n   * trigger button width.\n   */\n  menuMatchTriggerWidth?: boolean;\n\n  /**\n   * If set, menu width will be exactly this width, overriding\n   * menuMatchTriggerWidth.\n   */\n  menuWidth?: number;\n\n  /**\n   * Content to display when nothing is selected.\n   */\n  placeholder?: React.ReactNode;\n}\n\nconst COLLECTION_OPTS = {\n  itemPlumeType: \"select-option\",\n  sectionPlumeType: \"select-option-group\",\n};\n\ntype AriaOptionType = React.ReactElement<BaseSelectOptionProps>;\ntype AriaGroupType = React.ReactElement<BaseSelectOptionGroupProps>;\ntype AriaSelectItemType = AriaOptionType | AriaGroupType;\n\n/**\n * Converts props in our BaseSelectProps into props that react-aria's\n * useSelect() understands.\n *\n * Because we're not exposing the Collections API (see ./index.tsx),\n * we are converting our own API into props for useSelect.\n *\n * Specifically, in Plume's API,\n * - `children` flattens to a list of ReactElements of type Select.Option\n *   or Select.OptionGroup\n *\n * and we map it this way to the Collections API:\n * - `items` is a list of those flattened ReactElements from `children`!\n * - `children`, as a render prop, is supposed to take one of the `items`\n *   and return a `Section` or `Item` element. We take an Option/OptionGroup\n *   element, and use its props to render the appropriate `Section` or\n *   `Item`. The \"trick\" here is that we then stuff the Option element as\n *   `Item.children`, and the OptionGroup element as `Section.title`.\n *\n * When the Collections API does its work deriving `Node`s, the corresponding\n * Option/OptionGroup ReactElements will end up as `Node.rendered`.\n *\n * Then, when we are actually rendering the content of the dropdown, we\n * iterate through each collected `Node`, and renders\n * React.cloneElement(Node.rendered, {_node: node}).  This \"secretly\" passes\n * the derived collection `Node` as a prop to Option and OptionGroup, and they\n * can make use of the derived `Node.key` etc in their rendering functions.\n *\n * One thing to note here is that we never \"rendered\" the Option/OptionGroup\n * React elements that the user constructed; instead, we just looked at the\n * props used on those elements, and passed those onto the Collections API.\n * What gets rendered to the screen is the cloned version of these elements\n * with the secret derived `_node` prop.  That means Option and OptionGroup\n * render functions can assume that _node is passed in.\n */\nfunction useAriaSelectProps(props: BaseSelectProps, config: SelectConfig<any>) {\n  const {\n    value,\n    defaultValue,\n    children,\n    onChange,\n    placement,\n    menuMatchTriggerWidth,\n    menuWidth,\n    ...rest\n  } = props;\n\n  const { items, disabledKeys } = useDerivedItems(props, {\n    ...COLLECTION_OPTS,\n    invalidChildError: `Can only use Select.Option and Select.OptionGroup as children to Select`,\n    requireItemValue: true,\n    ItemComponent: config.OptionComponent,\n    SectionComponent: config.OptionGroupComponent,\n    itemsProp: \"options\",\n  });\n\n  const collectionChildRenderer = React.useCallback(\n    (child: any) => renderAsCollectionChild(child, COLLECTION_OPTS),\n    []\n  );\n\n  const onSelectionChange = React.useMemo(() => {\n    if (onChange) {\n      return (val: string | null) =>\n        onChange!(\n          (val == null || val === \"null\" ? null : val) as string | null\n        );\n    } else {\n      return undefined;\n    }\n  }, [onChange]);\n\n  return {\n    ariaProps: {\n      ...rest,\n      children: collectionChildRenderer,\n      onSelectionChange,\n      items,\n      disabledKeys,\n      defaultSelectedKey: defaultValue,\n\n      // react-aria is picky about selectedKey; if it is null, it means \"no selection\";\n      // if it is undefined, it means \"uncontrolled\".  So here, if the user passes in a\n      // value prop, then we make sure selectedKey will be null and not undefined, so\n      // we don't accidentally enter uncontrolled mode.\n      ...(\"value\" in props && { selectedKey: value ?? null }),\n    } as AriaSelectProps<AriaSelectItemType>,\n  };\n}\n\nexport type SelectRef = React.Ref<SelectRefValue>;\n\nexport interface SelectRefValue extends SelectState {\n  getTrigger: () => HTMLElement | null;\n  getRoot: () => HTMLElement | null;\n  focus: () => void;\n  blur: () => void;\n}\n\ninterface SelectConfig<C extends AnyPlasmicClass> {\n  placeholderVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isOpenVariant: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  triggerContentSlot: keyof PlasmicClassArgs<C>;\n  optionsSlot: keyof PlasmicClassArgs<C>;\n  placeholderSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  trigger: keyof PlasmicClassOverrides<C>;\n  overlay: keyof PlasmicClassOverrides<C>;\n  optionsContainer: keyof PlasmicClassOverrides<C>;\n\n  OptionComponent?: React.ComponentType<ItemLikeProps>;\n  OptionGroupComponent?: React.ComponentType<SectionLikeProps>;\n}\n\ninterface SelectState {\n  open: () => void;\n  close: () => void;\n  isOpen: () => boolean;\n  getSelectedValue: () => string | null;\n  setSelectedValue: (value: string | null) => void;\n}\n\nexport function useSelect<P extends BaseSelectProps, C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: P,\n  config: SelectConfig<C>,\n  ref: React.Ref<SelectRefValue> = null\n) {\n  useEnsureSSRProvider();\n  const { ariaProps } = useAriaSelectProps(props, config);\n  const { placement } = props;\n  const state = useAriaSelectState<AriaSelectItemType>(ariaProps);\n  const triggerRef = React.useRef<HTMLButtonElement>(null);\n  const rootRef = React.useRef<HTMLElement>(null);\n\n  const {\n    isDisabled,\n    name,\n    menuWidth,\n    menuMatchTriggerWidth,\n    autoFocus,\n    placeholder,\n    selectedContent,\n  } = props;\n\n  const canvasCtx = usePlasmicCanvasContext();\n\n  const { triggerProps: triggerPressProps, menuProps } = useAriaSelect(\n    ariaProps,\n    state,\n    triggerRef\n  );\n\n  const { pressProps: triggerProps } = usePress({\n    ...triggerPressProps,\n    isDisabled,\n  });\n\n  const triggerContent = state.selectedItem?.value\n    ? selectedContent ?? getChildProp(state.selectedItem.value, \"children\")\n    : null;\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.isOpenVariant, active: state.isOpen },\n      { def: config.placeholderVariant, active: !state.selectedItem },\n      { def: config.isDisabledVariant, active: isDisabled }\n    ),\n  };\n\n  const triggerContext: TriggeredOverlayContextValue = React.useMemo(\n    () => ({\n      triggerRef,\n      state,\n      placement,\n      overlayMatchTriggerWidth: menuMatchTriggerWidth,\n      overlayMinTriggerWidth: true,\n      overlayWidth: menuWidth,\n    }),\n    [triggerRef, state, placement, menuMatchTriggerWidth, menuWidth]\n  );\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: mergeProps(getStyleProps(props), {\n        ref: rootRef,\n      }),\n      wrapChildren: (children: React.ReactNode) => (\n        <>\n          {(!canvasCtx || canvasCtx.interactive) && (\n            <HiddenSelect\n              state={state}\n              triggerRef={triggerRef}\n              name={name}\n              isDisabled={isDisabled}\n            />\n          )}\n          {children}\n        </>\n      ),\n    },\n    [config.trigger]: {\n      props: mergeProps(\n        canvasCtx && !canvasCtx.interactive ? {} : triggerProps,\n        {\n          ref: triggerRef,\n          autoFocus,\n          disabled: !!isDisabled,\n          // Don't trigger form submission!\n          type: \"button\",\n        }\n      ),\n    },\n    [config.overlay]: {\n      wrap: (content: React.ReactNode) => (\n        <TriggeredOverlayContext.Provider value={triggerContext}>\n          {content}\n        </TriggeredOverlayContext.Provider>\n      ),\n    },\n    [config.optionsContainer]: {\n      wrap: (content: React.ReactNode) => (\n        <ListBoxWrapper state={state} menuProps={menuProps}>\n          {content as React.ReactElement}\n        </ListBoxWrapper>\n      ),\n    },\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.triggerContentSlot]: triggerContent,\n    [config.placeholderSlot]: placeholder,\n    [config.optionsSlot]: (\n      <SelectContext.Provider value={state}>\n        {Array.from(state.collection).map((node) => renderCollectionNode(node))}\n      </SelectContext.Provider>\n    ),\n  };\n\n  const plumeState: SelectState = React.useMemo(\n    () => ({\n      open: () => state.open(),\n      close: () => state.close(),\n      isOpen: () => state.isOpen,\n      getSelectedValue: () =>\n        state.selectedKey ? `${state.selectedKey}` : null,\n      setSelectedValue: (key) => state.setSelectedKey(key as any),\n    }),\n    [state]\n  );\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      getRoot: () => rootRef.current,\n      getTrigger: () => triggerRef.current,\n      focus: () => triggerRef.current?.focus(),\n      blur: () => triggerRef.current?.blur(),\n      open: () => plumeState.open(),\n      close: () => plumeState.close(),\n      isOpen: () => plumeState.isOpen(),\n      getSelectedValue: () => plumeState.getSelectedValue(),\n      setSelectedValue: (key) => plumeState.setSelectedValue(key),\n    }),\n    [rootRef, triggerRef, plumeState]\n  );\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n    state: plumeState,\n  };\n}\n\nfunction ListBoxWrapper(props: {\n  state: AriaSelectState<any>;\n  menuProps: AriaListBoxOptions<any>;\n  children: React.ReactElement;\n}) {\n  const { state, menuProps, children } = props;\n\n  const ref = React.useRef<HTMLElement>(null);\n  const canvasCtx = usePlasmicCanvasContext();\n\n  const { listBoxProps } = useListBox(\n    {\n      ...menuProps,\n      isVirtualized: false,\n      autoFocus: state.focusStrategy || true,\n      disallowEmptySelection: true,\n    },\n    state,\n    ref\n  );\n\n  return React.cloneElement(\n    children,\n    mergeProps(\n      children.props,\n      canvasCtx && !canvasCtx.interactive ? {} : listBoxProps,\n      {\n        style: noOutline(),\n        ref,\n      }\n    )\n  );\n}\n","import { usePlasmicCanvasContext } from \"@plasmicapp/host\";\nimport { useOption as useAriaOption } from \"@react-aria/listbox\";\nimport { Node } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps, mergeRefs } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { ItemLikeProps } from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  noOutline,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  PLUME_STRICT_MODE,\n  VariantDef,\n} from \"../plume-utils\";\nimport {\n  getDefaultPlasmicProps,\n  getStyleProps,\n  StyleProps,\n} from \"../props-utils\";\nimport { SelectContext } from \"./context\";\n\nexport interface BaseSelectOptionProps extends ItemLikeProps, StyleProps {}\n\ninterface SelectOptionConfig<C extends AnyPlasmicClass> {\n  isSelectedVariant: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isHighlightedVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  labelSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  labelContainer: keyof PlasmicClassOverrides<C>;\n}\n\nexport type SelectOptionRef = React.Ref<HTMLElement>;\n\nexport function useSelectOption<\n  P extends BaseSelectOptionProps,\n  C extends AnyPlasmicClass\n>(\n  plasmicClass: C,\n  props: P,\n  config: SelectOptionConfig<C>,\n  outerRef: SelectOptionRef = null\n) {\n  const state = React.useContext(SelectContext);\n\n  if (!state) {\n    // If no context, then we are being incorrectly used.  Complain or just don't\n    // bother installing any hooks.  It's okay to violate rules of hooks here\n    // because this instance won't suddenly be used correctly in another render.\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\n        \"You can only use a Select.Option within a Select component.\"\n      );\n    }\n\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n\n  const { children } = props;\n\n  const canvasCtx = usePlasmicCanvasContext();\n  const rootRef = React.useRef<HTMLElement>(null);\n  const onRef = mergeRefs(rootRef, outerRef);\n\n  // We pass in the Node secretly as an undocumented prop from <Select />\n  const node = (props as any)._node as Node<\n    React.ReactElement<BaseSelectOptionProps>\n  >;\n\n  const isSelected = state.selectionManager.isSelected(node.key);\n  const isDisabled = state.disabledKeys.has(node.key);\n  const isHighlighted =\n    state.selectionManager.isFocused &&\n    state.selectionManager.focusedKey === node.key;\n\n  const { optionProps, labelProps } = useAriaOption(\n    {\n      isSelected,\n      isDisabled,\n      \"aria-label\": node && node[\"aria-label\"],\n      key: node.key,\n      shouldSelectOnPressUp: true,\n      shouldFocusOnHover: true,\n      isVirtualized: false,\n      shouldUseVirtualFocus: canvasCtx && !canvasCtx.interactive,\n    },\n    state,\n    rootRef\n  );\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.isSelectedVariant, active: isSelected },\n      { def: config.isDisabledVariant, active: isDisabled },\n      { def: config.isHighlightedVariant, active: isHighlighted }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.labelSlot]: children,\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: mergeProps(\n        canvasCtx && !canvasCtx.interactive ? {} : optionProps,\n        getStyleProps(props),\n        {\n          ref: onRef,\n          style: noOutline(),\n        }\n      ),\n    },\n    [config.labelContainer]: {\n      props: labelProps,\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import { Node } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport { useListBoxSection } from \"@react-aria/listbox\";\nimport { useSeparator } from \"@react-aria/separator\";\nimport { pick } from \"../../common\";\nimport { Overrides } from \"../../render/elements\";\nimport { renderCollectionNode, SectionLikeProps } from \"../collection-utils\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  PLUME_STRICT_MODE,\n  VariantDef,\n} from \"../plume-utils\";\nimport {\n  getDefaultPlasmicProps,\n  getStyleProps,\n  StyleProps,\n} from \"../props-utils\";\nimport { SelectContext } from \"./context\";\n\nexport interface BaseSelectOptionGroupProps\n  extends SectionLikeProps,\n    StyleProps {}\n\ninterface SelectOptionGroupConfig<C extends AnyPlasmicClass> {\n  noTitleVariant: VariantDef<PlasmicClassVariants<C>>;\n  isFirstVariant: VariantDef<PlasmicClassVariants<C>>;\n\n  optionsSlot: keyof PlasmicClassArgs<C>;\n  titleSlot: keyof PlasmicClassArgs<C>;\n\n  root: keyof PlasmicClassOverrides<C>;\n  separator: keyof PlasmicClassOverrides<C>;\n  titleContainer: keyof PlasmicClassOverrides<C>;\n  optionsContainer: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useSelectOptionGroup<\n  P extends BaseSelectOptionGroupProps,\n  C extends AnyPlasmicClass\n>(plasmicClass: C, props: P, config: SelectOptionGroupConfig<C>) {\n  const state = React.useContext(SelectContext);\n\n  // `node` should exist if the OptionGroup was instantiated properly\n  // within a Select\n  const node = (props as any)._node as\n    | Node<React.ReactElement<BaseSelectOptionGroupProps>>\n    | undefined;\n\n  if (!state || !node) {\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\n        \"You can only use a Select.OptionGroup within a Select component.\"\n      );\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n\n  const { headingProps, groupProps } = useListBoxSection({\n    heading: props.title,\n    \"aria-label\": props[\"aria-label\"],\n  });\n\n  const { separatorProps } = useSeparator({\n    elementType: \"li\",\n  });\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.noTitleVariant, active: !props.title },\n      {\n        def: config.isFirstVariant,\n        active: state.collection.getFirstKey() === node.key,\n      }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.titleSlot]: props.title,\n    [config.optionsSlot]: Array.from(node.childNodes).map((childNode) =>\n      renderCollectionNode(childNode)\n    ),\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: getStyleProps(props),\n    },\n    [config.separator]: {\n      props: {\n        ...separatorProps,\n      },\n    },\n    [config.titleContainer]: {\n      props: {\n        role: \"presentation\",\n        ...headingProps,\n      },\n      ...(!props.title && {\n        render: () => null,\n      }),\n    },\n    [config.optionsContainer]: {\n      props: {\n        ...groupProps,\n      },\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import { useSwitch as useAriaSwitch } from \"@react-aria/switch\";\nimport { VisuallyHidden } from \"@react-aria/visually-hidden\";\nimport { useToggleState } from \"@react-stately/toggle\";\nimport { AriaSwitchProps } from \"@react-types/switch\";\nimport * as React from \"react\";\nimport { pick } from \"../../common\";\nimport { mergeProps } from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport { useEnsureSSRProvider } from \"../../render/ssr\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\nimport { getStyleProps, StyleProps } from \"../props-utils\";\n\nexport type SwitchRef = React.Ref<SwitchRefValue>;\nexport interface SwitchRefValue extends SwitchState {\n  getRoot: () => HTMLElement | null;\n  focus: () => void;\n  blur: () => void;\n}\n\ninterface SwitchState {\n  setChecked: (checked: boolean) => void;\n}\n\nexport interface SwitchProps\n  extends Omit<AriaSwitchProps, \"isSelected\" | \"defaultSelected\">,\n    StyleProps {\n  /**\n   * Whether the Switch is checked or not; controlled\n   */\n  isChecked?: boolean;\n\n  /**\n   * Whether the Switch is checked by default; uncontrolled\n   */\n  defaultChecked?: boolean;\n}\n\nfunction asAriaSwitchProps(props: SwitchProps) {\n  const ariaProps = {\n    ...props,\n    isSelected: props.isChecked,\n    defaultSelected: props.defaultChecked,\n  };\n  delete ariaProps[\"isChecked\"];\n  delete ariaProps[\"defaultChecked\"];\n  return ariaProps;\n}\n\ninterface SwitchConfig<C extends AnyPlasmicClass> {\n  isCheckedVariant: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  noLabelVariant?: VariantDef<PlasmicClassVariants<C>>;\n  labelSlot?: keyof PlasmicClassArgs<C>;\n  root: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useSwitch<P extends SwitchProps, C extends AnyPlasmicClass>(\n  plasmicClass: C,\n  props: P,\n  config: SwitchConfig<C>,\n  ref: SwitchRef = null\n) {\n  const { children, isDisabled } = props;\n  useEnsureSSRProvider();\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const rootRef = React.useRef<HTMLElement>(null);\n  const ariaProps = asAriaSwitchProps(props);\n  const state = useToggleState(ariaProps);\n  const { inputProps } = useAriaSwitch(ariaProps, state, inputRef);\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      {\n        def: config.isDisabledVariant,\n        active: isDisabled,\n      },\n      {\n        def: config.isCheckedVariant,\n        active: state.isSelected,\n      },\n      {\n        def: config.noLabelVariant,\n        active: !children,\n      }\n    ),\n  };\n  const overrides: Overrides = {\n    [config.root]: {\n      as: \"label\",\n      props: mergeProps(getStyleProps(props), {\n        ref: rootRef,\n      }),\n      wrapChildren: (children: React.ReactNode) => (\n        <>\n          <VisuallyHidden>\n            <input {...inputProps} ref={inputRef} />\n          </VisuallyHidden>\n          {children}\n        </>\n      ),\n    },\n  };\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    ...(config.labelSlot ? { [config.labelSlot]: children } : {}),\n  };\n\n  const plumeState: SwitchState = React.useMemo(\n    () => ({\n      setChecked: (checked: boolean) => state.setSelected(checked),\n    }),\n    [state]\n  );\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      getRoot: () => rootRef.current,\n      focus: () => inputRef.current?.focus(),\n      blur: () => inputRef.current?.blur(),\n      setChecked: (checked) => plumeState.setChecked(checked),\n    }),\n    [rootRef, inputRef, plumeState]\n  );\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n      args: args as PlasmicClassArgs<C>,\n    },\n    state: plumeState,\n  };\n}\n","import * as React from \"react\";\nimport { omit, pick } from \"../../common\";\nimport { Overrides } from \"../../render/elements\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  VariantDef,\n} from \"../plume-utils\";\n\nexport interface BaseTextInputProps\n  extends Omit<React.ComponentProps<\"input\">, \"type\" | \"disabled\">,\n    PlumeTextInputProps {}\n\nexport interface PlumeTextInputProps {\n  showStartIcon?: boolean;\n  showEndIcon?: boolean;\n  startIcon?: React.ReactNode;\n  endIcon?: React.ReactNode;\n  isDisabled?: boolean;\n  type?: \"text\" | \"password\" | \"email\" | \"url\" | string;\n  inputClassName?: string;\n  inputStyle?: React.CSSProperties;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nexport interface TextInputRefValue {\n  focus: () => void;\n  blur: () => void;\n  getRoot: () => HTMLElement | null;\n  getInput: () => HTMLInputElement | null;\n}\n\nexport type TextInputRef = React.Ref<TextInputRefValue>;\n\ninterface TextInputConfig<C extends AnyPlasmicClass> {\n  showStartIconVariant: VariantDef<PlasmicClassVariants<C>>;\n  showEndIconVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isDisabledVariant?: VariantDef<PlasmicClassVariants<C>>;\n  startIconSlot?: keyof PlasmicClassArgs<C>;\n  endIconSlot?: keyof PlasmicClassArgs<C>;\n  root: keyof PlasmicClassOverrides<C>;\n  input: keyof PlasmicClassOverrides<C>;\n}\n\nexport function useTextInput<\n  P extends PlumeTextInputProps,\n  C extends AnyPlasmicClass\n>(\n  plasmicClass: C,\n  props: P,\n  config: TextInputConfig<C>,\n  ref: TextInputRef = null\n) {\n  const {\n    isDisabled,\n    startIcon,\n    endIcon,\n    showStartIcon,\n    showEndIcon,\n    className,\n    style,\n    inputClassName,\n    inputStyle,\n    ...rest\n  } = props;\n  const rootRef = React.useRef<HTMLElement>(null);\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      focus() {\n        inputRef.current?.focus();\n      },\n      blur() {\n        inputRef.current?.blur();\n      },\n      getRoot() {\n        return rootRef.current;\n      },\n      getInput() {\n        return inputRef.current;\n      },\n      getBoundingClientRect() {\n        return rootRef.current?.getBoundingClientRect();\n      },\n    }),\n    [rootRef, inputRef]\n  );\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.showStartIconVariant, active: showStartIcon },\n      { def: config.showEndIconVariant, active: showEndIcon },\n      { def: config.isDisabledVariant, active: isDisabled }\n    ),\n  };\n\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    ...(config.startIconSlot && { [config.startIconSlot]: startIcon }),\n    ...(config.endIconSlot && { [config.endIconSlot]: endIcon }),\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: {\n        ref: rootRef,\n        className,\n        style,\n      },\n    },\n    [config.input]: {\n      props: {\n        // We throw all of extra \"rest\" onto the `input` element, except props\n        // that were meant for the Plasmic component -- the args and variants.\n        // We make two exceptions though:\n        // 1. onChange - Plume text-input is kind of screwy, and the \"value\" state\n        //    of the input element is not exposed to the outer component via the\n        //    normal way; instead, we register a separate \"value\" state that's\n        //    in additional to the input.value state. So that means there are\n        //    two `onChange` that we need to pipe through -- the one that updates\n        //    `$state.input.value`, the input value state internal to the component,\n        //    and the one that updates `$state.value`, the separate value state\n        //    exposed to the outside. The generated <PlasmicTextInput/> will pass\n        //    in the onChange for updating the internal `$state.input.value`, and\n        //    props.onChange here will pass in the onChange for updating the\n        //    externally exposed `$state.value`. Wow! Very sad.  If\n        //    `$state.input.value` were just externally exposed, then we wouldn't\n        //    need to do so; but we can't retroactively update people's TextInput\n        //    components that have already been forked :-/\n        // 2. `required`, because that prop existed prior to Plume pkg <= 19.1.1,\n        //    but it was not linked to the input's `required` attribute as it should.\n        //    So this again works around older versions of TextInput out there.\n        ...omit(\n          rest as any,\n          ...plasmicClass.internalArgProps.filter(\n            (prop) => prop !== \"required\" && prop !== \"onChange\"\n          ),\n          ...plasmicClass.internalVariantProps\n        ),\n        disabled: isDisabled,\n        ref: inputRef,\n        className: inputClassName,\n        style: inputStyle,\n      },\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n","import { usePlasmicCanvasContext } from \"@plasmicapp/host\";\nimport { FocusScope } from \"@react-aria/focus\";\nimport {\n  DismissButton,\n  useOverlay,\n  useOverlayPosition,\n} from \"@react-aria/overlays\";\nimport { DOMProps } from \"@react-types/shared\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { pick } from \"../../common\";\nimport {\n  mergeProps,\n  mergeRefs,\n  useIsomorphicLayoutEffect,\n} from \"../../react-utils\";\nimport { Overrides } from \"../../render/elements\";\nimport {\n  AnyPlasmicClass,\n  mergeVariantToggles,\n  PlasmicClassArgs,\n  PlasmicClassOverrides,\n  PlasmicClassVariants,\n  PLUME_STRICT_MODE,\n  VariantDef,\n} from \"../plume-utils\";\nimport {\n  getDefaultPlasmicProps,\n  getStyleProps,\n  StyleProps,\n} from \"../props-utils\";\nimport { TriggeredOverlayContext } from \"./context\";\n\nexport interface BaseTriggeredOverlayProps extends StyleProps, DOMProps {\n  children?: React.ReactNode;\n}\n\nexport interface TriggeredOverlayConfig<C extends AnyPlasmicClass> {\n  isPlacedTopVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedBottomVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedLeftVariant?: VariantDef<PlasmicClassVariants<C>>;\n  isPlacedRightVariant?: VariantDef<PlasmicClassVariants<C>>;\n\n  contentSlot: keyof PlasmicClassArgs<C>;\n  root: keyof PlasmicClassOverrides<C>;\n}\n\nexport type TriggeredOverlayRef = React.Ref<HTMLElement>;\n\nexport function useTriggeredOverlay<\n  P extends BaseTriggeredOverlayProps,\n  C extends AnyPlasmicClass\n>(\n  plasmicClass: C,\n  props: P,\n  config: TriggeredOverlayConfig<C>,\n  outerRef: TriggeredOverlayRef = null,\n  isDismissable = true\n) {\n  const overlayRef = React.useRef<HTMLElement>(null);\n  const onOverlayRef = mergeRefs(overlayRef, outerRef, (ref) => {\n    // Workaround for https://github.com/adobe/react-spectrum/issues/1513\n    // to avoid touch events leaking under the overlay when it is closed.\n    if (ref) {\n      ref.addEventListener(\"touchend\", (e) => {\n        e.preventDefault();\n      });\n    }\n  });\n\n  const context = React.useContext(TriggeredOverlayContext);\n\n  if (!context) {\n    // If no context, then we are not being correctly used.  Either complain, or\n    // exit early.  It's okay to exit early and break the rules of React hooks\n    // because we won't suddenly have the appropriate context anyway for this instance.\n    if (PLUME_STRICT_MODE) {\n      throw new Error(\n        \"You can only use a triggered overlay with a TriggeredOverlayContext\"\n      );\n    }\n    return getDefaultPlasmicProps(plasmicClass, props);\n  }\n\n  const { children } = props;\n  const {\n    triggerRef,\n    placement,\n    overlayMatchTriggerWidth,\n    overlayMinTriggerWidth,\n    overlayWidth,\n    state,\n  } = context;\n\n  // Measure the width of the trigger to inform the width of the menu (below).\n  const [isRendered, setRendered] = React.useState(false);\n  const triggerWidth =\n    triggerRef.current && (overlayMatchTriggerWidth || overlayMinTriggerWidth)\n      ? triggerRef.current.offsetWidth\n      : undefined;\n\n  useIsomorphicLayoutEffect(() => {\n    if (\n      !isRendered &&\n      triggerRef.current &&\n      (overlayMatchTriggerWidth || overlayMinTriggerWidth)\n    ) {\n      setRendered(true);\n    }\n  }, [\n    triggerRef,\n    isRendered,\n    overlayMatchTriggerWidth,\n    overlayMinTriggerWidth,\n  ]);\n\n  const { overlayProps: overlayAriaProps } = useOverlay(\n    {\n      isOpen: state.isOpen,\n      onClose: state.close,\n      isDismissable,\n      shouldCloseOnBlur: true,\n    },\n    overlayRef\n  );\n\n  const {\n    overlayProps: overlayPositionProps,\n    updatePosition,\n    placement: placementAxis,\n  } = useOverlayPosition({\n    targetRef: triggerRef,\n    overlayRef,\n    placement: placement ?? \"bottom left\",\n    shouldFlip: true,\n    isOpen: state.isOpen,\n    onClose: state.close,\n    containerPadding: 0,\n  });\n\n  useIsomorphicLayoutEffect(() => {\n    if (state.isOpen) {\n      requestAnimationFrame(() => {\n        updatePosition();\n      });\n    }\n  }, [state.isOpen, updatePosition]);\n\n  const overlayProps = mergeProps(\n    {\n      style: {\n        left: \"auto\",\n        right: \"auto\",\n        top: \"auto\",\n        bottom: \"auto\",\n        position: \"absolute\",\n        width:\n          overlayWidth ?? (overlayMatchTriggerWidth ? triggerWidth : \"auto\"),\n        minWidth: overlayMinTriggerWidth ? triggerWidth : \"auto\",\n      },\n    },\n    overlayAriaProps,\n    overlayPositionProps\n  );\n\n  const variants = {\n    ...pick(props, ...plasmicClass.internalVariantProps),\n    ...mergeVariantToggles(\n      { def: config.isPlacedTopVariant, active: placementAxis === \"top\" },\n      { def: config.isPlacedBottomVariant, active: placementAxis === \"bottom\" },\n      { def: config.isPlacedLeftVariant, active: placementAxis === \"left\" },\n      { def: config.isPlacedRightVariant, active: placementAxis === \"right\" }\n    ),\n  };\n\n  const canvasCtx = usePlasmicCanvasContext();\n  const args = {\n    ...pick(props, ...plasmicClass.internalArgProps),\n    [config.contentSlot]:\n      canvasCtx && !canvasCtx.interactive ? (\n        children\n      ) : (\n        <FocusScope restoreFocus>\n          <DismissButton onDismiss={state.close} />\n          {children}\n          {/* We don't use the DismissButton at the end because it ends up taking up 1px space :-/ */}\n          {/* <DismissButton onDismiss={state.close} /> */}\n        </FocusScope>\n      ),\n  };\n\n  const overrides: Overrides = {\n    [config.root]: {\n      props: mergeProps(overlayProps, getStyleProps(props), {\n        ref: onOverlayRef,\n      }),\n      wrap: (root: React.ReactNode) => {\n        if (typeof document !== \"undefined\") {\n          return ReactDOM.createPortal(root, document.body);\n        } else {\n          // Possibly being invoked on the server during SSR; no need to\n          // bother with a portal in that case.\n          return root;\n        }\n      },\n    },\n  };\n\n  return {\n    plasmicProps: {\n      variants: variants as PlasmicClassVariants<C>,\n      args: args as PlasmicClassArgs<C>,\n      overrides: overrides as PlasmicClassOverrides<C>,\n    },\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}