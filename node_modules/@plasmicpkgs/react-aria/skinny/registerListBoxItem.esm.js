import React, { useState, useEffect } from 'react';
import { ListBoxItem, ListBox } from 'react-aria-components';
import { C as COMMON_STYLES } from './common-ceebbaea.esm.js';
import { b as PlasmicListBoxContext } from './contexts-5cb81c2f.esm.js';
import { DESCRIPTION_COMPONENT_NAME } from './registerDescription.esm.js';
import { TEXT_COMPONENT_NAME } from './registerText.esm.js';
import { r as registerComponentHelper, m as makeComponentName } from './utils-5d1b4c6b.esm.js';
import { p as pickAriaComponentVariants } from './variant-utils-4405ebb0.esm.js';
import '@plasmicapp/host';
import '@plasmicapp/host/registerComponent';

var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
var __objRest = (source, exclude) => {
  var target = {};
  for (var prop in source)
    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
      target[prop] = source[prop];
  if (source != null && __getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(source)) {
      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
        target[prop] = source[prop];
    }
  return target;
};
const LIST_BOX_ITEM_VARIANTS = [
  "hovered",
  "pressed",
  "focused",
  "focusVisible",
  "selected",
  "disabled"
];
const { variants, withObservedValues } = pickAriaComponentVariants(
  LIST_BOX_ITEM_VARIANTS
);
function BaseListBoxItem(props) {
  const _a = props, { children, setControlContextData, plasmicUpdateVariant, id } = _a, rest = __objRest(_a, ["children", "setControlContextData", "plasmicUpdateVariant", "id"]);
  const listboxContext = React.useContext(PlasmicListBoxContext);
  const isStandalone = !listboxContext;
  const [registeredId, setRegisteredId] = useState();
  useEffect(() => {
    if (!listboxContext) {
      return;
    }
    const localId = listboxContext.idManager.register(id);
    setRegisteredId(localId);
    return () => {
      listboxContext.idManager.unregister(localId);
      setRegisteredId(void 0);
    };
  }, [id]);
  setControlContextData == null ? void 0 : setControlContextData({
    idError: (() => {
      if (id === void 0) {
        return "ID must be defined";
      }
      if (typeof id !== "string") {
        return "ID must be a string";
      }
      if (!id.trim()) {
        return "ID must be defined";
      }
      if (!isStandalone && id != registeredId) {
        return "ID must be unique";
      }
      return void 0;
    })()
  });
  const listboxItem = /* @__PURE__ */ React.createElement(
    ListBoxItem,
    __spreadProps(__spreadValues({
      key: registeredId,
      id: registeredId
    }, rest), {
      style: COMMON_STYLES
    }),
    ({
      isHovered,
      isPressed,
      isFocused,
      isFocusVisible,
      isSelected,
      isDisabled
    }) => withObservedValues(
      children,
      {
        hovered: isHovered,
        pressed: isPressed,
        focused: isFocused,
        focusVisible: isFocusVisible,
        selected: isSelected,
        disabled: isDisabled
      },
      plasmicUpdateVariant
    )
  );
  if (isStandalone) {
    return /* @__PURE__ */ React.createElement(ListBox, { selectionMode: "single" }, listboxItem);
  }
  return listboxItem;
}
const makeDefaultListBoxItemChildren = (label, description) => ({
  type: "vbox",
  styles: {
    display: "flex",
    alignItems: "flex-start",
    gap: "2px"
  },
  children: [
    {
      type: "component",
      name: TEXT_COMPONENT_NAME,
      props: {
        slot: "label",
        children: {
          type: "text",
          styles: {
            fontWeight: 500
          },
          value: label
        }
      }
    },
    {
      type: "component",
      name: DESCRIPTION_COMPONENT_NAME,
      props: {
        children: {
          type: "text",
          styles: {
            color: "#838383"
          },
          value: description != null ? description : `Some description for ${label}...`
        }
      }
    }
  ]
});
function registerListBoxItem(loader, overrides) {
  return registerComponentHelper(
    loader,
    BaseListBoxItem,
    {
      name: makeComponentName("item"),
      displayName: "Aria ListBoxItem",
      importPath: "@plasmicpkgs/react-aria/skinny/registerListBoxItem",
      importName: "BaseListBoxItem",
      variants,
      props: {
        id: {
          type: "string",
          description: "A unique value for tracking the selected item in state",
          required: true,
          displayName: "Value",
          validator: (_value, _props, ctx) => {
            if (ctx == null ? void 0 : ctx.idError) {
              return ctx.idError;
            }
            return true;
          }
        },
        textValue: {
          type: "string",
          displayName: "Label",
          description: "A user-friendly text representation of the item's contents, used for features like typeahead."
        },
        children: {
          type: "slot",
          mergeWithParent: true,
          defaultValue: makeDefaultListBoxItemChildren("Item")
        }
      },
      trapsFocus: true
    },
    overrides
  );
}

export { BaseListBoxItem, makeDefaultListBoxItemChildren, registerListBoxItem };
//# sourceMappingURL=registerListBoxItem.esm.js.map
